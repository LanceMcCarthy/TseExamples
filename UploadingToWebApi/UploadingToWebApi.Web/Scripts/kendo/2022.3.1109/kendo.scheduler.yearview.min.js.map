{"version":3,"file":"kendo.scheduler.yearview.min.js","names":["factory","define","amd","$","kendo","ui","SchedulerView","extend","template","firstDayOfYear","firstDayOfMonth","lastDayOfMonth","NAVIGATE","KEYDOWN","CLICK","FOCUS","NS","YearViewStyles","TOOLTIP_TEMPLATE","YearView","window","jQuery","date","layout","body","tooltip","indicator","event","hidden","calendarView","scheduler","init","element","options","that","this","fn","call","_yearRange","_templates","_layout","_initCalendar","_initTooltip","title","name","months","startDate","messages","noData","selectedDateFormat","selectedShortDateFormat","selectedMobileDateFormat","tooltipTemplate","events","tempEnd","_startDate","setFullYear","getFullYear","Date","setMonth","getMonth","_endDate","settings","Template","templateSettings","styles","content","addClass","append","calendar","calEl","calendarElement","MultiViewCalendar","views","value","showViewHeader","footer","selectable","_disableCalendarSelection","header","toggleClass","on","_calendarCellClick","bind","_calendarKeydown","_calendarNavigate","ev","target","first","preventDefault","stopPropagation","_displayTooltip","keys","keyCode","ENTER","SPACEBAR","navigationDate","sender","_firstViewValue","previousDate","nextDate","trigger","view","_focusCellOnNavigate","focusDate","find","getKendoMultiViewCalendar","lastDateInRange","_focusCell","_cellByDate","off","_move","tooltipElement","_buildTooltipTemplate","Tooltip","filter","showOn","position","width","_initTooltipPopup","_tooltipShow","_tooltipHide","_initPopup","popup","_tooltipTitleClick","_tooltipKeydown","parseDate","current","data","eventsByDate","dateData","toString","items","map","resources","eventResources","_inverseTooltipEventsColor","each","_inverseEventColor","refresh","focus","_navigateToDayView","shiftKey","is","TAB","firstFocusable","lastFocusable","last","grep","isPlainObject","type","length","removeClass","setTimeout","show","_renderEventIndicators","cell","remove","forEach","_currentView","toDateString","querySelector","appendTo","_groupEventsByDate","eventsFormatted","formattedDate","start","Query","sort","field","dir","group","toArray","_resourceBySlot","end","nextYear","previousYear","endDate","moveToEvent","constrainSelection","inRange","select","selection","clearSelection","selectionByElement","index","_index","toDateObject","isAllDay","uid","candidate","_current","render","_cachedEvents","destroy"],"sources":["kendo.scheduler.yearview.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.scheduler.view', 'kendo.multiviewcalendar', 'kendo.tooltip'], factory) :\n    factory();\n})((function () {\n    var __meta__ = {\n        id: \"scheduler.yearview\",\n        name: \"Scheduler Year View\",\n        category: \"web\",\n        description: \"The Scheduler Year View\",\n        depends: [ \"scheduler.view\", \"multiviewcalendar\", \"tooltip\" ],\n        hidden: true\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            SchedulerView = ui.SchedulerView,\n            extend = $.extend,\n            template = kendo.template,\n            firstDayOfYear = kendo.date.firstDayOfYear,\n            firstDayOfMonth = kendo.date.firstDayOfMonth,\n            lastDayOfMonth = kendo.date.lastDayOfMonth,\n            DAY = \"day\",\n            NAVIGATE = \"navigate\",\n            KEYDOWN = \"keydown\",\n            ACTIVATE = \"activate\",\n            SHOW = \"show\",\n            HIDE = \"hide\",\n            CLICK = \"click\",\n            FOCUS = \"focus\",\n            DOT = \".\",\n            NS = \".kendoYearView\";\n\n        var YearViewStyles = {\n            layout: \"k-scheduler-layout k-scheduler-layout-flex k-scheduler-yearview\",\n            body: \"k-scheduler-body\",\n            tooltip: \"k-scheduler-tooltip\",\n            indicator: \"k-day-indicator\",\n            event: \"k-tooltip-event\",\n            hidden: \"k-hidden\",\n            calendarView: \"k-calendar-view\",\n            scheduler: \"k-scheduler\"\n        };\n\n        var TOOLTIP_TEMPLATE = template(\n            \"<div class='k-tooltip-title k-text-center'>\" +\n                \"<div class='k-month'>#:kendo.format('{0:MMM}', date)#</div>\" +\n                \"<div tabindex='0' class='k-link k-day k-text-primary'>#:kendo.format('{0:dd}', date)#</div>\" +\n            \"</div>\" +\n            \"#if(events.length){#\" +\n                \"<div class='k-tooltip-events-container'>\" +\n                    \"<div class='k-tooltip-events'>\" +\n                        \"#for(var i = 0; i < events.length; i+=1){#\" +\n                            \"#var event = events[i]#\" +\n                            \"<div class='k-tooltip-event k-event' title='#:event.title#'\" +\n                                \"# if (event.resources[0]) { #\" +\n                                    \"style='background-color: #: event.resources[0].color #; border-color: #: event.resources[0].color #;'\" +\n                                \"#}#>\" +\n                                \"<div class='k-event-title k-text-ellipsis'>#:event.title#</div>\" +\n                                \"<span class='k-spacer'></span>\" +\n                                \"<span class='k-event-time'>#:kendo.format('{0:t}', event.start)#</span>\" +\n                            \"</div>\" +\n                        \"#}#\" +\n                    \"</div>\" +\n                \"</div>\" +\n            \"#} else {#\" +\n                \"<div class='k-no-data k-text-center'>#:messages.noData#</div>\" +\n            \"#}#\"\n        );\n\n        var YearView = SchedulerView.extend({\n            init: function(element, options) {\n                var that = this;\n\n                SchedulerView.fn.init.call(that, element, options);\n\n                that._yearRange();\n\n                that._templates();\n\n                that._layout();\n\n                that._initCalendar();\n\n                that._initTooltip();\n            },\n\n            options: {\n                title: \"Year\",\n                name: \"year\",\n                months: 12,\n                startDate: null,\n                messages: {\n                    noData: \"No events on this date.\"\n                },\n                selectedDateFormat: \"{0:yyyy}\",\n                selectedShortDateFormat: \"{0:yyyy}\",\n                selectedMobileDateFormat: \"{0:yyyy}\",\n                tooltipTemplate: TOOLTIP_TEMPLATE\n            },\n\n            name: \"year\",\n\n            events: [ NAVIGATE ],\n\n            _yearRange: function() {\n                var that = this,\n                    options = that.options,\n                    tempEnd;\n\n                that._startDate = options.startDate ? firstDayOfMonth(options.startDate) : firstDayOfYear(options.date);\n                that._startDate.setFullYear(options.date.getFullYear());\n\n                tempEnd = new Date(that._startDate);\n                tempEnd.setMonth(tempEnd.getMonth() + options.months);\n                that._endDate = tempEnd;\n            },\n\n            _templates: function() {\n                var options = this.options,\n                    settings = extend({}, kendo.Template, options.templateSettings);\n\n                this.tooltipTemplate = kendo.template(options.tooltipTemplate, settings);\n            },\n\n            _layout: function() {\n                var that = this,\n                    styles = YearViewStyles;\n\n                that.content = $(\"<div/>\").addClass(styles.layout);\n                that.element.append(that.content);\n\n                that.body = $(\"<div/>\").addClass(styles.body);\n                that.content.append(that.body);\n            },\n\n            _initCalendar: function() {\n                var that = this,\n                    options = that.options,\n                    calendarElement = $(\"<div/>\"),\n                    calendar, calEl;\n\n                that.body.append(calendarElement);\n\n                that.calendar = calendar = new ui.MultiViewCalendar(calendarElement, {\n                    views: options.months,\n                    value: that.startDate(),\n                    showViewHeader: true,\n                    footer: false\n                });\n\n                calEl = calendar.element;\n\n                if (!options.selectable) {\n                    that._disableCalendarSelection();\n                }\n\n                calendar.value(null);\n\n                calendar.header.toggleClass(YearViewStyles.hidden);\n\n                calEl.on(CLICK + NS, \"td[role='gridcell']\", that._calendarCellClick.bind(that));\n                calEl.on(KEYDOWN + NS, DOT + YearViewStyles.calendarView, that._calendarKeydown.bind(that));\n                calendar.bind(NAVIGATE, that._calendarNavigate.bind(that));\n            },\n\n            _calendarCellClick: function(ev) {\n                var that = this,\n                    target = that.calendar.selectable.value().first();\n\n                ev.preventDefault();\n                ev.stopPropagation();\n\n                that._displayTooltip(target);\n            },\n\n            _calendarKeydown: function(ev) {\n                var that = this,\n                    keys = kendo.keys,\n                    keyCode = ev.keyCode;\n\n                if (keyCode == keys.ENTER || keyCode == keys.SPACEBAR) {\n                    ev.preventDefault();\n\n                    that._displayTooltip(that.calendar.selectable.value().first());\n                }\n            },\n\n            _calendarNavigate: function(ev) {\n                var that = this,\n                    calendar = ev.sender,\n                    isPrevious = calendar._firstViewValue < that.startDate(),\n                    navigationDate = isPrevious ? that.previousDate() : that.nextDate();\n\n                that.trigger(NAVIGATE, { view: \"year\", date: navigationDate });\n\n                that._focusCellOnNavigate();\n            },\n\n            _focusCellOnNavigate: function() {\n                var that = this,\n                    calendar = that.calendar || that.element.find(\".k-calendar\").getKendoMultiViewCalendar(),\n                    isPrevious,\n                    focusDate;\n\n                if (!calendar) {\n                    return;\n                }\n\n                isPrevious = calendar._firstViewValue < that.startDate();\n                focusDate = isPrevious ? that.lastDateInRange() : that.nextDate();\n                calendar._focusCell(calendar._cellByDate(focusDate), true);\n            },\n\n            _disableCalendarSelection: function() {\n                var that = this;\n\n                if (!that.calendar) {\n                    return;\n                }\n\n                that.calendar.value(null);\n                that.calendar.element.off(KEYDOWN, that.calendar._move);\n            },\n\n            _initTooltip: function() {\n                var that = this,\n                    tooltipElement = that.content,\n                    tooltipTemplate = that._buildTooltipTemplate.bind(that);\n\n                that.tooltip = new ui.Tooltip(tooltipElement, {\n                    filter: \".k-calendar td[role='gridcell']\",\n                    showOn: CLICK,\n                    position: \"right\",\n                    content: tooltipTemplate,\n                    width: 220\n                });\n\n                that._initTooltipPopup();\n\n                that.tooltip.bind(SHOW, that._tooltipShow.bind(that));\n\n                that.tooltip.bind(HIDE, that._tooltipHide.bind(that));\n            },\n\n            _initTooltipPopup: function() {\n                var that = this,\n                    tooltip = that.tooltip;\n\n                if (!that.tooltip) {\n                    return;\n                }\n\n                tooltip._initPopup();\n\n                tooltip.popup.element.addClass(YearViewStyles.tooltip);\n\n                tooltip.popup.element.on(CLICK + NS, \".k-tooltip-title > .k-day\", that._tooltipTitleClick.bind(that));\n\n                tooltip.popup.element.on(KEYDOWN + NS, that, that._tooltipKeydown.bind(that));\n            },\n\n            _buildTooltipTemplate: function() {\n                var that = this,\n                    date = kendo.parseDate(that.calendar.current()),\n                    data = that.eventsByDate || [];\n\n                data = data.filter(function(dateData) {\n                    return kendo.toString(new Date(dateData.value), \"d\") == kendo.toString(date, \"d\");\n                });\n\n                if (data && data[0]) {\n                    data[0].items.map(function(event) {\n                        event.resources = that.eventResources(event) || [];\n                    });\n                }\n\n                return that.tooltipTemplate({\n                    date: date,\n                    events: data[0] ? data[0].items : [],\n                    messages: that.options.messages\n                });\n            },\n\n            _inverseTooltipEventsColor: function() {\n                var that = this;\n\n                $.each(that.tooltip.popup.element.find(DOT + YearViewStyles.event), function() {\n                    that._inverseEventColor($(this));\n                });\n            },\n\n            _tooltipShow: function(ev) {\n                var that = this,\n                    tooltip = ev.sender;\n\n                tooltip.refresh();\n\n                that._inverseTooltipEventsColor();\n\n                tooltip.popup.element.find(\":kendoFocusable\").first().trigger(FOCUS);\n            },\n\n            _tooltipHide: function() {\n                var calendar = this.calendar;\n\n                if (!calendar) {\n                    return;\n                }\n\n                calendar.focus();\n            },\n\n            _tooltipTitleClick: function() {\n                this._navigateToDayView();\n            },\n\n            _tooltipKeydown: function(ev) {\n                var that = this,\n                    element = that.tooltip.popup.element,\n                    target = $(ev.target),\n                    keys = kendo.keys,\n                    keyCode = ev.keyCode,\n                    shiftKey = ev.shiftKey;\n\n                if (target.is(\".k-day\") && keyCode == keys.ENTER || keyCode == keys.SPACEBAR) {\n                    ev.preventDefault();\n\n                    that._navigateToDayView();\n                }\n\n                if (keyCode == keys.TAB) {\n                    var firstFocusable = element.find(\":kendoFocusable\").first();\n                    var lastFocusable = element.find(\":kendoFocusable\").last();\n\n                    if (shiftKey && target.is(firstFocusable)) {\n                        lastFocusable.trigger(FOCUS);\n                        ev.preventDefault();\n                    } else if (target.is(lastFocusable)) {\n                        firstFocusable.trigger(FOCUS);\n                        ev.preventDefault();\n                    }\n                }\n            },\n\n            _navigateToDayView: function() {\n                var dayViewEnabled = $.grep(this.options.views, function(view) {\n                    return ($.isPlainObject(view) && view.type == \"kendo.ui.DayView\") || view === DAY;\n                }).length;\n\n                if (dayViewEnabled) {\n                    this.trigger(NAVIGATE, { view: DAY, date: this.calendar.current() });\n                }\n            },\n\n            _displayTooltip: function(target) {\n                var that = this;\n\n                if (!target.length) {\n                    return;\n                }\n\n                if (!that.options.selectable) {\n                    target.removeClass(\"k-selected\");\n                }\n\n                setTimeout(function() {\n                    that.tooltip.show(target);\n                }, 50);\n            },\n\n            _renderEventIndicators: function() {\n                var that = this,\n                    calendar = that.calendar,\n                    current,\n                    cell;\n\n                calendar.element.find(\".\" + YearViewStyles.indicator).remove();\n\n                that.eventsByDate.forEach(function(date) {\n                    current = calendar._currentView.toDateString(new Date(date.value));\n                    cell = calendar.element[0].querySelector(\"[data-value='\" + current + \"']\");\n\n                    if (date.items.length) {\n                        $(\"<span/>\").addClass(YearViewStyles.indicator).appendTo(cell);\n                    }\n                });\n            },\n\n            _groupEventsByDate: function(events) {\n                var eventsByDate = [],\n                    eventsFormatted;\n\n                if (!events.length) {\n                    return [];\n                }\n\n                eventsFormatted = events.map(function(event) {\n                    event.formattedDate = event.start.toDateString();\n                    return event;\n                });\n\n                eventsByDate = new kendo.data.Query(eventsFormatted)\n                    .sort([\n                        { field: \"start\", dir: \"asc\" },\n                        { field: \"end\", dir: \"desc\" }\n                    ])\n                    .group({\n                        field: \"formattedDate\"\n                    })\n                    .toArray();\n\n                return eventsByDate;\n            },\n\n            _resourceBySlot: function() {\n                return {};\n            },\n\n            lastDateInRange: function() {\n                var end = new Date(this.previousDate());\n\n                end.setMonth((end.getMonth() - 1) + this.options.months);\n\n               return lastDayOfMonth(end);\n            },\n\n            nextDate: function() {\n                return kendo.date.nextYear(this._startDate);\n            },\n\n            previousDate: function() {\n                return kendo.date.previousYear(this._startDate);\n            },\n\n            startDate: function() {\n                return this._startDate;\n            },\n\n            endDate: function() {\n                return this._endDate;\n            },\n\n            moveToEvent: function() {\n                return false;\n            },\n\n            constrainSelection: function() {\n                return false;\n            },\n\n            inRange: function() {\n                return true;\n            },\n\n            select: function(selection) {\n                this.clearSelection();\n\n                if (selection.start >= this.startDate() && selection.start < this.endDate()) {\n                    this.calendar.value(selection.start);\n                } else {\n                    this.calendar.value(this.calendar._firstViewValue);\n                    selection.start = selection.end = this.calendar.value();\n                }\n\n                this.current(this.calendar.selectable.value()[0]);\n            },\n\n            selectionByElement: function(cell) {\n                if (!cell.length) {\n                    return;\n                }\n\n                cell = $(cell);\n\n                return {\n                    index: this.calendar._index,\n                    start: kendo.calendar.toDateObject(cell),\n                    end: kendo.calendar.toDateObject(cell),\n                    isAllDay: false,\n                    uid: 0\n                };\n            },\n\n            current: function(candidate) {\n                if (candidate !== undefined$1) {\n                    this._current = candidate;\n                } else {\n                    return this._current;\n                }\n            },\n\n            render: function(events) {\n                var that = this;\n\n                that._cachedEvents = events;\n\n                that.eventsByDate = that._groupEventsByDate(events) || [];\n\n                that._renderEventIndicators();\n\n                that.trigger(ACTIVATE);\n            },\n\n            destroy: function() {\n                var that = this;\n\n                if (that.tooltip) {\n                    that.tooltip.destroy();\n                    that.tooltip = null;\n                }\n\n                if (that.calendar) {\n                    that.calendar.destroy();\n                    that.calendar = null;\n                }\n\n                if (that.element) {\n                    that.content.remove();\n                    that.element.off(NS);\n                }\n\n                SchedulerView.fn.destroy.call(this);\n            }\n        });\n\n        extend(true, ui, {\n            YearView: YearView\n        });\n\n    })(window.kendo.jQuery);\n\n}));\n"]}