{"version":3,"file":"kendo.gantt.timeline.min.js","names":["factory","define","amd","$","Widget","kendo","ui","kendoDomElement","dom","element","kendoTextElement","text","kendoHtmlElement","html","isPlainObject","outerWidth","_outerWidth","outerHeight","_outerHeight","extend","isRtl","keys","Query","data","NS","CLICK","MOUSEMOVE","MOUSEENTER","MOUSELEAVE","DOT","TIME_HEADER_TEMPLATE","template","DAY_HEADER_TEMPLATE","WEEK_HEADER_TEMPLATE","MONTH_HEADER_TEMPLATE","YEAR_HEADER_TEMPLATE","RESIZE_HINT","RESIZE_TOOLTIP_TEMPLATE","PERCENT_RESIZE_TOOLTIP_TEMPLATE","TASK_TOOLTIP_TEMPLATE","OFFSET_TOOLTIP_TEMPLATE","PLANNED_TOOLTIP_TEMPLATE","defaultViews","day","type","week","month","year","blurActiveElement","activeElement","_activeElement","nodeName","toLowerCase","trigger","GanttView","init","options","fn","call","this","title","name","header","find","styles","gridHeader","content","gridContent","contentWidth","width","_workDays","workDays","dayIndex","workWeekStart","push","workWeekEnd","getWorkDays","_headerTree","headerTree","_taskTree","taskTree","_taskTemplate","taskTemplate","Template","templateSettings","_dependencyTree","dependencyTree","_taskCoordinates","_currentTime","destroy","clearTimeout","_tooltipTimeout","headerRow","_dragHint","_resizeHint","_resizeTooltip","_taskTooltip","_percentCompleteResizeTooltip","showWorkHours","showWorkDays","workDayStart","Date","workDayEnd","hourSpan","slotSize","currentTimeMarker","updateInterval","renderLayout","_slots","_createSlots","_tableWidth","_calculateTableWidth","createLayout","_layout","_slotDimensions","_adjustHeight","dependenciesWrapper","height","rows","headers","_headers","colgroup","_colgroup","tree","table","style","role","render","first","last","slot","children","slots","_timeSlots","i","length","offsetLeft","offsetWidth","tasks","contentTable","totalHeight","taskCount","rowsTable","_rowsTable","columnsTable","_columnsTable","tasksTable","_tasksTable","calculatedSize","row","_contentHeight","_rowHeight","undefined","_renderCurrentTime","rowCount","attributes","className","alt","_createTable","slotSpan","cells","slotsCount","totalSpan","span","colspan","isNonWorking","nonWorking","cell","position","plannedPosition","task","resourcesPosition","resourceStyle","rowIndex","taskLeft","taskRight","coordinates","size","_calculateMilestoneWidth","milestoneWidth","Math","round","resourcesField","resource","resourceAlt","resourcesMargin","_calculateResourcesMargin","taskBorderWidth","_calculateTaskBorderWidth","showPlannedTasks","l","_taskPosition","_taskPositionPlanned","borderWidth","start","end","_renderTask","left","max","clientWidth","resourcesWrap","_renderResources","isMilestone","id","tbody","cols","currentSpan","maxSpan","boundingClientRect","taskMilestone","milestone","append","getBoundingClientRect","right","remove","margin","wrapper","parseInt","css","computedStyle","taskSingle","getComputedStyles","parseFloat","taskWrapper","taskElement","progressHandleOffset","plannedElement","endTaskDotLeft","taskOffsetWrap","offsetElement","editable","wrapClassName","taskWrap","dragHandleStyle","taskWrapAttr","endTaskDotRight","taskFullWidth","_renderPlannedMilestone","_renderPlannedSingleTask","summary","_renderSummary","taskSummaryWrap","_renderMilestone","taskMilestoneWrap","_renderSingleTask","plannedStart","plannedEnd","taskOffset","resize","update","taskActions","link","taskDelete","href","icon","iconDelete","taskResizeHandle","taskResizeHandleWest","taskResizeHandleEast","taskInnerWrap","dependencyCreate","taskDot","taskDotStart","taskDotEnd","dragPercentComplete","percentComplete","taskDragHandle","progressWidth","taskContent","taskChildren","classes","widthExceptDelay","taskDelayed","taskAdvanced","taskComplete","uid","taskSummary","taskSummaryProgress","taskSummaryComplete","taskPlannedMoment","taskPlannedMomentLeft","taskPlannedDuration","taskPlanned","resources","color","get","reverse","startLeft","_offset","date","slotOffset","_slotIndex","field","value","middle","startIdx","endIdx","slice","ceil","_timeByPosition","x","snap","snapToEnd","_slotByPosition","offset","duration","getTime","slotIndex","_renderDependencies","dependencies","elements","apply","_renderDependency","dependency","predecessor","predecessorId","successor","successorId","attr","_renderFF","from","to","lines","_dependencyFF","_arrow","_renderSS","_renderFS","_dependencyFS","_renderSF","delta","that","top","dir","rowHeight","fromTop","floor","toTop","addHorizontal","_line","line","lineHorizontal","addVertical","lineVertical","abs","minLineHeight","direction","arrowWest","arrowEast","count","j","_createDragHint","clone","addClass","dragHint","cursor","visibility","closest","_updateDragHint","_removeDragHint","_createResizeHint","tooltipTop","taskTop","messages","views","format","resizeTooltipFormat","_resizeTooltipWidth","_resizeTooltipTop","_updateResizeHint","resizeStart","tooltipLeft","tablesWidth","support","scrollbar","tooltipWidth","tableOffset","tasksWrapper","appendTo","_removeResizeHint","_updatePercentCompleteTooltip","_removePercentCompleteTooltip","tooltip","tooltipMiddle","arrow","callout","arrowHeight","_updateDependencyDragHint","_removeDependencyDragHint","_creteDependencyDragHint","deltaX","deltaY","y","sqrt","angle","atan","PI","dependencyHint","transform","_createTaskTooltip","mouseLeft","contentOffset","contentScrollLeft","scrollLeft","parents","rowOffset","scrollTop","tooltipWrapper","_adjustTooltipDimensions","_removeTaskTooltip","_createOffsetTooltip","hours","_offsetTooltip","offsetValue","plannedTasksMessages","plannedTasks","minutes","offsetText","days","offsetTooltipDelay","offsetPrefix","_removeOffsetTooltip","_createPlannedTooltip","_plannedTooltip","plannedTooltip","editorMessages","editor","startDate","toString","endDate","_removePlannedTooltip","_scrollTo","elementLeft","elementWidth","elementRight","rowTop","rowBottom","contentTop","contentBottom","contentLeft","contentRight","scrollbarWidth","_scrollToDate","viewStart","viewEnd","columnLevels","level","column","headerText","levelIndex","levelCount","columnIndex","columnCount","_hours","slotEnd","isWorkHour","getHours","setHours","_days","isWorkDay","nextDay","_isWorkDay","_weeks","daySlots","firstDay","calendarInfo","dayOfWeek","addDays","_months","endMonth","firstDayOfMonth","setMonth","getMonth","_years","monthSpan","_slotHeaders","columns","getDay","getCulture","calendars","standard","currentTime","_getCurrentTime","timeOffset","viewStyles","tablesWrap","markerOptions","_currentTimeUpdateTimer","setInterval","bind","reset","gridHeaderWrap","taskDetails","taskDetailsPercent","tooltipContent","tooltipCallout","marquee","marqueeColor","offsetTooltipAdvanced","GanttDayView","timeHeaderTemplate","dayHeaderTemplate","range","optionsRange","getDate","getMilliseconds","daySlot","hourSlots","GanttWeekView","weekHeaderTemplate","endDay","rangeEnd","setDate","GanttMonthView","monthHeaderTemplate","lastDayOfMonth","GanttYearView","yearHeaderTemplate","monthSlots","each","index","GanttTimeline","_wrapper","_domTrees","_views","_selectable","_draggable","_resizable","_percentResizeDraggable","_createDependencyDraggable","_attachEvents","_tooltip","selectable","clearInterval","_unbindView","_selectedView","_moveDraggable","_resizeDraggable","_percentDraggable","_dependencyDraggable","touch","off","calculatedRowHeight","calculatedCellHeight","gridContentWrap","_calculatedSize","Tree","view","isSettings","defaultView","selected","_selectedViewName","_selectView","action","_initializeView","_viewByIndex","getter","window","Error","newRange","newDate","prefix","_range","sort","toArray","_render","_tasks","_taskByUid","currentStart","startOffset","cleanUp","dragInProgress","move","Draggable","distance","filter","holdToDrag","mobileOS","ignore","e","currentTarget","parent","preventDefault","location","throttle","updateHintDate","userEvents","currentEnd","hasClass","taskElementOffset","timelineOffset","originalPercentWidth","maxPercentWidth","currentPercentComplete","updateElement","siblings","initialDelta","currentWidth","min","originalHandle","startX","startY","hoveredHandle","hoveredTask","removeClass","hovered","origin","toggleHandles","toggleClass","elementOffset","tablesOffset","target","elementUnderCursor","currentX","currentY","fromStart","toStart","predecessorElement","successorElement","on","stopPropagation","ctrlKey","document","elementFromPoint","clientX","clientY","click","selectDependency","clearSelection","select","taskWrapActive","_tabindex","selectedDependency","keyCode","DELETE","dependencyDestroy","kendoTouch","doubletap","currentMousePosition","tooltipOptions","mouseMoveHandler","visible","relatedTarget","currentPosition","client","setTimeout","_offsetTooltipTimeout","_plannedTooltipTimeout","_setPlanned","jQuery"],"sources":["kendo.gantt.timeline.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.dom', 'kendo.touch', 'kendo.draganddrop'], factory) :\n    factory();\n})((function () {\n    var __meta__ = {\n        id: \"gantt.timeline\",\n        name: \"Gantt Timeline\",\n        category: \"web\",\n        description: \"The Gantt Timeline\",\n        depends: [ \"dom\", \"touch\", \"draganddrop\" ],\n        hidden: true\n    };\n\n    (function($) {\n\n        var Widget = kendo.ui.Widget;\n        var kendoDomElement = kendo.dom.element;\n        var kendoTextElement = kendo.dom.text;\n        var kendoHtmlElement = kendo.dom.html;\n        var isPlainObject = $.isPlainObject;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var extend = $.extend;\n        var isRtl = false;\n        var keys = kendo.keys;\n        var Query = kendo.data.Query;\n        var STRING = \"string\";\n        var NS = \".kendoGanttTimeline\";\n        var CLICK = \"click\";\n        var DBLCLICK = \"dblclick\";\n        var MOUSEMOVE = \"mousemove\";\n        var MOUSEENTER = \"mouseenter\";\n        var MOUSELEAVE = \"mouseleave\";\n        var KEYDOWN = \"keydown\";\n        var DOT = \".\";\n        var TIME_HEADER_TEMPLATE = kendo.template(\"#=kendo.toString(start, 't')#\");\n        var DAY_HEADER_TEMPLATE = kendo.template(\"#=kendo.toString(start, 'ddd M/dd')#\");\n        var WEEK_HEADER_TEMPLATE = kendo.template(\"#=kendo.toString(start, 'ddd M/dd')# - #=kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')#\");\n        var MONTH_HEADER_TEMPLATE = kendo.template(\"#=kendo.toString(start, 'MMM')#\");\n        var YEAR_HEADER_TEMPLATE = kendo.template(\"#=kendo.toString(start, 'yyyy')#\");\n        var RESIZE_HINT = kendo.template('<div class=\"#=styles.marquee#\">' +\n                               '<div class=\"#=styles.marqueeColor#\"></div>' +\n                           '</div>');\n        var RESIZE_TOOLTIP_TEMPLATE = kendo.template('<div style=\"z-index: 100002;\" class=\"#=styles.tooltipWrapper# k-gantt-resize-hint\">' +\n                                       '<div class=\"#=styles.tooltipContent#\">' +\n                                            '<div>#=messages.start#: #=kendo.toString(start, format)#</div>' +\n                                            '<div>#=messages.end#: #=kendo.toString(end, format)#</div>' +\n                                       '</div>' +\n                                  '</div>');\n        var PERCENT_RESIZE_TOOLTIP_TEMPLATE = kendo.template('<div style=\"z-index: 100002;\" class=\"#=styles.tooltipWrapper#\" >' +\n                                       '<div class=\"#=styles.tooltipContent#\">#=text#%</div>' +\n                                       '<div class=\"#=styles.tooltipCallout#\" style=\"left:13px;\"></div>' +\n                                  '</div>');\n        var TASK_TOOLTIP_TEMPLATE = kendo.template('<div class=\"#=kendo.htmlEncode(styles.taskDetails)#\">' +\n                                        '<strong>#=kendo.htmlEncode(task.title)#</strong>' +\n                                        '<div class=\"#=styles.taskDetailsPercent#\">#=kendo.toString(task.percentComplete, \"p0\")#</div>' +\n                                        '<ul class=\"#=styles.reset#\">' +\n                                            '<li>#=messages.start#: #=kendo.toString(task.start, \"h:mm tt ddd, MMM d\")#</li>' +\n                                            '<li>#=messages.end#: #=kendo.toString(task.end, \"h:mm tt ddd, MMM d\")#</li>' +\n                                        '</ul>' +\n                                    '</div>');\n        var OFFSET_TOOLTIP_TEMPLATE = kendo.template('<span>#=offsetPrefix#: #=offsetText#</span>');\n        var PLANNED_TOOLTIP_TEMPLATE = kendo.template('<div class=\"k-task-content\">' +\n                '<div>#=plannedStart#: #=startDate#</div>' +\n                '<div>#=plannedEnd#: #=endDate#</div>' +\n            '</div>');\n        var SIZE_CALCULATION_TEMPLATE = \"<table style='visibility: hidden;'>\" +\n            \"<tbody>\" +\n                \"<tr style='height:{0}'>\" +\n                    \"<td>&nbsp;</td>\" +\n                \"</tr>\" +\n            \"</tbody>\" +\n        \"</table>\";\n\n        var defaultViews = {\n            day: {\n                type: \"kendo.ui.GanttDayView\"\n            },\n            week: {\n                type: \"kendo.ui.GanttWeekView\"\n            },\n            month: {\n                type: \"kendo.ui.GanttMonthView\"\n            },\n            year: {\n                type: \"kendo.ui.GanttYearView\"\n            }\n        };\n\n        function trimOptions(options) {\n            delete options.name;\n            delete options.prefix;\n            delete options.views;\n\n            return options;\n        }\n\n        function getWorkDays(options) {\n            var workDays = [];\n            var dayIndex = options.workWeekStart;\n\n            workDays.push(dayIndex);\n\n            while (options.workWeekEnd != dayIndex) {\n                if (dayIndex > 6) {\n                    dayIndex -= 7;\n                } else {\n                    dayIndex++;\n                }\n                workDays.push(dayIndex);\n            }\n            return workDays;\n        }\n\n        function blurActiveElement() {\n            var activeElement = kendo._activeElement();\n\n            if (activeElement && activeElement.nodeName.toLowerCase() !== \"body\") {\n                $(activeElement).trigger(\"blur\");\n            }\n        }\n\n        var viewStyles = {\n            alt: \"k-alt\",\n            reset: \"k-reset\",\n            nonWorking: \"k-nonwork-hour\",\n            header: \"k-header\",\n            gridHeader: \"k-grid-header\",\n            gridHeaderWrap: \"k-grid-header-wrap\",\n            gridContent: \"k-grid-content\",\n            tasksWrapper: \"k-gantt-tables\",\n            rowsTable: \"k-gantt-rows\",\n            columnsTable: \"k-gantt-columns\",\n            tasksTable: \"k-gantt-tasks\",\n            dependenciesWrapper: \"k-gantt-dependencies\",\n            resource: \"k-resource\",\n            resourceAlt: \"k-resource k-alt\",\n            task: \"k-task\",\n            taskSingle: \"k-task-single\",\n            taskMilestone: \"k-task-milestone\",\n            taskSummary: \"k-task-summary\",\n            taskWrap: \"k-task-wrap\",\n            taskMilestoneWrap: \"k-milestone-wrap\",\n            taskSummaryWrap: \"k-summary-wrap\",\n            taskPlanned: \"k-task-planned\",\n            taskPlannedMoment: \"k-task-moment\",\n            taskPlannedDuration: \"k-task-duration\",\n            taskPlannedMomentLeft: \"k-moment-left\",\n            taskAdvanced: \"k-task-advanced\",\n            taskDelayed: \"k-task-delayed\",\n            taskOffset: \"k-task-offset\",\n            taskOffsetWrap: \"k-task-offset-wrap\",\n            taskInnerWrap: \"k-task-inner-wrap\",\n            resourcesWrap: \"k-resources-wrap\",\n            taskDot: \"k-task-dot\",\n            taskDotStart: \"k-task-start\",\n            taskDotEnd: \"k-task-end\",\n            taskDragHandle: \"k-task-draghandle\",\n            taskContent: \"k-task-content\",\n            taskTemplate: \"k-task-template\",\n            taskActions: \"k-task-actions\",\n            taskDelete: \"k-task-delete\",\n            taskComplete: \"k-task-complete\",\n            taskDetails: \"k-task-details\",\n            taskDetailsPercent: \"k-task-pct\",\n            link: \"k-link\",\n            icon: \"k-icon\",\n            iconDelete: \"k-i-close\",\n            taskResizeHandle: \"k-resize-handle\",\n            taskResizeHandleWest: \"k-resize-w\",\n            taskResizeHandleEast: \"k-resize-e\",\n            taskSummaryProgress: \"k-task-summary-progress\",\n            taskSummaryComplete: \"k-task-summary-complete\",\n            line: \"k-gantt-line\",\n            lineHorizontal: \"k-gantt-line-h\",\n            lineVertical: \"k-gantt-line-v\",\n            arrowWest: \"k-arrow-w\",\n            arrowEast: \"k-arrow-e\",\n            dragHint: \"k-drag-hint\",\n            dependencyHint: \"k-gantt-dependency-hint\",\n            tooltipWrapper: \"k-tooltip\",\n            tooltipContent: \"k-tooltip-content\",\n            tooltipCallout: \"k-callout k-callout-s\",\n            callout: \"k-callout\",\n            marquee: \"k-marquee k-gantt-marquee\",\n            marqueeColor: \"k-marquee-color\",\n            offsetTooltipAdvanced: \"k-offset-tooltip-advanced\",\n            offsetTooltipDelay: \"k-offset-tooltip-delayed\",\n            plannedTooltip: \"k-planned-tooltip\"\n        };\n\n        var GanttView = kendo.ui.GanttView = Widget.extend({\n            init: function(element, options) {\n                Widget.fn.init.call(this, element, options);\n\n                this.title = this.options.title || this.options.name;\n\n                this.header = this.element.find(DOT + GanttView.styles.gridHeader);\n\n                this.content = this.element.find(DOT + GanttView.styles.gridContent);\n\n                this.contentWidth = this.content.width();\n\n                this._workDays = getWorkDays(this.options);\n\n                this._headerTree = options.headerTree;\n\n                this._taskTree = options.taskTree;\n\n                this._taskTemplate = options.taskTemplate ?\n                    kendo.template(options.taskTemplate, extend({}, kendo.Template, options.templateSettings)) :\n                    null;\n\n                this._dependencyTree = options.dependencyTree;\n\n                this._taskCoordinates = {};\n\n                this._currentTime();\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                clearTimeout(this._tooltipTimeout);\n\n                this.headerRow = null;\n                this.header = null;\n                this.content = null;\n\n                this._dragHint = null;\n                this._resizeHint = null;\n                this._resizeTooltip = null;\n                this._taskTooltip = null;\n                this._percentCompleteResizeTooltip = null;\n\n                this._headerTree = null;\n                this._taskTree = null;\n                this._dependencyTree = null;\n            },\n\n            options: {\n                showWorkHours: false,\n                showWorkDays: false,\n                workDayStart: new Date(1980, 1, 1, 8, 0, 0),\n                workDayEnd: new Date(1980, 1, 1, 17, 0, 0),\n                workWeekStart: 1,\n                workWeekEnd: 5,\n                hourSpan: 1,\n                slotSize: 100,\n                currentTimeMarker: {\n                    updateInterval: 10000\n                }\n            },\n\n            renderLayout: function() {\n                this._slots = this._createSlots();\n\n                this._tableWidth = this._calculateTableWidth();\n\n                this.createLayout(this._layout());\n\n                this._slotDimensions();\n\n                this._adjustHeight();\n\n                this.content.find(DOT + GanttView.styles.dependenciesWrapper).width(this._tableWidth);\n            },\n\n            _adjustHeight: function() {\n                if (this.content) {\n                    this.content.height(this.element.height() - outerHeight(this.header));\n                }\n            },\n\n            createLayout: function(rows) {\n                var headers = this._headers(rows);\n                var colgroup = this._colgroup();\n                var tree = this._headerTree;\n                var header = kendoDomElement(\"tbody\", null, headers);\n                var table = kendoDomElement(\"table\", { style: { width: this._tableWidth + \"px\" }, role: \"presentation\" }, [colgroup, header]);\n\n                tree.render([table]);\n\n                this.headerRow = this.header.find(\"table\").first().find(\"tr\").last();\n            },\n\n            _slotDimensions: function() {\n                var headers = this.headerRow[0].children;\n                var slots = this._timeSlots();\n                var slot;\n                var header;\n\n                for (var i = 0, length = headers.length; i < length; i++) {\n                    header = headers[i];\n                    slot = slots[i];\n\n                    slot.offsetLeft = header.offsetLeft;\n                    slot.offsetWidth = header.offsetWidth;\n                }\n            },\n\n            render: function(tasks) {\n                var taskCount = tasks.length;\n                var styles = GanttView.styles;\n                var contentTable;\n                var rowsTable = this._rowsTable(taskCount);\n                var columnsTable = this._columnsTable(taskCount);\n                var tasksTable = this._tasksTable(tasks);\n                var currentTimeMarker = this.options.currentTimeMarker;\n                var calculatedSize = this.options.calculatedSize;\n                var totalHeight;\n\n                this._taskTree.render([rowsTable, columnsTable, tasksTable]);\n\n                contentTable = this.content.find(DOT + styles.rowsTable);\n\n                if (calculatedSize) {\n                    totalHeight = calculatedSize.row * tasks.length;\n                    this.content.find(DOT + styles.tasksTable).height(totalHeight);\n                    contentTable.height(totalHeight);\n                }\n\n                this._contentHeight = contentTable.height();\n                this._rowHeight = calculatedSize ? calculatedSize.row : this._contentHeight / contentTable.find(\"tr\").length;\n\n                this.content.find(DOT + styles.columnsTable).height(this._contentHeight);\n\n                if (currentTimeMarker !== false && currentTimeMarker.updateInterval !== undefined) {\n                    this._renderCurrentTime();\n                }\n            },\n\n            _rowsTable: function(rowCount) {\n                var rows = [];\n                var row;\n                var styles = GanttView.styles;\n                var attributes = [null, { className: styles.alt }];\n\n                for (var i = 0; i < rowCount; i++) {\n                    row = kendoDomElement(\"tr\", attributes[i % 2], [\n                        kendoDomElement(\"td\", null, [\n                            kendoTextElement(\"\\u00a0\")\n                        ])\n                    ]);\n\n                    rows.push(row);\n                }\n\n                return this._createTable(1, rows, { className: styles.rowsTable });\n            },\n\n            _columnsTable: function() {\n                var cells = [];\n                var row;\n                var styles = GanttView.styles;\n                var slots = this._timeSlots();\n                var slotsCount = slots.length;\n                var slot;\n                var slotSpan;\n                var totalSpan = 0;\n                var attributes;\n\n                for (var i = 0; i < slotsCount; i++) {\n                    slot = slots[i];\n\n                    attributes = {};\n\n                    slotSpan = slot.span;\n\n                    totalSpan += slotSpan;\n\n                    if (slotSpan !== 1) {\n                        attributes.colspan = slotSpan;\n                    }\n\n                    if (slot.isNonWorking) {\n                        attributes.className = styles.nonWorking;\n                    }\n\n                    cells.push(kendoDomElement(\"td\", attributes, [\n                        kendoTextElement(\"\\u00a0\")\n                    ]));\n                }\n\n                row = kendoDomElement(\"tr\", null, cells);\n\n                return this._createTable(totalSpan, [row], { className: styles.columnsTable });\n            },\n\n            _tasksTable: function(tasks) {\n                var rows = [];\n                var row;\n                var cell;\n                var position;\n                var plannedPosition;\n                var task;\n                var styles = GanttView.styles;\n                var coordinates = this._taskCoordinates = {};\n                var size = this._calculateMilestoneWidth();\n                var milestoneWidth = Math.round(size.width);\n                var resourcesField = this.options.resourcesField;\n                var className = [styles.resource, styles.resourceAlt];\n                var calculatedSize = this.options.calculatedSize;\n                var resourcesPosition;\n                var resourcesMargin = this._calculateResourcesMargin();\n                var taskBorderWidth = this._calculateTaskBorderWidth();\n                var resourceStyle;\n                var showPlannedTasks = this.options.showPlannedTasks;\n\n                var addCoordinates = function(rowIndex) {\n                    var taskLeft;\n                    var taskRight;\n\n                    taskLeft = position.left;\n                    taskRight = taskLeft + position.width;\n\n                    if (task.isMilestone()) {\n                        taskLeft -= milestoneWidth / 2;\n                        taskRight = taskLeft + milestoneWidth;\n                    }\n\n                    coordinates[task.id] = {\n                        start: taskLeft,\n                        end: taskRight,\n                        rowIndex: rowIndex\n                    };\n                };\n\n                for (var i = 0, l = tasks.length; i < l; i++) {\n                    task = tasks[i];\n\n                    position = this._taskPosition(task);\n\n                    if (showPlannedTasks) {\n                        plannedPosition = this._taskPositionPlanned(task);\n                        plannedPosition.borderWidth = taskBorderWidth;\n                    }\n                    position.borderWidth = taskBorderWidth;\n\n                    row = kendoDomElement(\"tr\", null);\n                    cell = kendoDomElement(\"td\");\n\n                    if (task.start <= this.end && task.end >= this.start) {\n                        cell.children.push(this._renderTask(tasks[i], position, plannedPosition));\n\n                        if (task[resourcesField] && task[resourcesField].length) {\n                            if (isRtl) {\n                                resourcesPosition = this._tableWidth - position.left;\n                            } else {\n                                resourcesPosition = Math.max((position.width || size.clientWidth), 0) + position.left;\n                            }\n\n                            resourceStyle = {\n                                width: (this._tableWidth - (resourcesPosition + resourcesMargin)) + \"px\"\n                            };\n\n                            resourceStyle[isRtl ? \"right\" : \"left\"] = resourcesPosition + \"px\";\n\n                            if (calculatedSize) {\n                                resourceStyle.height = calculatedSize.cell + \"px\";\n                            }\n\n                            cell.children.push(kendoDomElement(\"div\",\n                                {\n                                    className: styles.resourcesWrap,\n                                    style: resourceStyle\n                                },\n                                this._renderResources(task[resourcesField], className[i % 2]))\n                            );\n                        }\n\n                        addCoordinates(i);\n                    }\n                    row.children.push(cell);\n                    rows.push(row);\n                }\n\n                return this._createTable(1, rows, { className: GanttView.styles.tasksTable });\n            },\n\n            _createTable: function(colspan, rows, styles) {\n                var cols = [];\n                var colgroup;\n                var tbody;\n\n                for (var i = 0; i < colspan; i++) {\n                    cols.push(kendoDomElement(\"col\"));\n                }\n\n                colgroup = kendoDomElement(\"colgroup\", null, cols);\n\n                tbody = kendoDomElement(\"tbody\", null, rows);\n\n                if (!styles.style) {\n                    styles.style = {};\n                }\n\n                styles.style.width = this._tableWidth + \"px\";\n                styles.role = \"presentation\";\n\n                return kendoDomElement(\"table\", styles, [colgroup, tbody]);\n            },\n\n            _calculateTableWidth: function() {\n                var slots = this._timeSlots();\n                var maxSpan = 0;\n                var totalSpan = 0;\n                var currentSpan;\n                var tableWidth;\n\n                for (var i = 0, length = slots.length; i < length; i++) {\n                    currentSpan = slots[i].span;\n\n                    totalSpan += currentSpan;\n\n                    if (currentSpan > maxSpan) {\n                        maxSpan = currentSpan;\n                    }\n                }\n\n                tableWidth = Math.round((totalSpan * this.options.slotSize) / maxSpan);\n\n                return tableWidth;\n            },\n\n            _calculateMilestoneWidth: function() {\n                var size;\n                var className = GanttView.styles.task + \" \" + GanttView.styles.taskMilestone;\n                var milestone = $(\"<div class='\" + className + \"' style='visibility: hidden; position: absolute'>\");\n                var boundingClientRect;\n\n                this.content.append(milestone);\n\n                boundingClientRect = milestone[0].getBoundingClientRect();\n\n                size = {\n                    \"width\": boundingClientRect.right - boundingClientRect.left,\n                    \"clientWidth\": milestone[0].clientWidth\n                };\n\n                milestone.remove();\n\n                return size;\n            },\n\n            _calculateResourcesMargin: function() {\n                var margin;\n                var wrapper = $(\"<div class='\" + GanttView.styles.resourcesWrap + \"' style='visibility: hidden; position: absolute'>\");\n\n                this.content.append(wrapper);\n\n                margin = parseInt(wrapper.css(isRtl ? \"margin-right\" : \"margin-left\"), 10);\n\n                wrapper.remove();\n\n                return margin;\n            },\n\n            _calculateTaskBorderWidth: function() {\n                var width;\n                var className = GanttView.styles.task + \" \" + GanttView.styles.taskSingle;\n                var task = $(\"<div class='\" + className + \"' style='visibility: hidden; position: absolute'>\");\n                var computedStyle;\n\n                this.content.append(task);\n\n                computedStyle = kendo.getComputedStyles(task[0], [\"border-left-width\"]);\n\n                width = parseFloat(computedStyle[\"border-left-width\"], 10);\n\n                task.remove();\n\n                return width;\n            },\n\n            _renderTask: function(task, position, plannedPosition) {\n                var editable = this.options.editable;\n                var taskLeft = position.left;\n                var styles = GanttView.styles;\n                var wrapClassName = styles.taskWrap;\n                var calculatedSize = this.options.calculatedSize;\n                var dragHandleStyle = {};\n                var taskWrapAttr = {\n                    className: wrapClassName,\n                    style: { left: taskLeft + \"px\" }\n                };\n                var children = [];\n                var endTaskDotRight = 0;\n                var taskFullWidth = position.width;\n                var taskWrapper, taskElement, progressHandleOffset, plannedElement;\n                var endTaskDotLeft, taskOffsetWrap, offsetElement, offsetWidth;\n\n                if (calculatedSize) {\n                    taskWrapAttr.style.height = calculatedSize.cell + \"px\";\n                }\n\n                if (plannedPosition) {\n                    if (task.isMilestone()) {\n                        plannedElement = this._renderPlannedMilestone(position, plannedPosition);\n                    } else {\n                        plannedElement = this._renderPlannedSingleTask(position, plannedPosition, task);\n                    }\n\n                    children.push(plannedElement);\n\n                    if (isRtl && plannedPosition.left <= position.left) {\n                        taskWrapAttr.style.left = plannedPosition.left + \"px\";\n                    }\n                }\n\n                if (task.summary) {\n                    taskElement = this._renderSummary(task, position, plannedPosition);\n                    taskWrapAttr.className += \" \" + styles.taskSummaryWrap;\n                } else if (task.isMilestone()) {\n                    taskElement = this._renderMilestone(task, position);\n                    taskWrapAttr.className += \" \" + styles.taskMilestoneWrap;\n                } else {\n                    taskElement = this._renderSingleTask(task, position, plannedPosition);\n                }\n\n                if (plannedPosition && !task.isMilestone() && task.plannedStart < task.end && task.plannedEnd > task.start && task.plannedEnd < task.end) {\n                    if (isRtl) {\n                        taskFullWidth = position.left + position.width - plannedPosition.left;\n                    } else {\n                        taskFullWidth = plannedPosition.left + plannedPosition.width - position.left;\n                    }\n\n                    if (isRtl) {\n                        offsetWidth = plannedPosition.left - position.left;\n                    } else {\n                        offsetWidth = position.left + position.width - (plannedPosition.left + plannedPosition.width);\n                    }\n\n                    offsetElement = kendoDomElement(\"div\", {\n                        className: styles.taskOffset,\n                        style: { width: offsetWidth - 2 * plannedPosition.borderWidth + \"px\" }\n                    });\n\n                    if (editable && editable.resize !== false && editable.update !== false && !task.summary) {\n                        if (editable.destroy !== false) {\n                            offsetElement.children.push(kendoDomElement(\"span\", { className: styles.taskActions }, [\n                                kendoDomElement(\"a\", { className: styles.link + \" \" + styles.taskDelete, href: \"#\", \"aria-label\": \"Delete\" }, [\n                                    kendoDomElement(\"span\", { className: styles.icon + \" \" + styles.iconDelete })\n                                ])\n                            ]));\n                        }\n\n                        if (isRtl) {\n                            offsetElement.children.push(kendoDomElement(\"span\", {\n                                className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleWest,\n                                style: {\n                                    right: position.width - 5 + \"px\"\n                                }\n                            }));\n                        } else {\n                            offsetElement.children.push(kendoDomElement(\"span\", {\n                                className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleEast\n                            }));\n                        }\n                    }\n\n                    taskOffsetWrap = kendoDomElement(\"div\", {\n                        className: styles.taskOffsetWrap + \" \" + styles.taskInnerWrap\n                    }, [ taskElement, offsetElement ]);\n\n                    children.push(taskOffsetWrap);\n                } else if (plannedPosition) {\n                    children.push(kendoDomElement(\"div\", {\n                        className: styles.taskInnerWrap\n                    }, [ taskElement ]));\n                } else {\n                    children.push(taskElement);\n                }\n\n                taskWrapper = kendoDomElement(\"div\", taskWrapAttr, children);\n\n                if (editable && editable.dependencyCreate !== false) {\n                    if (plannedPosition && task.plannedEnd > task.end) {\n                        endTaskDotRight = plannedPosition.left + plannedPosition.width - position.left - position.width - 3 + \"px\";\n                    }\n\n                    taskWrapper.children.push(kendoDomElement(\"div\", {\n                        className: styles.taskDot + \" \" + styles.taskDotStart\n                    }));\n\n                    if (isRtl) {\n                        endTaskDotRight = \"auto\";\n                        if (plannedPosition && task.plannedEnd > task.end) {\n                            endTaskDotLeft = position.left - plannedPosition.left + \"px\";\n                        }\n                    }\n\n                    taskWrapper.children.push(kendoDomElement(\"div\", {\n                        className: styles.taskDot + \" \" + styles.taskDotEnd,\n                        style: { right: endTaskDotRight, left: endTaskDotLeft }\n                    }));\n                }\n\n                if (!task.summary && !task.isMilestone() && editable && editable.dragPercentComplete !== false && editable.update !== false && this._taskTemplate === null) {\n                    progressHandleOffset = Math.round(taskFullWidth * task.percentComplete);\n\n                    dragHandleStyle[isRtl ? \"right\" : \"left\"] = progressHandleOffset + \"px\";\n                    taskWrapper.children.push(kendoDomElement(\"div\", { className: styles.taskDragHandle, style: dragHandleStyle }));\n                }\n\n                return taskWrapper;\n            },\n\n            _renderSingleTask: function(task, position, plannedPosition) {\n                var styles = GanttView.styles;\n                var progressWidth;\n                var taskChildren = [];\n                var taskContent;\n                var editable = this.options.editable;\n                var classes = styles.task + \" \" + styles.taskSingle;\n                var widthExceptDelay = position.width;\n\n                if (plannedPosition) {\n                    if (task.plannedEnd && task.plannedEnd <= task.start) {\n                        classes += \" \" + styles.taskDelayed;\n                    } else if (task.plannedEnd && task.plannedEnd > task.end) {\n                        classes += \" \" + styles.taskAdvanced;\n                    } else if (task.plannedEnd && task.plannedEnd < task.end) {\n                        if (!isRtl) {\n                            widthExceptDelay = widthExceptDelay - (position.left + position.width - plannedPosition.left - plannedPosition.width);\n                        } else {\n                            widthExceptDelay = widthExceptDelay + position.left - plannedPosition.left;\n                        }\n                    }\n                }\n\n                progressWidth = Math.round(widthExceptDelay * task.percentComplete);\n\n                if (this._taskTemplate !== null) {\n                    taskContent = kendoHtmlElement(this._taskTemplate(task));\n                } else {\n                    taskContent = kendoTextElement(task.title);\n                    taskChildren.push(kendoDomElement(\"div\", { className: styles.taskComplete, style: { width: progressWidth + \"px\" } }));\n                }\n\n                var content = kendoDomElement(\"div\", { className: styles.taskContent }, [\n                    kendoDomElement(\"div\", { className: styles.taskTemplate }, [\n                        taskContent\n                    ])\n                ]);\n\n                taskChildren.push(content);\n\n                if (editable) {\n                    if (editable.destroy !== false && (!plannedPosition || !task.plannedEnd || (task.end <= task.plannedEnd || task.start >= task.plannedEnd))) {\n                        content.children.push(kendoDomElement(\"span\", { className: styles.taskActions }, [\n                            kendoDomElement(\"a\", { className: styles.link + \" \" + styles.taskDelete, href: \"#\", \"aria-label\": \"Delete\" }, [\n                                kendoDomElement(\"span\", { className: styles.icon + \" \" + styles.iconDelete })\n                            ])\n                        ]));\n                    }\n\n                    if (editable.resize !== false && editable.update !== false) {\n                        content.children.push(kendoDomElement(\"span\", {\n                            className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleWest\n                        }));\n                        content.children.push(kendoDomElement(\"span\", {\n                            className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleEast\n                        }));\n                    }\n                }\n\n                var element = kendoDomElement(\"div\", {\n                    className: classes, \"data-uid\": task.uid, style:\n                        { width: Math.max((widthExceptDelay - position.borderWidth * 2), 0) + \"px\" }\n                }, taskChildren);\n\n                return element;\n            },\n\n            _renderMilestone: function(task) {\n                var styles = GanttView.styles;\n                var classes = styles.task + \" \" + styles.taskMilestone;\n                var showPlanned = this.options.showPlannedTasks;\n\n                if (showPlanned && task.plannedEnd && task.plannedEnd < task.start) {\n                    classes += \" \" + styles.taskDelayed;\n                } else if (task.plannedStart && task.plannedStart > task.end) {\n                    classes += \" \" + styles.taskAdvanced;\n                }\n\n                return kendoDomElement(\"div\", { className: classes, \"data-uid\": task.uid });\n            },\n\n            _renderSummary: function(task, position, plannedPosition) {\n                var styles = GanttView.styles;\n                var widthExceptDelay = position.width;\n                var progressWidth;\n                var classes = styles.task + \" \" + styles.taskSummary;\n\n                if (plannedPosition) {\n                    if (task.plannedEnd && task.plannedEnd <= task.start) {\n                        classes += \" \" + styles.taskDelayed;\n                    } else if (task.plannedEnd && task.plannedEnd > task.end) {\n                        classes += \" \" + styles.taskAdvanced;\n                    } else if (task.plannedEnd && task.plannedEnd < task.end) {\n                        if (!isRtl) {\n                            widthExceptDelay = widthExceptDelay - (position.left + position.width - plannedPosition.left - plannedPosition.width);\n                        } else {\n                            widthExceptDelay = widthExceptDelay + position.left - plannedPosition.left;\n                        }\n                    }\n                }\n\n                progressWidth = Math.round(widthExceptDelay * task.percentComplete);\n\n                var element = kendoDomElement(\"div\", { className: classes, \"data-uid\": task.uid, style: { width: widthExceptDelay + \"px\" } }, [\n                    kendoDomElement(\"div\", { className: styles.taskSummaryProgress, style: { width: progressWidth + \"px\" } }, [\n                        kendoDomElement(\"div\", { className: styles.taskSummaryComplete, style: { width: position.width + \"px\" } })\n                    ])\n                ]);\n\n                return element;\n            },\n\n            _renderPlannedSingleTask: function(position, plannedPosition, task) {\n                var styles = GanttView.styles;\n                var children = [];\n                var style = {};\n\n                if (task.plannedStart && task.plannedEnd) {\n                    children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment + \" \" + styles.taskPlannedMomentLeft }));\n                    children.push(kendoDomElement(\"div\", {\n                        className: styles.taskPlannedDuration, style:\n                            { width: Math.max((plannedPosition.width - plannedPosition.borderWidth * 2 - 16), 0) + \"px\" }\n                    }));\n                    children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment }));\n                } else if (task.plannedStart) {\n                    children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment + \" \" + styles.taskPlannedMomentLeft }));\n                } else if (task.plannedEnd) {\n                    children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment, style: { \"margin-left\": Math.max(plannedPosition.width - 5, 0) + \"px\" } }));\n                }\n\n                if (isRtl) {\n                    style = {\n                        \"margin-right\": position.left - plannedPosition.left + position.width - plannedPosition.width + \"px\"\n                    };\n                } else {\n                    style = {\n                        \"margin-left\": plannedPosition.left - position.left + \"px\"\n                    };\n                }\n\n                var element = kendoDomElement(\"div\", {\n                    className: styles.taskPlanned,\n                    style: style\n                }, children);\n\n                return element;\n            },\n\n            _renderPlannedMilestone: function(position, plannedPosition) {\n                var styles = GanttView.styles;\n                var style = {};\n                var element;\n\n                if (isRtl) {\n                    style = {\n                        \"margin-right\": position.left - plannedPosition.left + \"px\"\n                    };\n                } else {\n                    style = {\n                        \"margin-left\": plannedPosition.left - position.left + \"px\"\n                    };\n                }\n\n                element = kendoDomElement(\"div\", {\n                    className: styles.taskPlanned,\n                    style: style\n                }, [\n                    kendoDomElement(\"div\", { className: styles.taskPlannedMoment })\n                ]);\n\n                return element;\n            },\n\n            _renderResources: function(resources, className) {\n                var children = [];\n                var resource;\n\n                for (var i = 0, length = resources.length; i < length; i++) {\n                    resource = resources[i];\n                    children.push(kendoDomElement(\"span\", {\n                        className: className,\n                        style: {\n                            \"color\": resource.get(\"color\")\n                        }\n                    }, [kendoTextElement(resource.get(\"name\"))]));\n                }\n\n                if (isRtl) {\n                    children.reverse();\n                }\n\n                return children;\n            },\n\n            _taskPosition: function(task) {\n                var round = Math.round;\n\n                var startLeft = round(this._offset(isRtl ? task.end : task.start));\n                var endLeft = round(this._offset(isRtl ? task.start : task.end));\n\n                return { left: startLeft, width: endLeft - startLeft };\n            },\n\n            _taskPositionPlanned: function(task) {\n                var round = Math.round;\n\n                var startLeft = round(this._offset(isRtl ? task.plannedEnd : task.plannedStart));\n                var endLeft = round(this._offset(isRtl ? task.plannedStart : task.plannedEnd));\n\n                return { left: startLeft, width: endLeft - startLeft };\n            },\n\n            _offset: function(date) {\n                var slots = this._timeSlots();\n                var slot;\n                var startOffset;\n                var slotDuration;\n                var slotOffset = 0;\n                var startIndex;\n\n                if (!slots.length) {\n                    return 0;\n                }\n\n                startIndex = this._slotIndex(\"start\", date);\n\n                slot = slots[startIndex];\n\n                if (slot.end < date) {\n                    slotOffset = slot.offsetWidth;\n                } else if (slot.start <= date) {\n                    startOffset = date - slot.start;\n                    slotDuration = slot.end - slot.start;\n                    slotOffset = (startOffset / slotDuration) * slot.offsetWidth;\n                }\n\n                if (isRtl) {\n                    slotOffset = (slot.offsetWidth + 1) - slotOffset; // Add one pixel for border\n                }\n\n                return slot.offsetLeft + slotOffset;\n            },\n\n            _slotIndex: function(field, value, reverse) {\n                var slots = this._timeSlots();\n                var startIdx = 0;\n                var endIdx = slots.length - 1;\n                var middle;\n\n                if (reverse) {\n                    slots = [].slice.call(slots).reverse();\n                }\n\n                do {\n                    middle = Math.ceil((endIdx + startIdx) / 2);\n\n                    if (slots[middle][field] < value) {\n                        startIdx = middle;\n                    } else {\n                        if (middle === endIdx) {\n                            middle--;\n                        }\n\n                        endIdx = middle;\n                    }\n                } while (startIdx !== endIdx);\n\n                if (reverse) {\n                    startIdx = (slots.length - 1) - startIdx;\n                }\n\n                return startIdx;\n            },\n\n            _timeByPosition: function(x, snap, snapToEnd) {\n                var slot = this._slotByPosition(x);\n\n                if (snap) {\n                    return snapToEnd ? slot.end : slot.start;\n                }\n\n                var offsetLeft = x - this.element.find(DOT + GanttView.styles.tasksTable).offset().left;\n                var duration = slot.end - slot.start;\n                var slotOffset = offsetLeft - slot.offsetLeft;\n\n                if (isRtl) {\n                    slotOffset = slot.offsetWidth - slotOffset;\n                }\n\n                return new Date(slot.start.getTime() + (duration * (slotOffset / slot.offsetWidth)));\n            },\n\n            _slotByPosition: function(x) {\n                var offsetLeft = x - this.element.find(DOT + GanttView.styles.tasksTable).offset().left;\n                var slotIndex = this._slotIndex(\"offsetLeft\", offsetLeft, isRtl);\n\n                return this._timeSlots()[slotIndex];\n            },\n\n            _renderDependencies: function(dependencies) {\n                var elements = [];\n                var tree = this._dependencyTree;\n\n                for (var i = 0, l = dependencies.length; i < l; i++) {\n                    elements.push.apply(elements, this._renderDependency(dependencies[i]));\n                }\n\n                tree.render(elements);\n            },\n\n            _renderDependency: function(dependency) {\n                var predecessor = this._taskCoordinates[dependency.predecessorId];\n                var successor = this._taskCoordinates[dependency.successorId];\n                var elements;\n                var method;\n\n                if (!predecessor || !successor) {\n                    return [];\n                }\n\n                method = \"_render\" + [\"FF\", \"FS\", \"SF\", \"SS\"][isRtl ? 3 - dependency.type : dependency.type];\n\n                elements = this[method](predecessor, successor);\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    elements[i].attr[\"data-uid\"] = dependency.uid;\n                }\n\n                return elements;\n            },\n\n            _renderFF: function(from, to) {\n                var lines = this._dependencyFF(from, to, false);\n\n                lines[lines.length - 1].children[0] = this._arrow(true);\n\n                return lines;\n            },\n\n            _renderSS: function(from, to) {\n                var lines = this._dependencyFF(to, from, true);\n\n                lines[0].children[0] = this._arrow(false);\n\n                return lines.reverse();\n            },\n\n            _renderFS: function(from, to) {\n                var lines = this._dependencyFS(from, to, false);\n\n                lines[lines.length - 1].children[0] = this._arrow(false);\n\n                return lines;\n            },\n\n            _renderSF: function(from, to) {\n                var lines = this._dependencyFS(to, from, true);\n\n                lines[0].children[0] = this._arrow(true);\n\n                return lines.reverse();\n            },\n\n            _dependencyFF: function(from, to, reverse) {\n                var that = this;\n                var lines = [];\n                var left = 0;\n                var top = 0;\n                var width = 0;\n                var height = 0;\n                var dir = reverse ? \"start\" : \"end\";\n                var delta;\n                var overlap = 2;\n                var arrowOverlap = 1;\n                var rowHeight = this._rowHeight;\n                var minLineWidth = 10;\n                var fromTop = from.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n                var toTop = to.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n                var styles = GanttView.styles;\n\n                var addHorizontal = function() {\n                    lines.push(that._line(styles.line + \" \" + styles.lineHorizontal, { left: left + \"px\", top: top + \"px\", width: width + \"px\" }));\n                };\n                var addVertical = function() {\n                    lines.push(that._line(styles.line + \" \" + styles.lineVertical, { left: left + \"px\", top: top + \"px\", height: height + \"px\" }));\n                };\n\n                left = from[dir];\n                top = fromTop;\n                width = minLineWidth;\n\n                delta = to[dir] - from[dir];\n\n                if ((delta) > 0 !== reverse) {\n                    width = Math.abs(delta) + minLineWidth;\n                }\n\n                if (reverse) {\n                    left -= width;\n                    width -= arrowOverlap;\n                    addHorizontal();\n                } else {\n                    addHorizontal();\n                    left += width - overlap;\n                }\n\n                if (toTop < top) {\n                    height = top - toTop;\n                    height += overlap;\n                    top = toTop;\n                    addVertical();\n                } else {\n                    height = toTop - top;\n                    height += overlap;\n                    addVertical();\n                    top += (height - overlap);\n                }\n\n                width = Math.abs(left - to[dir]);\n\n                if (!reverse) {\n                    width -= arrowOverlap;\n                    left -= width;\n                }\n\n                addHorizontal();\n\n                return lines;\n            },\n\n            _dependencyFS: function(from, to, reverse) {\n                var that = this;\n                var lines = [];\n                var left = 0;\n                var top = 0;\n                var width = 0;\n                var height = 0;\n                var rowHeight = this._rowHeight;\n                var minLineHeight = Math.floor(rowHeight / 2);\n                var minLineWidth = 10;\n                var minDistance = 2 * minLineWidth;\n                var delta = to.start - from.end;\n                var overlap = 2;\n                var arrowOverlap = 1;\n                var fromTop = from.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n                var toTop = to.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n                var styles = GanttView.styles;\n\n                var addHorizontal = function() {\n                    lines.push(that._line(styles.line + \" \" + styles.lineHorizontal, { left: left + \"px\", top: top + \"px\", width: width + \"px\" }));\n                };\n                var addVertical = function() {\n                    lines.push(that._line(styles.line + \" \" + styles.lineVertical, { left: left + \"px\", top: top + \"px\", height: height + \"px\" }));\n                };\n\n                left = from.end;\n                top = fromTop;\n                width = minLineWidth;\n\n                if (reverse) {\n                    left += arrowOverlap;\n\n                    if (delta > minDistance) {\n                        width = delta - (minLineWidth - overlap);\n                    }\n\n                    width -= arrowOverlap;\n                }\n\n                addHorizontal();\n                left += width - overlap;\n\n                if ((delta) <= minDistance) {\n                    height = reverse ? Math.abs(toTop - fromTop) - minLineHeight : minLineHeight;\n\n                    if (toTop < fromTop) {\n                        top -= height;\n\n                        height += overlap;\n\n                        addVertical();\n                    } else {\n                        addVertical();\n                        top += height;\n                    }\n\n                    width = (from.end - to.start) + minDistance;\n\n                    if (width < minLineWidth) {\n                        width = minLineWidth;\n                    }\n\n                    left -= width - overlap;\n\n                    addHorizontal();\n                }\n\n                if (toTop < fromTop) {\n                    height = top - toTop;\n                    top = toTop;\n\n                    height += overlap;\n\n                    addVertical();\n                } else {\n                    height = toTop - top;\n                    addVertical();\n                    top += height;\n                }\n\n                width = to.start - left;\n\n                if (!reverse) {\n                    width -= arrowOverlap;\n                }\n\n                addHorizontal();\n\n                return lines;\n            },\n\n            _line: function(className, styles) {\n                return kendoDomElement(\"div\", { className: className, style: styles });\n            },\n\n            _arrow: function(direction) {\n                return kendoDomElement(\"span\", { className: direction ? GanttView.styles.arrowWest : GanttView.styles.arrowEast });\n            },\n\n            _colgroup: function() {\n                var slots = this._timeSlots();\n                var count = slots.length;\n                var cols = [];\n\n                for (var i = 0; i < count; i++) {\n                    for (var j = 0, length = slots[i].span; j < length; j++) {\n                        cols.push(kendoDomElement(\"col\"));\n                    }\n                }\n\n                return kendoDomElement(\"colgroup\", null, cols);\n            },\n\n            _createDragHint: function(element) {\n                var styles = GanttView.styles;\n                var plannedElement;\n\n                this._dragHint = element\n                    .clone()\n                    .addClass(styles.dragHint)\n                    .css({\n                        \"cursor\": \"move\"\n                    });\n\n                plannedElement = this._dragHint.find(DOT + styles.taskPlanned);\n\n                plannedElement.css({\n                    \"visibility\": \"hidden\"\n                });\n\n                if (isRtl && element.find(DOT + styles.taskAdvanced).length > 0) {\n                    plannedElement.css({\n                        \"margin-right\": \"auto\",\n                        \"width\": 0\n                    });\n\n                    this._dragHint.find(DOT + styles.taskDotEnd).css({\n                        \"left\": 0\n                    });\n                }\n\n                element\n                    .closest(\"td\")\n                    .append(this._dragHint);\n            },\n\n            _updateDragHint: function(start) {\n                var left = this._offset(start);\n                this._dragHint\n                    .css({\n                        \"left\": left\n                    });\n            },\n\n            _removeDragHint: function() {\n                this._dragHint.remove();\n                this._dragHint = null;\n            },\n\n            _createResizeHint: function(task) {\n                var styles = GanttView.styles;\n                var taskTop = this._taskCoordinates[task.id].rowIndex * this._rowHeight;\n                var tooltipHeight;\n                var tooltipTop;\n                var options = this.options;\n                var messages = options.messages;\n\n                this._resizeHint = $(RESIZE_HINT({ styles: styles })).css({\n                    \"top\": 0,\n                    \"height\": this._contentHeight\n                });\n\n                this.content.append(this._resizeHint);\n\n                this._resizeTooltip = $(RESIZE_TOOLTIP_TEMPLATE({\n                    styles: styles,\n                    start: task.start,\n                    end: task.end,\n                    messages: messages.views,\n                    format: options.resizeTooltipFormat\n                }))\n                .css({\n                    \"top\": 0,\n                    \"left\": 0\n                });\n\n                this.content.append(this._resizeTooltip);\n\n                this._resizeTooltipWidth = outerWidth(this._resizeTooltip);\n                tooltipHeight = outerHeight(this._resizeTooltip);\n\n                tooltipTop = taskTop - tooltipHeight;\n\n                if (tooltipTop < 0) {\n                    tooltipTop = taskTop + this._rowHeight;\n                }\n\n                this._resizeTooltipTop = tooltipTop;\n            },\n\n            _updateResizeHint: function(start, end, resizeStart) {\n                var left = this._offset(isRtl ? end : start);\n                var right = this._offset(isRtl ? start : end);\n                var width = right - left;\n                var tooltipLeft = (resizeStart !== isRtl) ? left : right;\n                var tablesWidth = this._tableWidth - kendo.support.scrollbar();\n                var tooltipWidth = this._resizeTooltipWidth;\n                var options = this.options;\n                var messages = options.messages;\n                var tableOffset = this.element.find(DOT + GanttView.styles.tasksTable).offset().left - this.element.find(DOT + GanttView.styles.tasksWrapper).offset().left;\n\n                if (isRtl) {\n                    left += tableOffset;\n                }\n\n                this._resizeHint\n                    .css({\n                        \"left\": left,\n                        \"width\": width\n                    });\n\n                if (this._resizeTooltip) {\n                    this._resizeTooltip.remove();\n                }\n\n                tooltipLeft -= Math.round(tooltipWidth / 2);\n\n                if (tooltipLeft < 0) {\n                    tooltipLeft = 0;\n                } else if (tooltipLeft + tooltipWidth > tablesWidth) {\n                    tooltipLeft = tablesWidth - tooltipWidth;\n                }\n\n                if (isRtl) {\n                    tooltipLeft += tableOffset;\n                }\n\n                this._resizeTooltip = $(RESIZE_TOOLTIP_TEMPLATE({\n                    styles: GanttView.styles,\n                    start: start,\n                    end: end,\n                    messages: messages.views,\n                    format: options.resizeTooltipFormat\n                }))\n                .css({\n                    \"top\": this._resizeTooltipTop,\n                    \"left\": tooltipLeft,\n                    \"min-width\": tooltipWidth\n                })\n                .appendTo(this.content);\n            },\n\n            _removeResizeHint: function() {\n                this._resizeHint.remove();\n                this._resizeHint = null;\n\n                this._resizeTooltip.remove();\n                this._resizeTooltip = null;\n            },\n\n            _updatePercentCompleteTooltip: function(top, left, text) {\n                this._removePercentCompleteTooltip();\n\n                var tooltip = this._percentCompleteResizeTooltip = $(PERCENT_RESIZE_TOOLTIP_TEMPLATE({ styles: GanttView.styles, text: text }))\n                    .appendTo(this.element);\n\n                var tooltipMiddle = Math.round(outerWidth(tooltip) / 2);\n                var arrow = tooltip.find(DOT + GanttView.styles.callout);\n                var arrowHeight = Math.round(outerWidth(arrow) / 2);\n\n                tooltip.css({\n                    \"top\": top - (outerHeight(tooltip) + arrowHeight),\n                    \"left\": left - tooltipMiddle\n                });\n\n                arrow.css(\"left\", tooltipMiddle - arrowHeight);\n            },\n\n            _removePercentCompleteTooltip: function() {\n                if (this._percentCompleteResizeTooltip) {\n                    this._percentCompleteResizeTooltip.remove();\n                }\n\n                this._percentCompleteResizeTooltip = null;\n            },\n\n            _updateDependencyDragHint: function(from, to) {\n                this._removeDependencyDragHint();\n\n                this._creteDependencyDragHint(from, to);\n            },\n\n            _creteDependencyDragHint: function(from, to) {\n                var styles = GanttView.styles;\n\n                var deltaX = to.x - from.x;\n                var deltaY = to.y - from.y;\n\n                var width = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n                var angle = Math.atan(deltaY / deltaX);\n\n                if (deltaX < 0) {\n                    angle += Math.PI;\n                }\n\n                $(\"<div class='\" + styles.line + \" \" + styles.lineHorizontal + \" \" + styles.dependencyHint + \"'></div>\")\n                    .css({\n                        \"top\": from.y,\n                        \"left\": from.x,\n                        \"width\": width,\n                        \"transform-origin\": \"0% 0\",\n                        \"-ms-transform-origin\": \"0% 0\",\n                        \"-webkit-transform-origin\": \"0% 0\",\n                        \"transform\": \"rotate(\" + angle + \"rad)\",\n                        \"-ms-transform\": \"rotate(\" + angle + \"rad)\",\n                        \"-webkit-transform\": \"rotate(\" + angle + \"rad)\"\n                    })\n                    .appendTo(this.content);\n            },\n\n            _removeDependencyDragHint: function() {\n                this.content.find(DOT + GanttView.styles.dependencyHint).remove();\n            },\n\n            _createTaskTooltip: function(task, element, mouseLeft) {\n                var styles = GanttView.styles;\n                var options = this.options;\n                var content = this.content;\n                var contentOffset = content.offset();\n                var contentScrollLeft = kendo.scrollLeft(content);\n                var row = $(element).parents(\"tr\").first();\n                var rowOffset = row.offset();\n                var template = (options.tooltip && options.tooltip.template) ? kendo.template(options.tooltip.template) : TASK_TOOLTIP_TEMPLATE;\n                var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                    : mouseLeft - (contentOffset.left - contentScrollLeft);\n                var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n                var tooltip = this._taskTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + '\" >' +\n                                       '<div class=\"' + styles.taskContent + '\"></div></div>');\n\n                tooltip\n                    .css({\n                        \"left\": left,\n                        \"top\": top\n                    })\n                    .appendTo(content)\n                    .find(DOT + styles.taskContent)\n                    .append(template({\n                        styles: styles,\n                        task: task,\n                        messages: options.messages.views\n                    }));\n\n                this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n            },\n\n            _removeTaskTooltip: function() {\n                if (this._taskTooltip) {\n                    this._taskTooltip.remove();\n                }\n\n                this._taskTooltip = null;\n            },\n\n            _createOffsetTooltip: function(task, element, mouseLeft) {\n                var styles = GanttView.styles;\n                var content = this.content;\n                var contentOffset = content.offset();\n                var contentScrollLeft = kendo.scrollLeft(content);\n                var row = element.parents(\"tr\").first();\n                var rowOffset = row.offset();\n                var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                    : mouseLeft - (contentOffset.left - contentScrollLeft);\n                var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n                var tooltip = this._offsetTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + '\" ></div>');\n                var offsetValue = Math.round((task.end.getTime() - task.plannedEnd.getTime()) / 60000);\n                var plannedTasksMessages = this.options.messages.plannedTasks;\n                var minutes = offsetValue % 60;\n                var offsetText = minutes + \" \" + plannedTasksMessages.minutes;\n                var hours, days;\n\n                if (offsetValue >= 60) {\n                    hours = offsetValue = Math.floor(offsetValue / 60);\n\n                    offsetText = hours + \" \" + plannedTasksMessages.hours;\n\n                    if (minutes !== 0) {\n                        offsetText += (\" \" + minutes + \" \" + plannedTasksMessages.minutes);\n                    }\n\n                    if (offsetValue >= 24) {\n                        hours = offsetValue % 24;\n                        days = offsetValue = Math.floor(offsetValue / 24);\n\n                        offsetText = days + \" \" + plannedTasksMessages.days;\n\n                        if (hours !== 0) {\n                            offsetText += (\" \" + hours + \" \" + plannedTasksMessages.hours);\n                        }\n                    }\n                }\n\n                tooltip\n                    .css({\n                        \"left\": left,\n                        \"top\": top\n                    })\n                    .addClass(styles.offsetTooltipDelay)\n                    .appendTo(content)\n                    .append(OFFSET_TOOLTIP_TEMPLATE({\n                        offsetPrefix: plannedTasksMessages.offsetTooltipDelay,\n                        offsetText: offsetText\n                    }));\n\n                this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n            },\n\n            _removeOffsetTooltip: function() {\n                if (this._offsetTooltip) {\n                    this._offsetTooltip.remove();\n                }\n\n                this._offsetTooltip = null;\n            },\n\n            _createPlannedTooltip: function(task, element, mouseLeft) {\n                var styles = GanttView.styles;\n                var content = this.content;\n                var contentOffset = content.offset();\n                var contentScrollLeft = kendo.scrollLeft(content);\n                var row = element.parents(\"tr\").first();\n                var rowOffset = row.offset();\n                var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                    : mouseLeft - (contentOffset.left - contentScrollLeft);\n                var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n                var tooltip = this._plannedTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + ' ' + styles.plannedTooltip + '\" ></div>');\n                var editorMessages = this.options.messages.editor;\n\n                tooltip\n                    .css({\n                        \"left\": left,\n                        \"top\": top\n                    })\n                    .appendTo(content)\n                    .append(PLANNED_TOOLTIP_TEMPLATE({\n                        plannedStart: editorMessages.plannedStart,\n                        startDate: kendo.toString(task.plannedStart, \"H:mm tt ddd, MMM dd\"),\n                        plannedEnd: editorMessages.plannedEnd,\n                        endDate: kendo.toString(task.plannedEnd, \"H:mm tt ddd, MMM dd\")\n                    }));\n\n                this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n            },\n\n            _removePlannedTooltip: function() {\n                if (this._plannedTooltip) {\n                    this._plannedTooltip.remove();\n                }\n\n                this._plannedTooltip = null;\n            },\n\n            _adjustTooltipDimensions: function(tooltip, rowOffset, contentOffset, left, contentScrollLeft) {\n                var content = this.content;\n                var contentWidth = content.width();\n                var tooltipWidth;\n\n                if (outerHeight(tooltip) < rowOffset.top - contentOffset.top) {\n                    tooltip.css(\"top\", ((rowOffset.top - contentOffset.top) - outerHeight(tooltip)) + content.scrollTop());\n                }\n\n                tooltipWidth = outerWidth(tooltip);\n\n                if ((tooltipWidth + left) - contentScrollLeft > contentWidth) {\n                    left -= tooltipWidth;\n\n                    if (left < contentScrollLeft) {\n                        left = (contentScrollLeft + contentWidth) - (tooltipWidth + 17);\n                    }\n\n                    tooltip.css(\"left\", left);\n                }\n            },\n\n            _scrollTo: function(element) {\n                var elementLeft = element.offset().left;\n                var elementWidth = element.width();\n                var elementRight = elementLeft + elementWidth;\n\n                var row = element.closest(\"tr\");\n                var rowTop = row.offset().top;\n                var rowHeight = row.height();\n                var rowBottom = rowTop + rowHeight;\n\n                var content = this.content;\n                var contentOffset = content.offset();\n                var contentTop = contentOffset.top;\n                var contentHeight = content.height();\n                var contentBottom = contentTop + contentHeight;\n                var contentLeft = contentOffset.left;\n                var contentWidth = content.width();\n                var contentRight = contentLeft + contentWidth;\n\n                var scrollbarWidth = kendo.support.scrollbar();\n\n                if (rowTop < contentTop) {\n                    content.scrollTop(content.scrollTop() + (rowTop - contentTop));\n                } else if (rowBottom > contentBottom) {\n                    content.scrollTop(content.scrollTop() + (rowBottom + scrollbarWidth - contentBottom));\n                }\n\n                if (elementLeft < contentLeft && elementWidth > contentWidth && elementRight < contentRight ||\n                    elementRight > contentRight && elementWidth < contentWidth) {\n                        kendo.scrollLeft(content, kendo.scrollLeft(content) + (elementRight + scrollbarWidth - contentRight));\n                } else if (elementRight > contentRight && elementWidth > contentWidth && elementLeft > contentLeft ||\n                    elementLeft < contentLeft && elementWidth < contentWidth) {\n                kendo.scrollLeft(content, kendo.scrollLeft(content) + (elementLeft - contentLeft));\n                }\n            },\n\n            _scrollToDate: function(date) {\n                var viewStart = this.start;\n                var viewEnd = this.end;\n                var offset;\n\n                if (date >= viewStart && date < viewEnd) {\n                    offset = this._offset(date);\n\n                    if (kendo.support.isRtl(this.element)) {\n                        offset = this._tableWidth - offset;\n                    }\n\n                    kendo.scrollLeft(this.content, offset);\n                }\n            },\n\n            _timeSlots: function() {\n                if (!this._slots || !this._slots.length) {\n                    return [];\n                }\n\n                return this._slots[this._slots.length - 1];\n            },\n\n            _headers: function(columnLevels) {\n                var rows = [];\n                var level;\n                var headers;\n                var column;\n                var headerText;\n                var styles = GanttView.styles;\n\n                for (var levelIndex = 0, levelCount = columnLevels.length; levelIndex < levelCount; levelIndex++) {\n                    level = columnLevels[levelIndex];\n                    headers = [];\n\n                    for (var columnIndex = 0, columnCount = level.length; columnIndex < columnCount; columnIndex++) {\n                        column = level[columnIndex];\n\n                        headerText = kendoHtmlElement(column.text);\n                        headers.push(kendoDomElement(\"td\", { colspan: column.span, className: styles.header + (column.isNonWorking ? (\" \" + styles.nonWorking) : \"\") }, [headerText]));\n                    }\n\n                    rows.push(kendoDomElement(\"tr\", null, headers));\n                }\n\n                return rows;\n            },\n\n            _hours: function(start, end) {\n                var slotEnd;\n                var slots = [];\n                var options = this.options;\n                var workDayStart = options.workDayStart.getHours();\n                var workDayEnd = options.workDayEnd.getHours();\n                var isWorkHour;\n                var hours;\n                var hourSpan = options.hourSpan;\n\n                start = new Date(start);\n                end = new Date(end);\n\n                if (options.showWorkHours) {\n                    start.setHours(workDayStart);\n                }\n\n                while (start < end) {\n                    slotEnd = new Date(start);\n                    hours = slotEnd.getHours();\n\n                    isWorkHour = hours >= workDayStart && hours < workDayEnd;\n\n                    slotEnd.setHours(slotEnd.getHours() + hourSpan);\n\n                    if (hours == slotEnd.getHours()) {\n                        // Chrome DTS Fix\n                        slotEnd.setHours(slotEnd.getHours() + 2 * hourSpan);\n                    }\n\n                    if (!options.showWorkHours || isWorkHour) {\n                        slots.push({\n                            start: start,\n                            end: slotEnd,\n                            isNonWorking: !isWorkHour,\n                            span: 1\n                        });\n                    }\n\n                    start = slotEnd;\n                }\n\n                return slots;\n            },\n\n            _days: function(start, end) {\n                var slotEnd;\n                var slots = [];\n                var isWorkDay;\n\n                start = new Date(start);\n                end = new Date(end);\n\n                while (start < end) {\n                    slotEnd = end < kendo.date.nextDay(start) ? end : kendo.date.nextDay(start);\n\n                    isWorkDay = this._isWorkDay(start);\n\n                    if (!this.options.showWorkDays || isWorkDay) {\n                        slots.push({\n                            start: start,\n                            end: slotEnd,\n                            isNonWorking: !isWorkDay,\n                            span: 1\n                        });\n                    }\n\n                    start = slotEnd;\n                }\n\n                return slots;\n            },\n\n            _weeks: function(start, end) {\n                var slotEnd;\n                var slots = [];\n                var firstDay = this.calendarInfo().firstDay;\n                var daySlots;\n                var span;\n\n                start = new Date(start);\n                end = new Date(end);\n\n                while (start < end) {\n                    slotEnd = kendo.date.dayOfWeek(kendo.date.addDays(start, 1), firstDay, 1);\n\n                    if (slotEnd > end) {\n                        slotEnd = end;\n                    }\n\n                    daySlots = this._days(start, slotEnd);\n                    span = daySlots.length;\n\n                    if (span > 0) {\n                        slots.push({\n                            start: daySlots[0].start,\n                            end: daySlots[span - 1].end,\n                            span: span\n                        });\n                    }\n\n                    start = slotEnd;\n                }\n\n                return slots;\n            },\n\n            _months: function(start, end) {\n                var slotEnd;\n                var endMonth;\n                var slots = [];\n                var daySlots;\n                var span;\n\n                start = new Date(start);\n                end = new Date(end);\n\n                while (start < end) {\n                    slotEnd = new Date(start);\n                    endMonth = kendo.date.firstDayOfMonth(new Date(slotEnd.setMonth(slotEnd.getMonth() + 1)));\n                    slotEnd = end < endMonth ? end : endMonth;\n\n                    daySlots = this._days(start, slotEnd);\n                    span = daySlots.length;\n\n                    if (span > 0) {\n                        slots.push({\n                            start: daySlots[0].start,\n                            end: daySlots[span - 1].end,\n                            span: span\n                        });\n                    }\n\n                    start = slotEnd;\n                }\n\n                return slots;\n            },\n\n            _years: function(start, end) {\n                var slotEnd;\n                var monthSpan;\n                var endMonth;\n                var slots = [];\n\n                start = new Date(start);\n                end = new Date(end);\n\n                while (start < end) {\n                    slotEnd = new Date(start);\n                    slotEnd = kendo.date.firstDayOfMonth(new Date(slotEnd.setMonth(12)));\n\n                    if (slotEnd >= end) {\n                        slotEnd = end;\n                    }\n\n                    endMonth = slotEnd.getMonth() || 12;\n                    monthSpan = endMonth - start.getMonth();\n\n                    slots.push({\n                        start: start,\n                        end: slotEnd,\n                        span: monthSpan\n                    });\n\n                    start = slotEnd;\n                }\n\n                return slots;\n            },\n\n            _slotHeaders: function(slots, template) {\n                var columns = [];\n                var slot;\n\n                for (var i = 0, l = slots.length; i < l; i++) {\n                    slot = slots[i];\n\n                    columns.push({\n                        text: template(slot),\n                        isNonWorking: !!slot.isNonWorking,\n                        span: slot.span\n                    });\n                }\n\n                return columns;\n            },\n\n            _isWorkDay: function(date) {\n                var day = date.getDay();\n                var workDays = this._workDays;\n\n                for (var i = 0, l = workDays.length; i < l; i++) {\n                    if (workDays[i] === day) {\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n\n            calendarInfo: function() {\n                return kendo.getCulture().calendars.standard;\n            },\n\n            _renderCurrentTime: function() {\n                var currentTime = this._getCurrentTime();\n                var timeOffset = this._offset(currentTime);\n                var element = $(\"<div class='k-current-time'></div>\");\n                var viewStyles = GanttView.styles;\n                var tablesWrap = this.element.find(DOT + viewStyles.tasksWrapper);\n                var tasksTable = this.element.find(DOT + viewStyles.tasksTable);\n                var slot;\n\n                if (!this.content || !this._timeSlots().length) {\n                    return;\n                }\n\n                this.content.find(\".k-current-time\").remove();\n\n                slot = this._timeSlots()[this._slotIndex(\"start\", currentTime)];\n\n                if (currentTime < slot.start || currentTime > slot.end) {\n                    return;\n                }\n\n                if (tablesWrap.length && tasksTable.length) {\n                    timeOffset += tasksTable.offset().left - tablesWrap.offset().left;\n                }\n\n                element.css({\n                    left: timeOffset + \"px\",\n                    top: \"0px\",\n                    width: \"1px\",\n                    height: this._contentHeight + \"px\"\n                })\n                .appendTo(this.content);\n            },\n\n            _getCurrentTime: function() {\n                // Introduced for testing purposes\n                return new Date();\n            },\n\n            _currentTime: function() {\n                var markerOptions = this.options.currentTimeMarker;\n\n                if (markerOptions !== false && markerOptions.updateInterval !== undefined) {\n                    this._renderCurrentTime();\n                    this._currentTimeUpdateTimer = setInterval(this._renderCurrentTime.bind(this), markerOptions.updateInterval);\n                }\n            }\n        });\n\n        extend(true, GanttView, { styles: viewStyles });\n\n        kendo.ui.GanttDayView = GanttView.extend({\n            name: \"day\",\n\n            options: {\n                timeHeaderTemplate: TIME_HEADER_TEMPLATE,\n                dayHeaderTemplate: DAY_HEADER_TEMPLATE,\n                resizeTooltipFormat: \"h:mm tt ddd, MMM d\"\n            },\n\n            range: function(range) {\n                var optionsRange = this.options.range;\n                this.start = kendo.date.getDate(range.start);\n                this.end = kendo.date.getDate(range.end);\n\n                if (kendo.date.getMilliseconds(range.end) > 0 || this.end.getTime() === this.start.getTime()) {\n                    this.end = kendo.date.addDays(this.end, 1);\n                }\n\n                if (optionsRange && optionsRange.start) {\n                    this.start = kendo.date.getDate(optionsRange.start);\n                    this.start.setHours(optionsRange.start.getHours());\n                }\n\n                if (optionsRange && optionsRange.end) {\n                    this.end = kendo.date.getDate(optionsRange.end);\n                    this.end.setHours(optionsRange.end.getHours());\n                }\n            },\n\n            _createSlots: function() {\n                var daySlots;\n                var daySlot;\n                var hourSlots;\n                var hours;\n                var slots = [];\n\n                daySlots = this._days(this.start, this.end);\n                hourSlots = [];\n\n                for (var i = 0, l = daySlots.length; i < l; i++) {\n                    daySlot = daySlots[i];\n                    hours = this._hours(daySlot.start, daySlot.end);\n\n                    daySlot.span = hours.length;\n\n                    hourSlots.push.apply(hourSlots, hours);\n                }\n\n                slots.push(daySlots);\n                slots.push(hourSlots);\n\n                return slots;\n            },\n\n            _layout: function() {\n                var rows = [];\n                var options = this.options;\n\n                rows.push(this._slotHeaders(this._slots[0], kendo.template(options.dayHeaderTemplate)));\n                rows.push(this._slotHeaders(this._slots[1], kendo.template(options.timeHeaderTemplate)));\n\n                return rows;\n            }\n        });\n\n        kendo.ui.GanttWeekView = GanttView.extend({\n            name: \"week\",\n\n            options: {\n                dayHeaderTemplate: DAY_HEADER_TEMPLATE,\n                weekHeaderTemplate: WEEK_HEADER_TEMPLATE,\n                resizeTooltipFormat: \"h:mm tt ddd, MMM d\"\n            },\n\n            range: function(range) {\n                var optionsRange = this.options.range;\n                var calendarInfo = this.calendarInfo();\n                var firstDay = calendarInfo.firstDay;\n                var rangeEnd = range.end;\n                var endDay;\n\n                if (firstDay === rangeEnd.getDay()) {\n                    rangeEnd.setDate(rangeEnd.getDate() + 7);\n                }\n\n                this.start = kendo.date.getDate(kendo.date.dayOfWeek(range.start, firstDay, -1));\n                this.end = kendo.date.getDate(kendo.date.dayOfWeek(rangeEnd, firstDay, 1));\n\n                if (optionsRange && optionsRange.start) {\n                    this.start = kendo.date.getDate(optionsRange.start);\n                }\n\n                if (optionsRange && optionsRange.end) {\n                    endDay = new Date(optionsRange.end);\n\n                    if (kendo.date.getDate(endDay) < optionsRange.end) {\n                        this.end = kendo.date.getDate(new Date(endDay.setDate(endDay.getDate() + 1)));\n                    } else {\n                        this.end = kendo.date.getDate(endDay);\n                    }\n                }\n            },\n\n            _createSlots: function() {\n                var slots = [];\n\n                slots.push(this._weeks(this.start, this.end));\n                slots.push(this._days(this.start, this.end));\n\n                return slots;\n            },\n\n            _layout: function() {\n                var rows = [];\n                var options = this.options;\n\n                rows.push(this._slotHeaders(this._slots[0], kendo.template(options.weekHeaderTemplate)));\n                rows.push(this._slotHeaders(this._slots[1], kendo.template(options.dayHeaderTemplate)));\n\n                return rows;\n            }\n        });\n\n        kendo.ui.GanttMonthView = GanttView.extend({\n            name: \"month\",\n\n            options: {\n                weekHeaderTemplate: WEEK_HEADER_TEMPLATE,\n                monthHeaderTemplate: MONTH_HEADER_TEMPLATE,\n                resizeTooltipFormat: \"dddd, MMM d, yyyy\"\n            },\n\n            range: function(range) {\n                var optionsRange = this.options.range;\n                var endDay;\n                this.start = kendo.date.firstDayOfMonth(range.start);\n                this.end = kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(range.end)), 1);\n\n                if (optionsRange && optionsRange.start) {\n                    this.start = kendo.date.getDate(optionsRange.start);\n                }\n\n                if (optionsRange && optionsRange.end) {\n                    endDay = new Date(optionsRange.end);\n\n                    if (kendo.date.getDate(endDay) < optionsRange.end) {\n                        this.end = kendo.date.getDate(new Date(endDay.setDate(endDay.getDate() + 1)));\n                    } else {\n                        this.end = kendo.date.getDate(endDay);\n                    }\n                }\n            },\n\n            _createSlots: function() {\n                var slots = [];\n\n                slots.push(this._months(this.start, this.end));\n                slots.push(this._weeks(this.start, this.end));\n\n                return slots;\n            },\n\n            _layout: function() {\n                var rows = [];\n                var options = this.options;\n\n                rows.push(this._slotHeaders(this._slots[0], kendo.template(options.monthHeaderTemplate)));\n                rows.push(this._slotHeaders(this._slots[1], kendo.template(options.weekHeaderTemplate)));\n\n                return rows;\n            }\n        });\n\n        kendo.ui.GanttYearView = GanttView.extend({\n            name: \"year\",\n\n            options: {\n                yearHeaderTemplate: YEAR_HEADER_TEMPLATE,\n                monthHeaderTemplate: MONTH_HEADER_TEMPLATE,\n                resizeTooltipFormat: \"dddd, MMM d, yyyy\"\n            },\n\n            range: function(range) {\n                var optionsRange = this.options.range;\n                var firstDayOfMonth;\n                this.start = kendo.date.firstDayOfMonth(new Date(range.start.setMonth(0)));\n                this.end = kendo.date.firstDayOfMonth(new Date(range.end.setMonth(12))); //set month to first month of next year\n\n                if (optionsRange && optionsRange.start) {\n                    this.start = kendo.date.firstDayOfMonth(optionsRange.start);\n                }\n\n                if (optionsRange && optionsRange.end) {\n                    firstDayOfMonth = kendo.date.firstDayOfMonth(optionsRange.end);\n\n                    this.end = kendo.date.getDate(new Date(firstDayOfMonth.setMonth(firstDayOfMonth.getMonth() + 1)));\n                }\n            },\n\n            _createSlots: function() {\n                var slots = [];\n                var monthSlots = this._months(this.start, this.end);\n\n                $(monthSlots).each(function(index, slot) {\n                    slot.span = 1;\n                });\n\n                slots.push(this._years(this.start, this.end));\n                slots.push(monthSlots);\n\n                return slots;\n            },\n\n            _layout: function() {\n                var rows = [];\n                var options = this.options;\n\n                rows.push(this._slotHeaders(this._slots[0], kendo.template(options.yearHeaderTemplate)));\n                rows.push(this._slotHeaders(this._slots[1], kendo.template(options.monthHeaderTemplate)));\n\n                return rows;\n            }\n        });\n\n        var timelineStyles = {\n            wrapper: \"k-timeline k-grid k-widget\",\n            gridHeader: \"k-grid-header\",\n            gridHeaderWrap: \"k-grid-header-wrap\",\n            gridContent: \"k-grid-content\",\n            gridContentWrap: \"k-grid-content\",\n            tasksWrapper: \"k-gantt-tables\",\n            dependenciesWrapper: \"k-gantt-dependencies\",\n            task: \"k-task\",\n            taskOffset: \"k-task-offset\",\n            taskOffsetWrap: \"k-task-offset-wrap\",\n            taskPlanned: \"k-task-planned\",\n            line: \"k-gantt-line\",\n            taskResizeHandle: \"k-resize-handle\",\n            taskResizeHandleWest: \"k-resize-w\",\n            taskDragHandle: \"k-task-draghandle\",\n            taskComplete: \"k-task-complete\",\n            taskDelete: \"k-task-delete\",\n            taskWrapActive: \"k-task-wrap-active\",\n            taskWrap: \"k-task-wrap\",\n            taskDot: \"k-task-dot\",\n            taskDotStart: \"k-task-start\",\n            taskDotEnd: \"k-task-end\",\n            hovered: \"k-hover\",\n            selected: \"k-selected\",\n            origin: \"k-origin\"\n        };\n\n        var GanttTimeline = kendo.ui.GanttTimeline = Widget.extend({\n            init: function(element, options) {\n\n                Widget.fn.init.call(this, element, options);\n\n                if (!this.options.views || !this.options.views.length) {\n                    this.options.views = [\"day\", \"week\", \"month\"];\n                }\n\n                isRtl = kendo.support.isRtl(element);\n\n                this._wrapper();\n\n                this._domTrees();\n\n                this._views();\n\n                this._selectable();\n\n                this._draggable();\n\n                this._resizable();\n\n                this._percentResizeDraggable();\n\n                this._createDependencyDraggable();\n\n                this._attachEvents();\n\n                this._tooltip();\n            },\n\n            options: {\n                name: \"GanttTimeline\",\n                messages: {\n                    views: {\n                        day: \"Day\",\n                        week: \"Week\",\n                        month: \"Month\",\n                        year: \"Year\",\n                        start: \"Start\",\n                        end: \"End\"\n                    }\n                },\n                snap: true,\n                selectable: true,\n                editable: true\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                clearTimeout(this._tooltipTimeout);\n\n                if (this._currentTimeUpdateTimer) {\n                    clearInterval(this._currentTimeUpdateTimer);\n                }\n\n                this._unbindView(this._selectedView);\n\n                if (this._moveDraggable) {\n                    this._moveDraggable.destroy();\n                }\n\n                if (this._resizeDraggable) {\n                    this._resizeDraggable.destroy();\n                }\n\n                if (this._percentDraggable) {\n                    this._percentDraggable.destroy();\n                }\n\n                if (this._dependencyDraggable) {\n                    this._dependencyDraggable.destroy();\n                }\n\n                if (this.touch) {\n                    this.touch.destroy();\n                }\n\n                this._headerTree = null;\n                this._taskTree = null;\n                this._dependencyTree = null;\n\n                this.wrapper.off(NS);\n\n                kendo.destroy(this.wrapper);\n            },\n\n            _wrapper: function() {\n                var styles = GanttTimeline.styles;\n                var that = this;\n                var options = this.options;\n                var calculateSize = function() {\n                    var rowHeight = typeof options.rowHeight === STRING ? options.rowHeight :\n                        options.rowHeight + \"px\";\n                    var table = $(kendo.format(SIZE_CALCULATION_TEMPLATE, rowHeight));\n                    var calculatedRowHeight;\n                    var calculatedCellHeight;\n                    var content = that.wrapper.find(DOT + styles.tasksWrapper);\n\n                    content.append(table);\n\n                    calculatedRowHeight = outerHeight(table.find(\"tr\"));\n                    calculatedCellHeight = table.find(\"td\").height();\n\n                    table.remove();\n\n                    return {\n                        \"row\": calculatedRowHeight,\n                        \"cell\": calculatedCellHeight\n                    };\n                };\n\n                this.wrapper = this.element\n                    .addClass(styles.wrapper)\n                    .append(\"<div class='\" + styles.gridHeader + \"'><div class='\" + styles.gridHeaderWrap + \"'></div></div>\")\n                    .append(\"<div class='\" + styles.gridContentWrap + \"'><div class='\" + styles.tasksWrapper + \"'></div><div class='\" + styles.dependenciesWrapper + \"'></div></div>\");\n\n                if (options.rowHeight) {\n                    this._calculatedSize = calculateSize();\n                }\n            },\n\n            _domTrees: function() {\n                var styles = GanttTimeline.styles;\n                var tree = kendo.dom.Tree;\n                var wrapper = this.wrapper;\n\n                this._headerTree = new tree(wrapper.find(DOT + styles.gridHeaderWrap)[0]);\n\n                this._taskTree = new tree(wrapper.find(DOT + styles.tasksWrapper)[0]);\n\n                this._dependencyTree = new tree(wrapper.find(DOT + styles.dependenciesWrapper)[0]);\n            },\n\n            _views: function() {\n                var views = this.options.views;\n                var view;\n                var isSettings;\n                var name;\n                var defaultView;\n                var selected;\n\n                this.views = {};\n\n                for (var i = 0, l = views.length; i < l; i++) {\n                    view = views[i];\n\n                    isSettings = isPlainObject(view);\n\n                    if (isSettings && view.selectable === false) {\n                        continue;\n                    }\n\n                    name = isSettings ? ((typeof view.type !== \"string\") ? view.title : view.type) : view;\n\n                    defaultView = defaultViews[name];\n\n                    if (defaultView) {\n                        if (isSettings) {\n                            view.type = defaultView.type;\n                        }\n\n                        defaultView.title = this.options.messages.views[name];\n                    }\n\n                    view = extend({ title: name }, defaultView, isSettings ? view : {});\n\n                    if (name) {\n                        this.views[name] = view;\n\n                        if (!selected || view.selected) {\n                            selected = name;\n                        }\n                    }\n                }\n\n                if (selected) {\n                    this._selectedViewName = selected;\n                }\n            },\n\n            view: function(name) {\n                if (name) {\n                    this._selectView(name);\n\n                    this.trigger(\"navigate\", { view: name, action: \"changeView\" });\n                }\n\n                return this._selectedView;\n            },\n\n            _selectView: function(name) {\n                if (name && this.views[name]) {\n                    if (this._selectedView) {\n                        this._unbindView(this._selectedView);\n                    }\n\n                    this._selectedView = this._initializeView(name);\n                    this._selectedViewName = name;\n                }\n            },\n\n            _viewByIndex: function(index) {\n                var view;\n                var views = this.views;\n\n                for (view in views) {\n                    if (!index) {\n                        return view;\n                    }\n\n                    index--;\n                }\n            },\n\n            _initializeView: function(name) {\n                var view = this.views[name];\n\n                if (view) {\n                    var type = view.type;\n\n                    if (typeof type === \"string\") {\n                        type = kendo.getter(view.type)(window);\n                    }\n\n                    if (type) {\n                        var newRange = {};\n                        extend(newRange, this.options.range, view.range);\n\n                        var newDate = view.date || this.options.date;\n\n                        view = new type(this.wrapper, trimOptions(extend(true, {\n                            headerTree: this._headerTree,\n                            taskTree: this._taskTree,\n                            dependencyTree: this._dependencyTree,\n                            calculatedSize: this._calculatedSize\n                        }, view, this.options, {\n                            date: newDate,\n                            range: newRange\n                        })));\n                    } else {\n                        throw new Error(\"There is no such view\");\n                    }\n                }\n\n                return view;\n            },\n\n            _unbindView: function(view) {\n                if (view) {\n                    view.destroy();\n                }\n            },\n\n            _range: function(tasks) {\n                var startOrder = {\n                    field: \"start\",\n                    dir: \"asc\"\n                };\n                var endOrder = {\n                    field: \"end\",\n                    dir: \"desc\"\n                };\n\n                if (!tasks || !tasks.length) {\n                    return { start: new Date(), end: new Date() };\n                }\n\n                var start = new Query(tasks).sort(startOrder).toArray()[0].start || new Date();\n                var end = new Query(tasks).sort(endOrder).toArray()[0].end || new Date();\n\n                return {\n                    start: new Date(start),\n                    end: new Date(end)\n                };\n            },\n\n            _render: function(tasks) {\n                var view = this.view();\n                var range = this._range(tasks);\n                var date = view.options.date;\n\n                this._tasks = tasks;\n\n                view.range(range);\n\n                view.renderLayout();\n\n                view.render(tasks);\n\n                if (date) {\n                    view._scrollToDate(date);\n                }\n            },\n\n            _renderDependencies: function(dependencies) {\n                this.view()._renderDependencies(dependencies);\n            },\n\n            _taskByUid: function(uid) {\n                var tasks = this._tasks;\n                var length = tasks.length;\n                var task;\n\n                for (var i = 0; i < length; i++) {\n                    task = tasks[i];\n\n                    if (task.uid === uid) {\n                        return task;\n                    }\n                }\n            },\n\n            _draggable: function() {\n                var that = this;\n                var element;\n                var task;\n                var currentStart;\n                var startOffset;\n                var snap = this.options.snap;\n                var styles = GanttTimeline.styles;\n                var editable = this.options.editable;\n\n                var cleanUp = function() {\n                    that.view()._removeDragHint();\n\n                    if (element) {\n                        element.css(\"opacity\", 1);\n                    }\n\n                    element = null;\n                    task = null;\n                    that.dragInProgress = false;\n                };\n\n                if (!editable || editable.move === false || editable.update === false) {\n                    return;\n                }\n\n                this._moveDraggable = new kendo.ui.Draggable(this.wrapper, {\n                    distance: 0,\n                    filter: DOT + styles.task + \",\" + DOT + styles.taskOffset,\n                    holdToDrag: kendo.support.mobileOS,\n                    ignore: DOT + styles.taskResizeHandle\n                });\n\n                this._moveDraggable\n                    .bind(\"dragstart\", function(e) {\n                        var view = that.view();\n                        element = e.currentTarget.closest(DOT + styles.taskWrap);\n                        task = that._taskByUid(e.currentTarget.parent().find(DOT + styles.task).attr(\"data-uid\"));\n\n                        if (that.trigger(\"moveStart\", { task: task })) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        currentStart = task.start;\n                        startOffset = view._timeByPosition(e.x.location, snap) - currentStart;\n\n                        view._createDragHint(element);\n\n                        element.css(\"opacity\", 0.5);\n\n                        clearTimeout(that._tooltipTimeout);\n                        that.dragInProgress = true;\n                    })\n                    .bind(\"drag\", kendo.throttle(function(e) {\n                        if (!that.dragInProgress) {\n                            return;\n                        }\n\n                        var view = that.view();\n                        var date = new Date(view._timeByPosition(e.x.location, snap) - startOffset);\n                        var updateHintDate = date;\n\n                        if (!that.trigger(\"move\", { task: task, start: date })) {\n                            currentStart = date;\n\n                            if (isRtl) {\n                                updateHintDate = new Date(currentStart.getTime() + task.duration());\n                            }\n\n                            view._updateDragHint(updateHintDate);\n                        }\n                    }, 15))\n                    .bind(\"dragend\", function() {\n                        that.trigger(\"moveEnd\", { task: task, start: currentStart });\n\n                        cleanUp();\n                    })\n                    .bind(\"dragcancel\", function() {\n                        cleanUp();\n                    })\n                    .userEvents.bind(\"select\", function() {\n                        blurActiveElement();\n                    });\n            },\n\n            _resizable: function() {\n                var that = this;\n                var element;\n                var task;\n                var currentStart;\n                var currentEnd;\n                var resizeStart;\n                var snap = this.options.snap;\n                var styles = GanttTimeline.styles;\n                var editable = this.options.editable;\n\n                var cleanUp = function() {\n                    that.view()._removeResizeHint();\n                    element = null;\n                    task = null;\n                    that.dragInProgress = false;\n                };\n\n                if (!editable || editable.resize === false || editable.update === false) {\n                    return;\n                }\n\n                this._resizeDraggable = new kendo.ui.Draggable(this.wrapper, {\n                    distance: 0,\n                    filter: DOT + styles.taskResizeHandle,\n                    holdToDrag: false\n                });\n\n                this._resizeDraggable\n                    .bind(\"dragstart\", function(e) {\n                        resizeStart = e.currentTarget.hasClass(styles.taskResizeHandleWest);\n\n                        if (isRtl) {\n                            resizeStart = !resizeStart;\n                        }\n\n                        element = e.currentTarget.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n\n                        task = that._taskByUid(element.attr(\"data-uid\"));\n\n                        if (that.trigger(\"resizeStart\", { task: task })) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        currentStart = task.start;\n                        currentEnd = task.end;\n\n                        that.view()._createResizeHint(task);\n\n                        clearTimeout(that._tooltipTimeout);\n                        that.dragInProgress = true;\n                    })\n                    .bind(\"drag\", kendo.throttle(function(e) {\n                        if (!that.dragInProgress) {\n                            return;\n                        }\n\n                        var view = that.view();\n                        var date = view._timeByPosition(e.x.location, snap, !resizeStart);\n\n                        if (resizeStart) {\n                            if (date < currentEnd) {\n                                currentStart = date;\n                            } else {\n                                currentStart = currentEnd;\n                            }\n                        } else {\n                            if (date > currentStart) {\n                                currentEnd = date;\n                            } else {\n                                currentEnd = currentStart;\n                            }\n                        }\n\n                        if (!that.trigger(\"resize\", { task: task, start: currentStart, end: currentEnd })) {\n                            view._updateResizeHint(currentStart, currentEnd, resizeStart);\n                        }\n                    }, 15))\n                    .bind(\"dragend\", function() {\n                        that.trigger(\"resizeEnd\", { task: task, resizeStart: resizeStart, start: currentStart, end: currentEnd });\n\n                        cleanUp();\n                    })\n                    .bind(\"dragcancel\", function() {\n                        cleanUp();\n                    })\n                    .userEvents.bind(\"select\", function() {\n                        blurActiveElement();\n                    });\n            },\n\n            _percentResizeDraggable: function() {\n                var that = this;\n                var task;\n                var taskElement;\n                var taskElementOffset;\n                var timelineOffset;\n                var originalPercentWidth;\n                var maxPercentWidth;\n                var currentPercentComplete;\n                var tooltipTop;\n                var tooltipLeft;\n                var styles = GanttTimeline.styles;\n                var delta;\n                var editable = this.options.editable;\n\n                var cleanUp = function() {\n                    that.view()._removePercentCompleteTooltip();\n                    taskElement = null;\n                    task = null;\n                    that.dragInProgress = false;\n                };\n\n                var updateElement = function(width) {\n                    var taskDragHandle = taskElement.siblings(DOT + styles.taskDragHandle);\n\n                    if (!taskDragHandle.length) {\n                        taskDragHandle = taskElement.closest(DOT + styles.taskWrap).find(DOT + styles.taskDragHandle);\n                    }\n\n                    taskDragHandle.css(isRtl ? \"right\" : \"left\", width);\n\n                    taskElement\n                        .find(DOT + styles.taskComplete)\n                        .width(width);\n                };\n\n                if (!editable || editable.dragPercentComplete === false || editable.update === false) {\n                    return;\n                }\n\n                this._percentDraggable = new kendo.ui.Draggable(this.wrapper, {\n                    distance: 0,\n                    filter: DOT + styles.taskDragHandle,\n                    holdToDrag: false\n                });\n\n                this._percentDraggable\n                    .bind(\"dragstart\", function(e) {\n                        if (that.trigger(\"percentResizeStart\")) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        taskElement = e.currentTarget.siblings(DOT + styles.task);\n\n                        if (!taskElement.length) {\n                            taskElement = e.currentTarget.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                        }\n\n                        task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                        currentPercentComplete = task.percentComplete;\n\n                        taskElementOffset = taskElement.offset();\n                        timelineOffset = this.element.offset();\n\n                        originalPercentWidth = taskElement.find(DOT + styles.taskComplete).width();\n                        maxPercentWidth = outerWidth(taskElement);\n\n                        clearTimeout(that._tooltipTimeout);\n                        that.dragInProgress = true;\n                    })\n                    .bind(\"drag\", kendo.throttle(function(e) {\n                        if (!that.dragInProgress) {\n                            return;\n                        }\n\n                        delta = isRtl ? -e.x.initialDelta : e.x.initialDelta;\n\n                        var currentWidth = Math.max(0, Math.min(maxPercentWidth, originalPercentWidth + delta));\n\n                        currentPercentComplete = Math.round((currentWidth / maxPercentWidth) * 100);\n\n                        updateElement(currentWidth);\n\n                        tooltipTop = taskElementOffset.top - timelineOffset.top;\n                        tooltipLeft = taskElementOffset.left + currentWidth - timelineOffset.left;\n\n                        if (isRtl) {\n                            tooltipLeft += (maxPercentWidth - 2 * currentWidth);\n                        }\n\n                        that.view()._updatePercentCompleteTooltip(tooltipTop, tooltipLeft, currentPercentComplete);\n                    }, 15))\n                    .bind(\"dragend\", function() {\n                        that.trigger(\"percentResizeEnd\", { task: task, percentComplete: currentPercentComplete / 100 });\n\n                        cleanUp();\n                    })\n                    .bind(\"dragcancel\", function() {\n                        updateElement(originalPercentWidth);\n\n                        cleanUp();\n                    })\n                    .userEvents.bind(\"select\", function() {\n                        blurActiveElement();\n                    });\n            },\n\n            _createDependencyDraggable: function() {\n                var that = this;\n                var originalHandle;\n                var hoveredHandle = $();\n                var hoveredTask = $();\n                var startX;\n                var startY;\n                var styles = GanttTimeline.styles;\n                var editable = this.options.editable;\n\n                var cleanUp = function() {\n                    originalHandle\n                        .css(\"display\", \"\")\n                        .removeClass(styles.hovered);\n\n                    originalHandle.parent().removeClass(styles.origin);\n                    originalHandle = null;\n\n                    toggleHandles(false);\n\n                    hoveredTask = $();\n                    hoveredHandle = $();\n\n                    that.view()._removeDependencyDragHint();\n\n                    that.dragInProgress = false;\n                };\n\n                var toggleHandles = function(value) {\n                    if (!hoveredTask.hasClass(styles.origin)) {\n                        hoveredTask.find(DOT + styles.taskDot).css(\"display\", value ? \"block\" : \"\");\n                        hoveredHandle.toggleClass(styles.hovered, value);\n                    }\n                };\n\n                if (!editable || editable.dependencyCreate === false) {\n                    return;\n                }\n\n                this._dependencyDraggable = new kendo.ui.Draggable(this.wrapper, {\n                    distance: 0,\n                    filter: DOT + styles.taskDot,\n                    holdToDrag: false\n                });\n\n                this._dependencyDraggable\n                    .bind(\"dragstart\", function(e) {\n                        if (that.trigger(\"dependencyDragStart\")) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        originalHandle = e.currentTarget\n                            .css(\"display\", \"block\")\n                            .addClass(styles.hovered);\n\n                        originalHandle.parent().addClass(styles.origin);\n\n                        var elementOffset = originalHandle.offset();\n                        var tablesOffset = that.wrapper.find(DOT + styles.tasksWrapper).offset();\n\n                        startX = Math.round(elementOffset.left - tablesOffset.left + (outerHeight(originalHandle) / 2));\n                        startY = Math.round(elementOffset.top - tablesOffset.top + (outerWidth(originalHandle) / 2));\n\n                        clearTimeout(that._tooltipTimeout);\n                        that.dragInProgress = true;\n                    })\n                    .bind(\"drag\", kendo.throttle(function(e) {\n                        if (!that.dragInProgress) {\n                            return;\n                        }\n\n                        that.view()._removeDependencyDragHint();\n\n                        var target = $(kendo.elementUnderCursor(e));\n                        var tablesOffset = that.wrapper.find(DOT + styles.tasksWrapper).offset();\n                        var currentX = e.x.location - tablesOffset.left;\n                        var currentY = e.y.location - tablesOffset.top;\n\n                        that.view()._updateDependencyDragHint({ x: startX, y: startY }, { x: currentX, y: currentY });\n\n                        toggleHandles(false);\n\n                        hoveredHandle = (target.hasClass(styles.taskDot)) ? target : $();\n                        hoveredTask = target.closest(DOT + styles.taskWrap);\n\n                        toggleHandles(true);\n                    }, 15))\n                    .bind(\"dragend\", function() {\n                        if (hoveredHandle.length) {\n                            var fromStart = originalHandle.hasClass(styles.taskDotStart);\n                            var toStart = hoveredHandle.hasClass(styles.taskDotStart);\n\n                            var type = fromStart ? (toStart ? 3 : 2) : (toStart ? 1 : 0);\n\n                            var predecessorElement = originalHandle.siblings(DOT + styles.task);\n                            if (!predecessorElement.length) {\n                                predecessorElement = originalHandle.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                            }\n                            var predecessor = that._taskByUid(predecessorElement.attr(\"data-uid\"));\n\n                            var successorElement = hoveredHandle.siblings(DOT + styles.task);\n                            if (!successorElement.length) {\n                                successorElement = hoveredHandle.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                            }\n                            var successor = that._taskByUid(successorElement.attr(\"data-uid\"));\n\n                            if (predecessor !== successor) {\n                                that.trigger(\"dependencyDragEnd\", { type: type, predecessor: predecessor, successor: successor });\n                            }\n                        }\n\n                        cleanUp();\n                    })\n                    .bind(\"dragcancel\", function() {\n                        cleanUp();\n                    })\n                    .userEvents.bind(\"select\", function() {\n                        blurActiveElement();\n                    });\n            },\n\n            _selectable: function() {\n                var that = this;\n                var styles = GanttTimeline.styles;\n\n                if (this.options.selectable) {\n                    this.wrapper\n                        .on(CLICK + NS, DOT + styles.task + \",\" + DOT + styles.taskOffset, function(e) {\n                            e.stopPropagation();\n\n                            var uid = $(this).attr(\"data-uid\");\n\n                            if (!uid) {\n                                uid = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).data(\"uid\");\n                            }\n\n                            if (!e.ctrlKey) {\n                                that.trigger(\"select\", { uid: uid });\n                            } else {\n                                that.trigger(\"clear\");\n                            }\n                        })\n                        .on(CLICK + NS, DOT + styles.taskWrap, function(e) {\n                            e.stopPropagation();\n\n                            // Decrease z-index of wrap so the we can get to the\n                            // dependency line underneath, if there is any\n                            $(this).css(\"z-index\", \"0\");\n\n                            var target = $(document.elementFromPoint(e.clientX, e.clientY));\n\n                            if (target.hasClass(styles.line)) {\n                                target.click();\n                            }\n\n                            $(this).css(\"z-index\", \"\");\n                        })\n                        .on(CLICK + NS, DOT + styles.tasksWrapper, function() {\n                            if (that.selectDependency().length > 0) {\n                                that.clearSelection();\n                            } else {\n                                that.trigger(\"clear\");\n                            }\n                        })\n                        .on(CLICK + NS, DOT + styles.line, function(e) {\n                            e.stopPropagation();\n\n                            that.selectDependency(this);\n                        });\n                }\n            },\n\n            select: function(value) {\n                var element = this.wrapper.find(value);\n                var styles = GanttTimeline.styles;\n\n                if (element.length) {\n                    this.clearSelection();\n\n                    element.addClass(styles.selected);\n\n                    if (kendo.support.mobileOS) {\n                        element.parent().addClass(styles.taskWrapActive);\n                    }\n\n                    return;\n                }\n\n                return this.wrapper.find(DOT + styles.task + DOT + styles.selected);\n            },\n\n            selectDependency: function(value) {\n                var element = this.wrapper.find(value);\n                var uid;\n                var styles = GanttTimeline.styles;\n\n                if (element.length) {\n                    this.clearSelection();\n                    this.trigger(\"clear\");\n\n                    uid = $(element).attr(\"data-uid\");\n\n                    this.wrapper.find(DOT + styles.line + \"[data-uid='\" + uid + \"']\").addClass(styles.selected);\n\n                    return;\n                }\n\n                return this.wrapper.find(DOT + styles.line + DOT + styles.selected);\n            },\n\n            clearSelection: function() {\n                var styles = GanttTimeline.styles;\n\n                this.wrapper\n                    .find(DOT + styles.selected)\n                    .removeClass(styles.selected);\n\n                if (kendo.support.mobileOS) {\n                    this.wrapper\n                        .find(DOT + styles.taskWrapActive)\n                        .removeClass(styles.taskWrapActive);\n                }\n            },\n\n            _attachEvents: function() {\n                var that = this;\n                var styles = GanttTimeline.styles;\n                var editable = this.options.editable;\n\n                if (editable) {\n                    this._tabindex();\n\n                    this.wrapper\n                        .on(CLICK + NS, DOT + styles.taskDelete, function(e) {\n                            that.trigger(\"removeTask\", { uid: $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n                            e.stopPropagation();\n                            e.preventDefault();\n                        })\n                        .on(KEYDOWN + NS, function(e) {\n                            var selectedDependency;\n                            var editable = that.options.editable;\n\n                            if (e.keyCode === keys.DELETE && editable && editable.dependencyDestroy !== false) {\n                                selectedDependency = that.selectDependency();\n\n                                if (selectedDependency.length) {\n                                    that.trigger(\"removeDependency\", { uid: selectedDependency.attr(\"data-uid\") });\n                                    that.clearSelection();\n                                }\n                            }\n                        });\n\n                    if (!kendo.support.mobileOS) {\n                        this.wrapper\n                            .on(DBLCLICK + NS, DOT + styles.task + \",\" + DOT + styles.taskOffset, function(e) {\n                                if (that.options.editable.update !== false) {\n                                    that.trigger(\"editTask\", { uid: $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n\n                                    e.stopPropagation();\n                                    e.preventDefault();\n                                }\n                            });\n                    } else {\n                        this.touch = this.wrapper\n                            .kendoTouch({\n                                filter: DOT + styles.task + \",\" + DOT + styles.taskOffset,\n                                doubletap: function(e) {\n                                    if (that.options.editable.update !== false) {\n                                        that.trigger(\"editTask\", { uid: $(e.touch.currentTarget).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n                                    }\n                                }\n                            }).data(\"kendoTouch\");\n                    }\n                }\n            },\n\n            _tooltip: function() {\n                var that = this;\n                var tooltipOptions = this.options.tooltip;\n                var styles = GanttTimeline.styles;\n                var currentMousePosition;\n                var mouseMoveHandler = function(e) {\n                    currentMousePosition = e.clientX;\n                };\n\n                if (tooltipOptions && tooltipOptions.visible === false) {\n                    return;\n                }\n\n                if (!kendo.support.mobileOS) {\n                    this.wrapper\n                            .on(MOUSEENTER + NS, DOT + styles.task, function() {\n                                var element = this;\n                                var task = that._taskByUid($(this).attr(\"data-uid\"));\n\n                                if (that.dragInProgress) {\n                                    return;\n                                }\n\n                                that._tooltipTimeout = setTimeout(function() {\n                                    that.view()._createTaskTooltip(task, element, currentMousePosition);\n                                }, 800);\n\n                                $(this).on(MOUSEMOVE, mouseMoveHandler);\n                            })\n                            .on(MOUSELEAVE + NS, DOT + styles.task, function() {\n                                clearTimeout(that._tooltipTimeout);\n\n                                that.view()._removeTaskTooltip();\n\n                                $(this).off(MOUSEMOVE, mouseMoveHandler);\n                            })\n                            .on(MOUSEENTER + NS, DOT + styles.taskOffset, function() {\n                                var taskElement = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                                var task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                                if (that.dragInProgress) {\n                                    return;\n                                }\n\n                                that._offsetTooltipTimeout = setTimeout(function() {\n                                    that.view()._createOffsetTooltip(task, taskElement, currentMousePosition);\n                                }, 800);\n\n                                $(this).on(MOUSEMOVE, mouseMoveHandler);\n                            })\n                            .on(MOUSELEAVE + NS, DOT + styles.taskOffset, function() {\n                                clearTimeout(that._offsetTooltipTimeout);\n\n                                that.view()._removeOffsetTooltip();\n\n                                $(this).off(MOUSEMOVE, mouseMoveHandler);\n                            })\n                            .on(MOUSEENTER + NS, DOT + styles.taskPlanned, function() {\n                                var taskElement = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                                var task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                                that._plannedTooltipTimeout = setTimeout(function() {\n                                    that.view()._createPlannedTooltip(task, taskElement, currentMousePosition);\n                                }, 800);\n\n                                $(this).on(MOUSEMOVE, mouseMoveHandler);\n                            })\n                            .on(MOUSELEAVE + NS, DOT + styles.taskPlanned, function() {\n                                clearTimeout(that._plannedTooltipTimeout);\n\n                                that.view()._removePlannedTooltip();\n\n                                $(this).off(MOUSEMOVE, mouseMoveHandler);\n                            });\n                } else {\n                    this.wrapper\n                        .on(CLICK + NS, DOT + styles.taskDelete, function(e) {\n                            e.stopPropagation();\n                            that.view()._removeTaskTooltip();\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.task, function(e) {\n                            var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                            if (parents.length === 0) {\n                                that.view()._removeTaskTooltip();\n                            }\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.taskOffset, function(e) {\n                            var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                            if (parents.length === 0) {\n                                that.view()._removeOffsetTooltip();\n                            }\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.taskPlanned, function(e) {\n                            var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                            if (parents.length === 0) {\n                                that.view()._removePlannedTooltip();\n                            }\n                        });\n\n                    if (this.touch) {\n                        this.touch\n                            .bind(\"tap\", function(e) {\n                                var element = $(e.touch.target);\n                                var currentPosition = e.touch.x.client;\n                                var task;\n\n                                if (!element.hasClass(styles.task)) {\n                                    task = that._taskByUid(element.closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\"));\n                                    if (that.view()._offsetTooltip) {\n                                        that.view()._removeOffsetTooltip();\n                                    }\n\n                                    that.view()._createOffsetTooltip(task, element, currentPosition);\n                                } else {\n                                    task = that._taskByUid(element.attr(\"data-uid\"));\n                                    if (that.view()._taskTooltip) {\n                                        that.view()._removeTaskTooltip();\n                                    }\n\n                                    that.view()._createTaskTooltip(task, element, currentPosition);\n                                }\n                            })\n                            .bind(\"doubletap\", function() {\n                                that.view()._removeTaskTooltip();\n                                that.view()._removeOffsetTooltip();\n                            });\n                    }\n                }\n            },\n            _setPlanned: function(value) {\n                this.options.showPlannedTasks = value;\n                this.view().options.showPlannedTasks = value;\n            }\n        });\n\n        extend(true, GanttTimeline, { styles: timelineStyles });\n\n    })(window.kendo.jQuery);\n\n}));\n"]}