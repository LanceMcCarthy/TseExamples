{"version":3,"file":"kendo.filter.min.js","names":["factory","define","amd","editors","number","string","boolean","date","defaultValues","$","kendo","window","ui","Widget","ButtonGroup","CHANGE","NS","EQ","NEQ","FilterButtonGroup","extend","init","element","options","fn","call","this","name","value","undefined","_value","select","wrapper","find","trigger","button","attr","Filter","html","that","addClass","dataSource","operators","_getFieldsInfo","_modelChangeHandler","_modelChange","bind","_renderMain","expression","_addExpressionTree","filterModel","_renderApplyButton","expressionPreview","_previewContainer","insertAfter","children","eq","_createPreview","toJSON","_attachEvents","hasCustomOperators","events","applyButton","fields","mainLogic","messages","and","or","apply","close","addExpression","filterExpressionLabel","filterLogicLabel","mainFilterLogicLabel","addGroup","neq","startswith","contains","doesnotcontain","endswith","isnull","isnotnull","isempty","isnotempty","isnullorempty","isnotnullorempty","gte","gt","lte","lt","applyFilter","filter","_hasCustomOperators","_mapOperators","_hasFieldsFilter","filters","_removeEmptyGroups","destroy","off","_applyButton","setOptions","deepExtend","empty","getOptions","result","model","parent","uid","i","length","logic","_addGroup","_addExpression","on","e","preventDefault","currentTarget","icon","command","split","pop","_removeExpression","closest","parentContainer","expressionModel","parentUID","itemsContainer","next","field","_fields","_defaultField","itemHTML","findModel","set","_addNewModel","appendTo","template","type","fieldsLabel","ns","_addExpressionControls","_expressionChange","container","items","operatorsContainer","editorContainer","_appendOperators","_appendEditor","_bindModel","_showHideEditor","operatorsLabel","isFunction","editor","id","guid","operator","Object","keys","push","defaultValue","logicHTML","current","createdField","haveFields","childhtml","toLocaleUpperCase","label","_getOperatorText","indexOf","htmlEncode","previewFormat","toString","text","_addField","fieldInfo","editorTemplate","fieldsCollection","schema","Array","isArray","haveField","splice","sender","newField","unbind","remove","observable","first","parentModel","itemContainer","hasClass","siblings","format","hide","show","forEach","handler","findCustomOperators","temp","plugin","jQuery"],"sources":["kendo.filter.js"],"mappings":"CAAA,SAAWA,GACW,mBAAXC,QAAyBA,OAAOC,IAAMD,OAAO,CAAC,iBAAkB,yBAA0BD,GACjGA,IAFJ,EAGG,WACC,IAOIG,EAAU,CACVC,OAAU,uIACVC,OAAU,0MACVC,QAAW,mKACXC,KAAQ,oIAGRC,EAAgB,CAChBJ,OAAU,EACVE,SAAW,EACXD,OAAU,GACVE,KAAQ,KAwGZ,SAAUE,GACN,IAAIC,EAAQC,OAAOD,MACfE,EAAKF,EAAME,GACXC,EAASD,EAAGC,OACZC,EAAcF,EAAGE,YACjBC,EAAS,SACTC,EAAK,eACLC,EAAK,cACLC,EAAM,kBAENC,EAAoBL,EAAYM,OAAO,CACvCC,KAAM,SAASC,EAASC,GAEpBT,EAAYU,GAAGH,KAAKI,KADTC,KACoBJ,EAASC,IAG5CA,QAAS,CACLI,KAAM,qBAGVC,MAAO,SAASA,GACZ,QAAcC,IAAVD,EACA,OAAOF,KAAKI,OAEhBJ,KAAKI,OAASF,EACdd,EAAYU,GAAGO,OAAON,KAAKC,KAAMA,KAAKM,QAAQC,KAAK,WAAaL,EAAQ,MAAM,IAC9EF,KAAKQ,QAAQnB,IAGjBgB,OAAQ,SAASI,IACG,IAAZA,GACAT,KAAKE,MAAMnB,EAAE0B,GAAQC,KAAK,aAKlCC,EAASxB,EAAOO,OAAQ,CACxBC,KAAM,SAASC,EAASC,GACpB,IACIe,EADAC,EAAOb,KAGXb,EAAOW,GAAGH,KAAKI,KAAKc,EAAMjB,EAASC,GAEnCgB,EAAKjB,QAAUb,EAAEa,GAASkB,SAAS,qBACnCD,EAAKE,WAAalB,EAAQkB,WAC1BF,EAAKG,UAAYjC,EAAEW,OAAOmB,EAAKhB,QAAQmB,UAAWnB,EAAQmB,WAE1DH,EAAKI,iBACLJ,EAAKK,oBAAsBL,EAAKM,aAAaC,KAAKP,GAClDA,EAAKQ,cACDxB,EAAQyB,YACRT,EAAKU,mBAAmBV,EAAKW,aAEjCX,EAAKY,qBACDZ,EAAKhB,QAAQ6B,oBACRb,EAAKc,oBACNd,EAAKc,kBAAoB5C,EAAE,wCAAwC6C,YAAYf,EAAKjB,QAAQiC,WAAWC,GAAG,KAE9GlB,EAAOC,EAAKkB,eAAelB,EAAKW,YAAYQ,UAC5CnB,EAAKc,kBAAkBf,KAAKA,IAEhCC,EAAKoB,gBACLpB,EAAKqB,sBAGTC,OAAQ,CACJ9C,GAGJQ,QAAS,CACLI,KAAM,SACNc,WAAY,KACZO,WAAY,KACZc,aAAa,EACbC,OAAQ,GACRC,UAAW,MACXC,SAAU,CACNC,IAAK,MACLC,GAAI,KACJC,MAAO,QACPC,MAAO,QACPC,cAAe,iBACfP,OAAQ,SACRQ,sBAAuB,oBACvBC,iBAAkB,eAClBC,qBAAsB,oBACtB/B,UAAW,YACXgC,SAAU,aAEdhC,UAAW,CACPrC,OAAQ,CACJmD,GAAIvC,EACJ0D,IAAKzD,EACL0D,WAAY,cACZC,SAAU,WACVC,eAAgB,mBAChBC,SAAU,YACVC,OAAQ,UACRC,UAAW,cACXC,QAAS,WACTC,WAAY,eACZC,cAAe,eACfC,iBAAkB,aAEtBjF,OAAQ,CACJoD,GAAIvC,EACJ0D,IAAKzD,EACLoE,IAAK,8BACLC,GAAI,kBACJC,IAAK,2BACLC,GAAI,eACJT,OAAQ,UACRC,UAAW,eAEf1E,KAAM,CACFiD,GAAIvC,EACJ0D,IAAKzD,EACLoE,IAAK,uBACLC,GAAI,WACJC,IAAK,wBACLC,GAAI,YACJT,OAAQ,UACRC,UAAW,eAEf3E,QAAW,CACPkD,GAAIvC,EACJ0D,IAAKzD,KAKjBwE,YAAa,WACT,IAAIC,EAASjE,KAAKwB,YAAYQ,SAE1BhC,KAAKkE,qBACLlE,KAAKmE,cAAcF,GAEnBjE,KAAKoE,iBAAiBH,EAAOI,SAAW,KACxCrE,KAAKsE,mBAAmBL,EAAOI,SAC/BrE,KAAKe,WAAWkD,OAAOA,IAEvBjE,KAAKe,WAAWkD,OAAO,KAI/BM,QAAS,WACLvE,KAAKJ,QAAQ4E,IAAIlF,GACjBN,EAAMuF,QAAQvE,KAAKJ,QAAQW,KAAK,yBAChCP,KAAK2B,kBAAoB,KACzB3B,KAAKyE,aAAe,KACpBzE,KAAKkB,oBAAsB,KAC3B/B,EAAOW,GAAGyE,QAAQxE,KAAKC,OAG3B0E,WAAY,SAAS7E,GACjBb,EAAM2F,WAAW3E,KAAKH,QAASA,GAC/BG,KAAKuE,UACLvE,KAAKJ,QAAQgF,QACb5E,KAAKL,KAAKK,KAAKJ,QAASI,KAAKH,UAGjCgF,WAAY,WACR,IAAIC,EAAS/F,EAAEW,QAAO,EAAM,GAAIM,KAAKH,SAIrC,cAHOiF,EAAO/D,WACd+D,EAAOxD,WAAatB,KAAKwB,YAAYQ,SAE9B8C,GAGXvD,mBAAoB,SAASwD,GACzB,GAAIA,EAAMV,QAEN,IADA,IAAIW,EAAShF,KAAKJ,QAAQW,KAAK,OAASwE,EAAME,IAAM,KAC3CC,EAAI,EAAGA,EAAIH,EAAMV,QAAQc,OAAQD,IAClCH,EAAMV,QAAQa,GAAGE,MACjBpF,KAAKqF,UAAUL,EAAQD,EAAMV,QAAQa,IAErClF,KAAKsF,eAAeN,EAAQD,EAAMV,QAAQa,IAE1CH,EAAMV,QAAQa,GAAGb,SACjBrE,KAAKuB,mBAAmBwD,EAAMV,QAAQa,KAMtDjD,cAAe,WACX,IAAIpB,EAAOb,KAEXa,EAAKjB,QAAQ2F,GAAG,QAAUjG,EAAI,mBAAoB,SAASkG,GACvDA,EAAEC,iBAEF,IAAIhF,EAAS1B,EAAEyG,EAAEE,eACbC,EAAOlF,EAAOF,KAAK,QACnBqF,GAAWD,EAAKR,OAASQ,EAAOlF,GAAQC,KAAK,SAASmF,MAAM,KAAKC,MAEtD,SAAXF,EACA/E,EAAKkF,kBAAkBtF,EAAOuF,QAAQ,eACpB,cAAXJ,EACP/E,EAAKyE,eAAe7E,EAAOuF,QAAQ,eACjB,SAAXJ,EACP/E,EAAKwE,UAAU5E,EAAOuF,QAAQ,eACZ,SAAXJ,GACP/E,EAAKmD,kBAKjBsB,eAAgB,SAASW,EAAiBlB,GACtC,IAIImB,EAJArF,EAAOb,KACPmG,EAAYF,EAAgBvF,KAAK,MACjC0F,EAAiBH,EAAgBD,QAAQ,qBAAqBK,KAAK,qBACnEC,EAAQvB,EAAQlE,EAAK0F,QAAQxB,EAAMuB,OAASzF,EAAK2F,cAEjDC,EAAW,GAEX1B,EACAmB,EAAkBnB,IAElBmB,EAAkBQ,EAAU7F,EAAKW,YAAa2E,IAEzB9B,SACjB6B,EAAgBS,IAAI,UAAW,IAGnCT,EAAkBrF,EAAK+F,aAAaV,EAAgB7B,QAASiC,IAG5DF,EAAejB,SAChBiB,EAAiBrH,EAAE,oCAAoC8H,SAASZ,EAAgBD,QAAQ,QAG5FS,EAAW1H,EAAEC,EAAM8H,SAhQ/B,63BAgQyB9H,CAAuC,CAChDqD,OAAQxB,EAAK0F,QACbvF,UAAWH,EAAKG,UAAUsF,EAAMS,MAChCpE,MAAO9B,EAAKhB,QAAQ0C,SAASI,MAC7BqE,YAAanG,EAAKhB,QAAQ0C,SAASF,OACnC4C,IAAKiB,EAAgBjB,IACrBgC,GAAIjI,EAAMiI,GACVpE,sBAAuBhC,EAAKhB,QAAQ0C,SAASM,yBAC7CgE,SAAST,GAEbvF,EAAKqG,uBAAuBT,EAASlG,KAAK,cAAe+F,EAAOJ,GAE3DnB,GACDlE,EAAKsG,qBAIbD,uBAAwB,SAASE,EAAWd,EAAO9E,GAC/C,IAAI6F,EAAQD,EAAU7G,KAAK,0BACvB+G,EAAqBD,EAAMvF,GAAG,GAC9ByF,EAAkBF,EAAMvF,GAAG,GAE/B9C,EAAMuF,QAAQ+C,GACdtI,EAAMuF,QAAQgD,GACdD,EAAmB1C,QACnB2C,EAAgB3C,QAEhB5E,KAAKwH,iBAAiBF,EAAoBhB,GAC1CtG,KAAKyH,cAAcF,EAAiBjB,GACpCtG,KAAK0H,WAAWN,EAAW5F,GAC3BxB,KAAK2H,gBAAgBP,EAAW5F,IAGpCgG,iBAAkB,SAASJ,EAAWd,GAClCvH,EAAEC,EAAM8H,SA7WhB,gNA6WU9H,CAAkC,CAChCgC,UAAWsF,EAAMtF,WAAasF,EAAMtF,UAAUsF,EAAMS,MAAQT,EAAMtF,UAAUsF,EAAMS,MAAQ/G,KAAKgB,UAAUsF,EAAMS,MAC/Ga,eAAgB5H,KAAKH,QAAQ0C,SAASvB,UACtCiG,GAAIjI,EAAMiI,MACVJ,SAASO,IAGjBK,cAAe,SAASL,EAAWd,GAC3BtH,EAAM6I,WAAWvB,EAAMwB,QACvBxB,EAAMwB,OAAOV,EAAWrI,EAAEW,QAAO,EAAM,GAAI,CAAE4G,MAAOA,EAAMrG,QAE1DlB,EAAEC,EAAM8H,SAASR,EAAMwB,OAArB9I,CAA6B,CAAEiI,GAAIjI,EAAMiI,GAAIX,MAAOA,EAAMrG,KAAM8H,GAAI/I,EAAMgJ,UAAWnB,SAASO,IAIxGR,aAAc,SAAS5B,EAAQsB,GAC3B,IAAI9E,EAGAyG,EAFAlB,EAAOT,EAAMS,KACb/F,EAAYsF,EAAMtF,UActB,OAZKA,IACDA,EAAYhB,KAAKH,QAAQmB,WAG7BiH,EAAWC,OAAOC,KAAKnH,EAAU+F,IAAO,GAExC/B,EAAOoD,KAAK,CAAE9B,MAAOA,EAAMrG,QAC3BuB,EAAcwD,EAAOA,EAAOG,OAAS,IAEzBwB,IAAI,QAASL,EAAM+B,cAC/B7G,EAAYmF,IAAI,WAAYsB,GAErBzG,GAGX6D,UAAW,SAASL,EAAQD,GACxB,IAIIuD,EAJAzH,EAAOb,KACPwB,EAAcX,EAAKW,YACnB2E,EAAYnB,EAAOtE,KAAK,MACxB0F,EAAiBpB,EAAOgB,QAAQ,qBAAqBK,KAAK,qBAG1DtB,EACAvD,EAAcuD,IAGdvD,EAAckF,EAAUlF,EAAa2E,IAEpB9B,SACb7C,EAAYmF,IAAI,UAAW,IAE/BnF,EAAY6C,QAAQ+D,KAAK,CAAEhD,MAAOvE,EAAKhB,QAAQyC,YAC/Cd,EAAcA,EAAY6C,QAAQ7C,EAAY6C,QAAQc,OAAS,IAG9DiB,EAAejB,SAChBiB,EAAiBrH,EAAE,oCAAoC8H,SAAS7B,EAAOgB,QAAQ,QAGnFsC,EAAYvJ,EAAEC,EAAM8H,SA1XhC,4xCA0X0B9H,CAAkC,CAC5CgC,UAAW,CACPwB,IAAK3B,EAAKhB,QAAQ0C,SAASC,IAC3BC,GAAI5B,EAAKhB,QAAQ0C,SAASE,IAE9BG,cAAe/B,EAAKhB,QAAQ0C,SAASK,cACrCI,SAAUnC,EAAKhB,QAAQ0C,SAASS,SAChCL,MAAO9B,EAAKhB,QAAQ0C,SAASI,MAC7BsE,GAAIjI,EAAMiI,GACVnE,iBAAkBjC,EAAKhB,QAAQ0C,SAASO,oBACxC+D,SAAST,GAEbvF,EAAK6G,WAAWY,EAAU/H,KAAK,cAAeiB,GAEzCuD,GACDlE,EAAKsG,qBAIbO,WAAY,SAASN,EAAWrC,GAC5BqC,EAAU1G,KAAK,KAAMqE,EAAME,KAE3BF,EAAM3D,KAAK,SAAUpB,KAAKkB,qBAC1BlC,EAAMoC,KAAKgG,EAAWrC,GAEtBqC,EAAUpC,SAAStE,KAAK1B,EAAM0B,KAAK,SAAS,IAGhDqB,eAAgB,SAASkC,GACrB,IAIIsE,EACAjC,EALA1F,EAAO,GACP4H,GAAe,EACfC,EAAazI,KAAKoE,iBAAiBH,EAAOI,SAAW,IACrDqE,EAAY,GAIhB,IAAKzE,EAAOI,UAAYJ,EAAOI,QAAQc,SAAWsD,EAC9C,MAAO,GAEX7H,GAAQ,kDACR,IAAK,IAAIsE,EAAI,EAAGA,EAAIjB,EAAOI,QAAQc,OAAQD,KACvCqD,EAAUtE,EAAOI,QAAQa,IAEbb,WACRqE,EAAY1I,KAAK+B,eAAewG,MAExBC,IACA5H,GAAQ,4CAA8CqD,EAAOmB,MAAMuD,oBAAsB,YAE7FH,GAAe,GAEnB5H,GAAQ8H,GAERH,EAAQjC,QACRA,EAAQtG,KAAKuG,QAAQgC,EAAQjC,OACzBkC,IACA5H,GAAQ,4CAA8CqD,EAAOmB,MAAMuD,oBAAsB,YAE7FH,GAAe,EACf5H,GAAQ,wCAA0C0F,EAAMsC,MAAQ,UAChEhI,GAAQ,4CAA8CZ,KAAK6I,iBAAiBN,EAAQjC,MAAOiC,EAAQN,UAC/FM,EAAQN,SAASa,QAAQ,MAAQ,GACjClI,GAAQ,WACRA,GAAQ,yCAA2C5B,EAAM+J,WAAWzC,EAAM0C,cAAgBhK,EAAMiK,SAASV,EAAQrI,MAAOoG,EAAM0C,eAAiBT,EAAQrI,OAAS,YAEhKU,GAAQ,WAKpB,OADAA,GAAQ,mDAIZuG,kBAAmB,WACf,IAAItG,EAAOb,KACPiE,EAASpD,EAAKW,YAAYQ,SAC1BpB,EAAO,GAEPC,EAAKhB,QAAQ6B,oBACbd,EAAOC,EAAKkB,eAAekC,GAC3BpD,EAAKc,kBAAkBf,KAAKA,IAGhCC,EAAKL,QAAQnB,EAAQ,CAAEiC,WAAY2C,KAGvC4E,iBAAkB,SAASvC,EAAO2B,GAC9B,IAAIlB,EAAO/G,KAAKuG,QAAQD,GAAOS,KAC3B/F,EAAYhB,KAAKuG,QAAQD,GAAOtF,UAMpC,OAJKA,IACDA,EAAYhB,KAAKH,QAAQmB,WAGtBA,EAAU+F,GAAMkB,GAAUiB,MAAQlI,EAAU+F,GAAMkB,IAG7DkB,UAAW,SAASC,EAAW9C,GAC3B,IAAIzF,EAAOb,KACXoJ,EAAYrK,EAAEW,QAAO,EAAM,GAAI,CAC3BO,KAAMmJ,EAAUnJ,MAAQqG,EACxBwB,OAAQsB,EAAUC,gBAAkB5K,EAAQ2K,EAAUrC,MAAQ,UAC9DsB,aAAee,EAAUf,eAA2C,IAA3Be,EAAUf,cAAqD,IAA3Be,EAAUf,aAAsBe,EAAUf,aAAevJ,EAAcsK,EAAUrC,MAAQ,UACtKA,KAAMqC,EAAUrC,MAAQ,SACxB6B,MAAOQ,EAAUR,OAASQ,EAAUnJ,MAAQqG,EAC5CtF,UAAWoI,EAAUpI,UACrBgI,cAAeI,EAAUJ,gBAE7BnI,EAAK0F,QAAQ6C,EAAUnJ,MAAQmJ,EAC1BvI,EAAK2F,gBACN3F,EAAK2F,cAAgB4C,IAI7BnI,eAAgB,WACZ,IAEImI,EAFAvI,EAAOb,KACPsJ,EAAmBzI,EAAKhB,QAAQwC,OAAO8C,OAAStE,EAAKhB,QAAQwC,QAAUxB,EAAKhB,QAAQkB,WAAWlB,QAAQ0J,OAAOxE,OAAS,IAAI1C,OAK/H,GAFAxB,EAAK0F,QAAU,GAEXiD,MAAMC,QAAQH,GACd,IAAK,IAAIpE,EAAI,EAAGA,EAAIoE,EAAiBnE,OAAQD,IACzCkE,EAAYE,EAAiBpE,GAC7BrE,EAAKsI,UAAUC,QAGnB,IAAK,IAAI9C,KAASgD,EACdF,EAAYE,EAAiBhD,GAC7BzF,EAAKsI,UAAUC,EAAW9C,IAKtClC,iBAAkB,SAASC,EAASqF,GAChCA,IAAcA,EAEd,IAAK,IAAIxE,EAAI,EAAGA,EAAIb,EAAQc,OAAQD,IAIhC,GAHIb,EAAQa,GAAGb,UACXqF,EAAY1J,KAAKoE,iBAAiBC,EAAQa,GAAGb,QAASqF,IAEtDrF,EAAQa,GAAGoB,MACX,OAAO,EAIf,OAAOoD,GAGXpF,mBAAoB,SAASD,GACzB,GAAKA,EAGL,IAAK,IAAIa,EAAIb,EAAQc,OAAS,EAAGD,GAAK,EAAGA,IAChCb,EAAQa,GAAGE,QAAUf,EAAQa,GAAGb,SAAaA,EAAQa,GAAGb,UAAYrE,KAAKoE,iBAAiBC,EAAQa,GAAGb,SACtGA,EAAQsF,OAAOzE,EAAG,GAIlBb,EAAQa,GAAGb,SACXrE,KAAKsE,mBAAmBD,EAAQa,GAAGb,UAK/ClD,aAAc,SAASqE,GACnB,IAAI3E,EAAOb,KACPoH,EAAYvG,EAAKjB,QAAQW,KAAK,OAASiF,EAAEoE,OAAO3E,IAAM,KAG1D,GADApE,EAAK8G,gBAAgBP,EAAW5B,EAAEoE,QAClB,UAAZpE,EAAEc,MAAN,CAOA,IAAIuD,EAAWrE,EAAEoE,OAAOtD,MACpBtB,EAASQ,EAAEoE,OAAO5E,SAClBsB,EAAQzF,EAAK0F,QAAQsD,GACrBrI,EAAcX,EAAK+F,aAAa5B,EAAQsB,GAE5Cd,EAAEoE,OAAOE,OAAO,SAAUjJ,EAAKK,qBAE/B8D,EAAO+E,OAAOvE,EAAEoE,QAEhB/I,EAAKqG,uBAAuBE,EAAWd,EAAO9E,GAE9CX,EAAKsG,wBAjBe,YAAZ3B,EAAEc,OACJzF,EAAKsG,qBAmBf9F,YAAa,WACT,IAAIR,EAAOb,KAEXjB,EA5lBR,6EA4lByB8H,SAAShG,EAAKjB,SAE3BiB,EAAKhB,QAAQyB,WACbT,EAAKW,YAAcxC,EAAMgL,WAAWnJ,EAAKhB,QAAQyB,YAEjDT,EAAKW,YAAcxC,EAAMgL,WAAW,CAChC5E,MAAOvE,EAAKhB,QAAQyC,YAI5BvD,EAAEC,EAAM8H,SAjmBhB,6wCAimBU9H,CAAkC,CAChCgC,UAAW,CACPwB,IAAK3B,EAAKhB,QAAQ0C,SAASC,IAC3BC,GAAI5B,EAAKhB,QAAQ0C,SAASE,IAE9BG,cAAe/B,EAAKhB,QAAQ0C,SAASK,cACrCI,SAAUnC,EAAKhB,QAAQ0C,SAASS,SAChCL,MAAO9B,EAAKhB,QAAQ0C,SAASI,MAC7BsC,IAAKpE,EAAKW,YAAYyD,IACtBgC,GAAIjI,EAAMiI,GACVlE,qBAAsBlC,EAAKhB,QAAQ0C,SAASQ,wBAC5C8D,SAAShG,EAAKjB,QAAQW,KAAK,MAAM0J,SAErCpJ,EAAK6G,WAAW7G,EAAKjB,QAAQW,KAAK,cAAc0J,QAASpJ,EAAKW,cAGlEuE,kBAAmB,SAASf,GACxB,IAIIkF,EACAnF,EALAlE,EAAOb,KACPmG,EAAYnB,EAAOtE,KAAK,MACxByJ,EAAgBnF,EAAOgB,QAAQ,MACtBmE,EAAcC,SAAS,wBAKhCD,EAAgBA,EAAc5J,KAAK,mBAC/BM,EAAKW,YAAY6C,UACjBxD,EAAKW,YAAY6C,QAAQO,eAClB/D,EAAKW,YAAY6C,WAI5B6F,GADAnF,EAAQ2B,EAAU7F,EAAKW,YAAa2E,IAChBnB,SACpBD,EAAM+E,OAAO,SAAUjJ,EAAKK,qBAC5BgJ,EAAYH,OAAOhF,GACdmF,EAAY/E,eACN+E,EAAYlF,SAASX,QAE3B8F,EAAcE,WAAWlF,SAC1BgF,EAAgBA,EAAcnF,WAItChG,EAAMuF,QAAQ4F,GACdA,EAAcJ,SACdlJ,EAAKsG,qBAGT1F,mBAAoB,WAChB,IAAIZ,EAAOb,KAENa,EAAKhB,QAAQuC,cAIbvB,EAAK4D,eACN5D,EAAK4D,aAAe1F,EAAEC,EAAMsL,OAAO,8JAA+JzJ,EAAKhB,QAAQ0C,SAASG,QAAQmE,SAAShG,EAAKjB,YAItP+H,gBAAiB,SAASP,EAAWrC,GACjC,IAAIA,EAAMK,MAAV,CAIA,IAAI6C,EAAWlD,EAAMkD,SACjBV,EAAkBH,EAAU7G,KAAK,0BAA0BuB,GAAG,GAClD,UAAZmG,GAAoC,aAAZA,GAAuC,WAAZA,GACvC,cAAZA,GAAwC,iBAAZA,GAA2C,oBAAZA,EAC3DV,EAAgBgD,OAEhBhD,EAAgBiD,SAIxBrG,cAAe,SAAS7C,GACpB,IAAIT,EAAOb,KACPsB,EAAW+C,SACX/C,EAAW+C,QAAQoG,SAAQ,SAASxG,GAChC,GAAIA,EAAOI,QACPxD,EAAKsD,cAAcF,OAChB,CACH,IAAIgE,EACA3B,EAAQzF,EAAK0F,QAAQtC,EAAOqC,OAC5BS,EAAOT,EAAMS,MAEbkB,EADA3B,EAAMtF,WAAasF,EAAMtF,UAAU+F,GAAM9C,EAAOgE,UACrC3B,EAAMtF,UAAU+F,GAAM9C,EAAOgE,UAE7BpH,EAAKG,UAAU+F,GAAM9C,EAAOgE,aAIvChE,EAAOgE,SAAWA,EAASyC,SAAWzG,EAAOgE,eAOjE/F,mBAAoB,WAChB,IAAIlB,EAAYjC,EAAEW,QAAO,EAAM,GAAIM,KAAKgB,WAExC,IAAK,IAAIsF,KAAStG,KAAKuG,QACnBvF,EAAYjC,EAAEW,QAAO,EAAM,GAAIsB,EAAWhB,KAAKuG,QAAQD,GAAOtF,WAElEhB,KAAKkE,oBAAsByG,EAAoB3J,MAKvD,SAAS2J,EAAoB3J,GACzB,IAAK,IAAIsF,KAAStF,EAAW,CACzB,IAAIiH,EAAWjH,EAAUsF,GACzB,GAAK2B,EAASyC,SAAuC,mBAArBzC,EAASyC,SAChB,iBAAbzC,GAAsC,OAAbA,GAAqB0C,EAAoB1C,GAC1E,OAAO,EAGf,OAAO,EAGX,SAASvB,EAAU3B,EAAOE,GAEtB,GAAIF,EAAME,MAAQA,EACd,OAAOF,EAGX,GAAIA,EAAMV,QACN,IAAK,IAAIa,EAAI,EAAGA,EAAIH,EAAMV,QAAQc,OAAQD,IAAK,CAC3C,IAAI0F,EAAOlE,EAAU3B,EAAMV,QAAQa,GAAID,GACvC,GAAI2F,EACA,OAAOA,GAMvB1L,EAAG2L,OAAOlK,GACVzB,EAAG2L,OAAOpL,GA1pBd,CA2pBGR,OAAOD,MAAM8L","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.core', 'kendo.buttongroup'], factory) :\n    factory();\n})((function () {\n    var __meta__ = {\n        id: \"filter\",\n        name: \"Filter\",\n        category: \"web\",\n        depends: [ \"core\", \"buttongroup\"]\n    };\n\n    var editors = {\n        \"number\": \"<input id='#=id#' type='text' aria-label='#=field#' title='#=field#' data-#=ns#role='numerictextbox' data-#=ns#bind='value: value'/>\",\n        \"string\": \"<span class='k-textbox k-input k-input-md k-rounded-md k-input-solid'><input id='#=id#' type='text' aria-label='#=field#' title='#=field#' class='k-input-inner' data-#=ns#bind='value: value'/></span>\",\n        \"boolean\": \"<input id='#=id#' class='k-checkbox k-checkbox-md k-rounded-md' aria-label='#=field#' data-#=ns#role='checkbox' data-#=ns#bind='checked: value' type='checkbox'>\",\n        \"date\": \"<input id='#=id#' type='text' aria-label='#=field#' title='#=field#' data-#=ns#role='datepicker' data-#=ns#bind='value: value'/>\"\n    };\n\n    var defaultValues = {\n        \"number\": 0,\n        \"boolean\": false,\n        \"string\": \"\",\n        \"date\": \"\"\n    };\n\n    var operatorsTemplate =\n        \"<select data-#=ns#bind='value: operator' title='#=operatorsLabel#' data-#=ns#role='dropdownlist'>\" +\n            \"#for(var op in operators){#\" +\n                \"<option value='#=op#'>#=operators[op].text || operators[op]#</option>\" +\n            \"#}#\" +\n        \"</select>\";\n\n    var logicTemplate =\n        \"<div data-#=ns#bind='value: logic' data-#=ns#role='filterbuttongroup'>\" +\n            \"#for(var op in operators){#\" +\n                \"<span value='#=op#'>#=operators[op]#</span>\" +\n            \"#}#\" +\n        \"</div>\";\n\n    var mainContainer =\n        \"<ul class='k-filter-container'>\" +\n            \"<li class='k-filter-group-main'></li>\" +\n        \"</ul>\";\n\n    var mainLogicTemplate =\n        \"<div class='k-filter-toolbar'>\" +\n            \"<div role='toolbar' aria-label='#=mainFilterLogicLabel#' class='k-toolbar' id='#=uid#'>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    logicTemplate +\n                \"</div>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    \"<button data-role='button' class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button' role='button' aria-disabled='false' title='#=addExpression#' aria-label='#=addExpression#' tabindex='0'>\" +\n                        \"<span class='k-button-icon k-icon k-i-filter-add-expression'>\" +\n                        \"</span>\" +\n                    \"</button>\" +\n                \"</div>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    \"<button data-role='button' class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button' role='button' aria-disabled='false' title='#=addGroup#' aria-label='#=addGroup#' tabindex='0'>\" +\n                        \"<span class='k-button-icon k-icon k-i-filter-add-group'>\" +\n                        \"</span>\" +\n                    \"</button>\" +\n                \"</div>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    \"<button data-role='button' class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' role='button' title='#=close#' aria-label='#=close#' aria-disabled='false' tabindex='0'>\" +\n                        \"<span class='k-button-icon k-icon k-i-close'>\" +\n                        \"</span>\" +\n                    \"</button>\" +\n                \"</div>\" +\n            \"</div>\" +\n        \"</div>\";\n\n    var logicItemTemplate =\n    \"<li class='k-filter-item'>\" +\n        \"<div class='k-filter-toolbar'>\" +\n            \"<div role='toolbar' aria-label='#=filterLogicLabel#' class='k-toolbar'>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    logicTemplate +\n                \"</div>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    \"<button data-role='button' class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button' role='button' title='#=addExpression#' aria-label='#=addExpression#' aria-disabled='false' tabindex='0'>\" +\n                        \"<span class='k-button-icon k-icon k-i-filter-add-expression'>\" +\n                        \"</span>\" +\n                    \"</button>\" +\n                \"</div>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    \"<button data-role='button' class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button' role='button' title='#=addGroup#' aria-label='#=addGroup#' aria-disabled='false' tabindex='0'>\" +\n                        \"<span class='k-button-icon k-icon k-i-filter-add-group'>\" +\n                        \"</span>\" +\n                    \"</button>\" +\n                \"</div>\" +\n                \"<div class='k-filter-toolbar-item'>\" +\n                    \"<button data-role='button' class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' role='button' title='#=close#' aria-label='#=close#' aria-disabled='false' tabindex='0'>\" +\n                        \"<span class='k-button-icon k-icon k-i-close'>\" +\n                        \"</span>\" +\n                    \"</button>\" +\n                \"</div>\" +\n            \"</div>\" +\n        \"</div>\" +\n    \"</li>\";\n\n    var expressionItemTemplate =\n    \"<li class='k-filter-item'>\" +\n        \"<div class='k-filter-toolbar'>\" +\n           \"<div role='group' aria-label='#=filterExpressionLabel#' class='k-toolbar' id='#=uid#'>\" +\n             \"<div class='k-filter-toolbar-item k-filter-field'>\" +\n                \"<select data-#=ns#bind='value: field' title='#=fieldsLabel#' class='k-filter-dropdown' data-auto-width='true' data-#=ns#role='dropdownlist'>\" +\n                    \"#for(var current in fields){#\" +\n                        \"<option value='#=fields[current].name#'>#=fields[current].label#</option>\" +\n                    \"#}#\" +\n                \"</select>\" +\n             \"</div>\" +\n             \"<div class='k-filter-toolbar-item k-filter-operator'>\" +\n             \"</div>\" +\n             \"<div class='k-filter-toolbar-item k-filter-value'>\" +\n             \"</div>\" +\n             \"<div class='k-filter-toolbar-item'>\" +\n                \"<button data-role='button' class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' role='button' title='#=close#' aria-label='#=close#' aria-disabled='false' tabindex='0'>\" +\n                    \"<span class='k-button-icon k-icon k-i-close'>\" +\n                    \"</span>\" +\n                \"</button>\" +\n             \"</div>\" +\n           \"</div>\" +\n        \"</div>\" +\n    \"</li>\";\n\n\n    (function($) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            Widget = ui.Widget,\n            ButtonGroup = ui.ButtonGroup,\n            CHANGE = \"change\",\n            NS = \".kendoFilter\",\n            EQ = \"Is equal to\",\n            NEQ = \"Is not equal to\";\n\n        var FilterButtonGroup = ButtonGroup.extend({\n            init: function(element, options) {\n                var that = this;\n                ButtonGroup.fn.init.call(that, element, options);\n            },\n\n            options: {\n                name: \"FilterButtonGroup\"\n            },\n\n            value: function(value) {\n                if (value === undefined) {\n                    return this._value;\n                }\n                this._value = value;\n                ButtonGroup.fn.select.call(this, this.wrapper.find(\"[value='\" + value + \"']\")[0]);\n                this.trigger(CHANGE);\n            },\n\n            select: function(button) {\n                if (button !== -1) {\n                    this.value($(button).attr(\"value\"));\n                }\n            }\n        });\n\n        var Filter = Widget.extend( {\n            init: function(element, options) {\n                var that = this;\n                var html;\n\n                Widget.fn.init.call(that, element, options);\n\n                that.element = $(element).addClass(\"k-widget k-filter\");\n                that.dataSource = options.dataSource;\n                that.operators = $.extend(that.options.operators, options.operators);\n\n                that._getFieldsInfo();\n                that._modelChangeHandler = that._modelChange.bind(that);\n                that._renderMain();\n                if (options.expression) {\n                    that._addExpressionTree(that.filterModel);\n                }\n                that._renderApplyButton();\n                if (that.options.expressionPreview) {\n                    if (!that._previewContainer) {\n                        that._previewContainer = $('<div class=\"k-filter-preview\"></div>').insertAfter(that.element.children().eq(0));\n                    }\n                    html = that._createPreview(that.filterModel.toJSON());\n                    that._previewContainer.html(html);\n                }\n                that._attachEvents();\n                that.hasCustomOperators();\n            },\n\n            events: [\n                CHANGE\n            ],\n\n            options: {\n                name: \"Filter\",\n                dataSource: null,\n                expression: null,\n                applyButton: false,\n                fields: [],\n                mainLogic: \"and\",\n                messages: {\n                    and: \"And\",\n                    or: \"Or\",\n                    apply: \"Apply\",\n                    close: \"Close\",\n                    addExpression: \"Add Expression\",\n                    fields: \"Fields\",\n                    filterExpressionLabel: \"filter expression\",\n                    filterLogicLabel: \"filter logic\",\n                    mainFilterLogicLabel: \"main filter logic\",\n                    operators: \"Operators\",\n                    addGroup: \"Add Group\"\n                },\n                operators: {\n                    string: {\n                        eq: EQ,\n                        neq: NEQ,\n                        startswith: \"Starts with\",\n                        contains: \"Contains\",\n                        doesnotcontain: \"Does not contain\",\n                        endswith: \"Ends with\",\n                        isnull: \"Is null\",\n                        isnotnull: \"Is not null\",\n                        isempty: \"Is empty\",\n                        isnotempty: \"Is not empty\",\n                        isnullorempty: \"Has no value\",\n                        isnotnullorempty: \"Has value\"\n                    },\n                    number: {\n                        eq: EQ,\n                        neq: NEQ,\n                        gte: \"Is greater than or equal to\",\n                        gt: \"Is greater than\",\n                        lte: \"Is less than or equal to\",\n                        lt: \"Is less than\",\n                        isnull: \"Is null\",\n                        isnotnull: \"Is not null\"\n                    },\n                    date: {\n                        eq: EQ,\n                        neq: NEQ,\n                        gte: \"Is after or equal to\",\n                        gt: \"Is after\",\n                        lte: \"Is before or equal to\",\n                        lt: \"Is before\",\n                        isnull: \"Is null\",\n                        isnotnull: \"Is not null\"\n                    },\n                    \"boolean\": {\n                        eq: EQ,\n                        neq: NEQ\n                    }\n                }\n            },\n\n            applyFilter: function() {\n                var filter = this.filterModel.toJSON();\n\n                if (this._hasCustomOperators) {\n                    this._mapOperators(filter);\n                }\n                if (this._hasFieldsFilter(filter.filters || [])) {\n                    this._removeEmptyGroups(filter.filters);\n                    this.dataSource.filter(filter);\n                } else {\n                    this.dataSource.filter({});\n                }\n            },\n\n            destroy: function() {\n                this.element.off(NS);\n                kendo.destroy(this.element.find(\".k-filter-group-main\"));\n                this._previewContainer = null;\n                this._applyButton = null;\n                this._modelChangeHandler = null;\n                Widget.fn.destroy.call(this);\n            },\n\n            setOptions: function(options) {\n                kendo.deepExtend(this.options, options);\n                this.destroy();\n                this.element.empty();\n                this.init(this.element, this.options);\n            },\n\n            getOptions: function() {\n                var result = $.extend(true, {}, this.options);\n                delete result.dataSource;\n                result.expression = this.filterModel.toJSON();\n\n                return result;\n            },\n\n            _addExpressionTree: function(model) {\n                if (model.filters) {\n                    var parent = this.element.find(\"[id=\" + model.uid + \"]\");\n                    for (var i = 0; i < model.filters.length; i++) {\n                        if (model.filters[i].logic) {\n                            this._addGroup(parent, model.filters[i]);\n                        } else {\n                            this._addExpression(parent, model.filters[i]);\n                        }\n                        if (model.filters[i].filters) {\n                            this._addExpressionTree(model.filters[i]);\n                        }\n                    }\n                }\n            },\n\n            _attachEvents: function() {\n                var that = this;\n\n                that.element.on(\"click\" + NS, \"button.k-button\" , function(e) {\n                    e.preventDefault();\n\n                    var button = $(e.currentTarget);\n                    var icon = button.find(\"span\");\n                    var command = (icon.length ? icon : button).attr(\"class\").split(\"-\").pop();\n\n                    if (command == \"close\") {\n                        that._removeExpression(button.closest(\".k-toolbar\"));\n                    } else if (command == \"expression\") {\n                        that._addExpression(button.closest(\".k-toolbar\"));\n                    } else if (command == \"group\") {\n                        that._addGroup(button.closest(\".k-toolbar\"));\n                    } else if (command == \"apply\") {\n                        that.applyFilter();\n                    }\n                });\n            },\n\n            _addExpression: function(parentContainer, model) {\n                var that = this;\n                var parentUID = parentContainer.attr(\"id\");\n                var itemsContainer = parentContainer.closest(\".k-filter-toolbar\").next(\"ul.k-filter-lines\");\n                var field = model ? that._fields[model.field] : that._defaultField;\n                var expressionModel;\n                var itemHTML = \"\";\n\n                if (model) {\n                    expressionModel = model;\n                } else {\n                    expressionModel = findModel(that.filterModel, parentUID);\n\n                    if (!expressionModel.filters) {\n                        expressionModel.set(\"filters\", []);\n                    }\n\n                    expressionModel = that._addNewModel(expressionModel.filters, field);\n                }\n\n                if (!itemsContainer.length) {\n                    itemsContainer = $(\"<ul class='k-filter-lines'></ul>\").appendTo(parentContainer.closest(\"li\"));\n                }\n\n                itemHTML = $(kendo.template(expressionItemTemplate)({\n                    fields: that._fields,\n                    operators: that.operators[field.type],\n                    close: that.options.messages.close,\n                    fieldsLabel: that.options.messages.fields,\n                    uid: expressionModel.uid,\n                    ns: kendo.ns,\n                    filterExpressionLabel: that.options.messages.filterExpressionLabel\n                })).appendTo(itemsContainer);\n\n                that._addExpressionControls(itemHTML.find(\".k-toolbar\"), field, expressionModel);\n\n                if (!model) {\n                    that._expressionChange();\n                }\n            },\n\n            _addExpressionControls: function(container, field, filterModel) {\n                var items = container.find(\".k-filter-toolbar-item\");\n                var operatorsContainer = items.eq(1);\n                var editorContainer = items.eq(2);\n\n                kendo.destroy(operatorsContainer);\n                kendo.destroy(editorContainer);\n                operatorsContainer.empty();\n                editorContainer.empty();\n\n                this._appendOperators(operatorsContainer, field);\n                this._appendEditor(editorContainer, field);\n                this._bindModel(container, filterModel);\n                this._showHideEditor(container, filterModel);\n            },\n\n            _appendOperators: function(container, field) {\n                $(kendo.template(operatorsTemplate)({\n                    operators: field.operators && field.operators[field.type] ? field.operators[field.type] : this.operators[field.type],\n                    operatorsLabel: this.options.messages.operators,\n                    ns: kendo.ns\n                })).appendTo(container);\n            },\n\n            _appendEditor: function(container, field) {\n                if (kendo.isFunction(field.editor)) {\n                    field.editor(container, $.extend(true, {}, { field: field.name }));\n                } else {\n                    $(kendo.template(field.editor)({ ns: kendo.ns, field: field.name, id: kendo.guid() })).appendTo(container);\n                }\n            },\n\n            _addNewModel: function(parent, field) {\n                var filterModel;\n                var type = field.type;\n                var operators = field.operators;\n                var operator;\n                if (!operators) {\n                    operators = this.options.operators;\n                }\n\n                operator = Object.keys(operators[type])[0];\n\n                parent.push({ field: field.name });\n                filterModel = parent[parent.length - 1];\n\n                filterModel.set(\"value\", field.defaultValue);\n                filterModel.set(\"operator\", operator);\n\n                return filterModel;\n            },\n\n            _addGroup: function(parent, model) {\n                var that = this;\n                var filterModel = that.filterModel;\n                var parentUID = parent.attr(\"id\");\n                var itemsContainer = parent.closest(\".k-filter-toolbar\").next(\"ul.k-filter-lines\");\n                var logicHTML;\n\n                if (model) {\n                    filterModel = model;\n\n                } else {\n                    filterModel = findModel(filterModel, parentUID);\n\n                    if (!filterModel.filters) {\n                        filterModel.set(\"filters\", []);\n                    }\n                    filterModel.filters.push({ logic: that.options.mainLogic });\n                    filterModel = filterModel.filters[filterModel.filters.length - 1];\n                }\n\n                if (!itemsContainer.length) {\n                    itemsContainer = $(\"<ul class='k-filter-lines'></ul>\").appendTo(parent.closest(\"li\"));\n                }\n\n                logicHTML = $(kendo.template(logicItemTemplate)({\n                    operators: {\n                        and: that.options.messages.and,\n                        or: that.options.messages.or\n                    },\n                    addExpression: that.options.messages.addExpression,\n                    addGroup: that.options.messages.addGroup,\n                    close: that.options.messages.close,\n                    ns: kendo.ns,\n                    filterLogicLabel: that.options.messages.filterLogicLabel\n                })).appendTo(itemsContainer);\n\n                that._bindModel(logicHTML.find(\".k-toolbar\"), filterModel);\n\n                if (!model) {\n                    that._expressionChange();\n                }\n            },\n\n            _bindModel: function(container, model) {\n                container.attr(\"id\", model.uid);\n\n                model.bind(\"change\", this._modelChangeHandler);\n                kendo.bind(container, model);\n\n                container.parent().attr(kendo.attr(\"stop\"), true);\n            },\n\n            _createPreview: function(filter) {\n                var html = \"\";\n                var createdField = false;\n                var haveFields = this._hasFieldsFilter(filter.filters || []);\n                var childhtml = \"\";\n                var current;\n                var field;\n\n                if (!filter.filters || !filter.filters.length || !haveFields) {\n                    return \"\";\n                }\n                html += '<span class=\"k-filter-preview-bracket\">(</span>';\n                for (var i = 0; i < filter.filters.length; i++) {\n                    current = filter.filters[i];\n\n                    if (current.filters) {\n                        childhtml = this._createPreview(current);\n                        if (childhtml) {\n                            if (createdField) {\n                                html += '<span class=\"k-filter-preview-operator\"> ' + filter.logic.toLocaleUpperCase() + ' </span>';\n                            }\n                            createdField = true;\n                        }\n                        html += childhtml;\n                    }\n                    if (current.field) {\n                        field = this._fields[current.field];\n                        if (createdField) {\n                            html += '<span class=\"k-filter-preview-operator\"> ' + filter.logic.toLocaleUpperCase() + ' </span>';\n                        }\n                        createdField = true;\n                        html += '<span class=\"k-filter-preview-field\">' + field.label + '</span>';\n                        html += '<span class=\"k-filter-preview-criteria\"> ' + this._getOperatorText(current.field, current.operator);\n                        if (current.operator.indexOf(\"is\") < 0) {\n                            html += ' </span>';\n                            html += \"<span class='k-filter-preview-value'>'\" + kendo.htmlEncode(field.previewFormat ? kendo.toString(current.value, field.previewFormat) : current.value) + \"'</span>\";\n                        } else {\n                            html += '</span>';\n                        }\n                    }\n                }\n                html += '<span class=\"k-filter-preview-bracket\">)</span>';\n                return html;\n            },\n\n            _expressionChange: function() {\n                var that = this;\n                var filter = that.filterModel.toJSON();\n                var html = \"\";\n\n                if (that.options.expressionPreview) {\n                    html = that._createPreview(filter);\n                    that._previewContainer.html(html);\n                }\n\n                that.trigger(CHANGE, { expression: filter });\n            },\n\n            _getOperatorText: function(field, operator) {\n                var type = this._fields[field].type;\n                var operators = this._fields[field].operators;\n\n                if (!operators) {\n                    operators = this.options.operators;\n                }\n\n                return operators[type][operator].text || operators[type][operator];\n            },\n\n            _addField: function(fieldInfo, field) {\n                var that = this;\n                fieldInfo = $.extend(true, {}, {\n                    name: fieldInfo.name || field,\n                    editor: fieldInfo.editorTemplate || editors[fieldInfo.type || \"string\"],\n                    defaultValue: (fieldInfo.defaultValue || fieldInfo.defaultValue === false || fieldInfo.defaultValue === 0) ? fieldInfo.defaultValue : defaultValues[fieldInfo.type || \"string\"],\n                    type: fieldInfo.type || \"string\",\n                    label: fieldInfo.label || fieldInfo.name || field,\n                    operators: fieldInfo.operators,\n                    previewFormat: fieldInfo.previewFormat\n                });\n                that._fields[fieldInfo.name] = fieldInfo;\n                if (!that._defaultField) {\n                    that._defaultField = fieldInfo;\n                }\n            },\n\n            _getFieldsInfo: function() {\n                var that = this;\n                var fieldsCollection = that.options.fields.length ? that.options.fields : (that.options.dataSource.options.schema.model || {}).fields;\n                var fieldInfo;\n\n                that._fields = {};\n\n                if (Array.isArray(fieldsCollection)) {\n                    for (var i = 0; i < fieldsCollection.length; i++) {\n                        fieldInfo = fieldsCollection[i];\n                        that._addField(fieldInfo);\n                    }\n                } else {\n                    for (var field in fieldsCollection) {\n                        fieldInfo = fieldsCollection[field];\n                        that._addField(fieldInfo, field);\n                    }\n                }\n            },\n\n            _hasFieldsFilter: function(filters, haveField) {\n                haveField = !!haveField;\n\n                for (var i = 0; i < filters.length; i++) {\n                    if (filters[i].filters) {\n                        haveField = this._hasFieldsFilter(filters[i].filters, haveField);\n                    }\n                    if (filters[i].field) {\n                        return true;\n                    }\n                }\n\n                return haveField;\n            },\n\n            _removeEmptyGroups: function(filters) {\n                if (!filters) {\n                    return;\n                }\n                for (var i = filters.length - 1; i >= 0; i--) {\n                    if ((filters[i].logic && !filters[i].filters) || (filters[i].filters && !this._hasFieldsFilter(filters[i].filters)) ) {\n                        filters.splice(i, 1);\n                        continue;\n                    }\n\n                    if (filters[i].filters) {\n                        this._removeEmptyGroups(filters[i].filters);\n                    }\n                }\n            },\n\n            _modelChange: function(e) {\n                var that = this;\n                var container = that.element.find(\"[id=\" + e.sender.uid + \"]\");\n\n                that._showHideEditor(container, e.sender);\n                if (e.field !== \"field\") {\n                    if (e.field !== \"filters\") {\n                      that._expressionChange();\n                    }\n                    return;\n                }\n\n                var newField = e.sender.field;\n                var parent = e.sender.parent();\n                var field = that._fields[newField];\n                var filterModel = that._addNewModel(parent, field);\n\n                e.sender.unbind(\"change\", that._modelChangeHandler);\n\n                parent.remove(e.sender);\n\n                that._addExpressionControls(container, field, filterModel);\n\n                that._expressionChange();\n            },\n\n            _renderMain: function() {\n                var that = this;\n\n                $(mainContainer).appendTo(that.element);\n\n                if (that.options.expression) {\n                    that.filterModel = kendo.observable(that.options.expression);\n                } else {\n                    that.filterModel = kendo.observable({\n                        logic: that.options.mainLogic\n                    });\n                }\n\n                $(kendo.template(mainLogicTemplate)({\n                    operators: {\n                        and: that.options.messages.and,\n                        or: that.options.messages.or\n                    },\n                    addExpression: that.options.messages.addExpression,\n                    addGroup: that.options.messages.addGroup,\n                    close: that.options.messages.close,\n                    uid: that.filterModel.uid,\n                    ns: kendo.ns,\n                    mainFilterLogicLabel: that.options.messages.mainFilterLogicLabel\n                })).appendTo(that.element.find(\"li\").first());\n\n                that._bindModel(that.element.find(\".k-toolbar\").first(), that.filterModel);\n            },\n\n            _removeExpression: function(parent) {\n                var that = this;\n                var parentUID = parent.attr(\"id\");\n                var itemContainer = parent.closest(\"li\");\n                var isMain = itemContainer.hasClass(\"k-filter-group-main\");\n                var parentModel;\n                var model;\n\n                if (isMain) {\n                    itemContainer = itemContainer.find(\".k-filter-lines\");\n                    if (that.filterModel.filters) {\n                        that.filterModel.filters.empty();\n                        delete that.filterModel.filters;\n                    }\n                } else {\n                    model = findModel(that.filterModel, parentUID);\n                    parentModel = model.parent();\n                    model.unbind(\"change\", that._modelChangeHandler);\n                    parentModel.remove(model);\n                    if (!parentModel.length) {\n                        delete parentModel.parent().filters;\n                    }\n                    if (!itemContainer.siblings().length) {\n                        itemContainer = itemContainer.parent();\n                    }\n                }\n\n                kendo.destroy(itemContainer);\n                itemContainer.remove();\n                that._expressionChange();\n            },\n\n            _renderApplyButton: function() {\n                var that = this;\n\n                if (!that.options.applyButton) {\n                    return;\n                }\n\n                if (!that._applyButton) {\n                    that._applyButton = $(kendo.format('<button type=\"button\" aria-label=\"{0}\" title=\"{0}\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-filter-apply\">{0}</button>', that.options.messages.apply)).appendTo(that.element);\n                }\n            },\n\n            _showHideEditor: function(container, model) {\n                if (model.logic) {\n                    return;\n                }\n\n                var operator = model.operator;\n                var editorContainer = container.find(\".k-filter-toolbar-item\").eq(2);\n                if (operator == \"isnull\" || operator == \"isnotnull\" || operator == \"isempty\" ||\n                    operator == \"isnotempty\" || operator == \"isnullorempty\" || operator == \"isnotnullorempty\") {\n                    editorContainer.hide();\n                } else {\n                    editorContainer.show();\n                }\n            },\n\n            _mapOperators: function(expression) {\n                var that = this;\n                if (expression.filters) {\n                    expression.filters.forEach(function(filter) {\n                        if (filter.filters) {\n                            that._mapOperators(filter);\n                        } else {\n                            var operator;\n                            var field = that._fields[filter.field];\n                            var type = field.type;\n                            if (field.operators && field.operators[type][filter.operator]) {\n                                operator = field.operators[type][filter.operator];\n                            } else {\n                                operator = that.operators[type][filter.operator];\n                            }\n\n                            if (operator) {\n                                filter.operator = operator.handler || filter.operator;\n                            }\n                        }\n                    });\n                }\n            },\n\n            hasCustomOperators: function() {\n                var operators = $.extend(true, {}, this.operators);\n\n                for (var field in this._fields) {\n                    operators = $.extend(true, {}, operators, this._fields[field].operators);\n                }\n                this._hasCustomOperators = findCustomOperators(operators);\n            }\n\n        });\n\n        function findCustomOperators(operators) {\n            for (var field in operators) {\n                var operator = operators[field];\n                if ((operator.handler && typeof operator.handler === \"function\") ||\n                    (typeof operator === 'object' && operator !== null && findCustomOperators(operator))) {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        function findModel(model, uid) {\n\n            if (model.uid === uid) {\n                return model;\n            }\n\n            if (model.filters) {\n                for (var i = 0; i < model.filters.length; i++) {\n                    var temp = findModel(model.filters[i], uid);\n                    if (temp) {\n                        return temp;\n                    }\n                }\n            }\n        }\n\n        ui.plugin(Filter);\n        ui.plugin(FilterButtonGroup);\n    })(window.kendo.jQuery);\n\n}));\n"]}