/**
 * Kendo UI v2022.3.1109 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e){"function"==typeof define&&define.amd?define(["kendo.scheduler.view.min","kendo.multiviewcalendar.min","kendo.tooltip.min"],e):e()}((function(){var e,t,n,a,i,o,r,l,s,d,c,u,p,v,f,h,y;e=window.kendo.jQuery,t=window.kendo,n=t.ui,a=n.SchedulerView,i=e.extend,o=t.template,r=t.date.firstDayOfYear,l=t.date.firstDayOfMonth,s=t.date.lastDayOfMonth,d="navigate",c="keydown",u="click",p="focus",v=".kendoYearView",f={layout:"k-scheduler-layout k-scheduler-layout-flex k-scheduler-yearview",body:"k-scheduler-body",tooltip:"k-scheduler-tooltip",indicator:"k-day-indicator",event:"k-tooltip-event",hidden:"k-hidden",calendarView:"k-calendar-view",scheduler:"k-scheduler"},h=o("<div class='k-tooltip-title k-text-center'><div class='k-month'>#:kendo.format('{0:MMM}', date)#</div><div tabindex='0' class='k-link k-day k-text-primary'>#:kendo.format('{0:dd}', date)#</div></div>#if(events.length){#<div class='k-tooltip-events-container'><div class='k-tooltip-events'>#for(var i = 0; i < events.length; i+=1){##var event = events[i]#<div class='k-tooltip-event k-event' title='#:event.title#'# if (event.resources[0]) { #style='background-color: #: event.resources[0].color #; border-color: #: event.resources[0].color #;'#}#><div class='k-event-title k-text-ellipsis'>#:event.title#</div><span class='k-spacer'></span><span class='k-event-time'>#:kendo.format('{0:t}', event.start)#</span></div>#}#</div></div>#} else {#<div class='k-no-data k-text-center'>#:messages.noData#</div>#}#"),y=a.extend({init:function(e,t){var n=this;a.fn.init.call(n,e,t),n._yearRange(),n._templates(),n._layout(),n._initCalendar(),n._initTooltip()},options:{title:"Year",name:"year",months:12,startDate:null,messages:{noData:"No events on this date."},selectedDateFormat:"{0:yyyy}",selectedShortDateFormat:"{0:yyyy}",selectedMobileDateFormat:"{0:yyyy}",tooltipTemplate:h},name:"year",events:[d],_yearRange:function(){var e,t=this,n=t.options;t._startDate=n.startDate?l(n.startDate):r(n.date),t._startDate.setFullYear(n.date.getFullYear()),(e=new Date(t._startDate)).setMonth(e.getMonth()+n.months),t._endDate=e},_templates:function(){var e=this.options,n=i({},t.Template,e.templateSettings);this.tooltipTemplate=t.template(e.tooltipTemplate,n)},_layout:function(){var t=this,n=f;t.content=e("<div/>").addClass(n.layout),t.element.append(t.content),t.body=e("<div/>").addClass(n.body),t.content.append(t.body)},_initCalendar:function(){var t,a,i=this,o=i.options,r=e("<div/>");i.body.append(r),i.calendar=t=new n.MultiViewCalendar(r,{views:o.months,value:i.startDate(),showViewHeader:!0,footer:!1}),a=t.element,o.selectable||i._disableCalendarSelection(),t.value(null),t.header.toggleClass(f.hidden),a.on(u+v,"td[role='gridcell']",i._calendarCellClick.bind(i)),a.on(c+v,"."+f.calendarView,i._calendarKeydown.bind(i)),t.bind(d,i._calendarNavigate.bind(i))},_calendarCellClick:function(e){var t=this.calendar.selectable.value().first();e.preventDefault(),e.stopPropagation(),this._displayTooltip(t)},_calendarKeydown:function(e){var n=t.keys,a=e.keyCode;a!=n.ENTER&&a!=n.SPACEBAR||(e.preventDefault(),this._displayTooltip(this.calendar.selectable.value().first()))},_calendarNavigate:function(e){var t=this,n=e.sender._firstViewValue<t.startDate()?t.previousDate():t.nextDate();t.trigger(d,{view:"year",date:n}),t._focusCellOnNavigate()},_focusCellOnNavigate:function(){var e,t=this,n=t.calendar||t.element.find(".k-calendar").getKendoMultiViewCalendar();n&&(e=n._firstViewValue<t.startDate()?t.lastDateInRange():t.nextDate(),n._focusCell(n._cellByDate(e),!0))},_disableCalendarSelection:function(){var e=this;e.calendar&&(e.calendar.value(null),e.calendar.element.off(c,e.calendar._move))},_initTooltip:function(){var e=this,t=e.content,a=e._buildTooltipTemplate.bind(e);e.tooltip=new n.Tooltip(t,{filter:".k-calendar td[role='gridcell']",showOn:u,position:"right",content:a,width:220}),e._initTooltipPopup(),e.tooltip.bind("show",e._tooltipShow.bind(e)),e.tooltip.bind("hide",e._tooltipHide.bind(e))},_initTooltipPopup:function(){var e=this,t=e.tooltip;e.tooltip&&(t._initPopup(),t.popup.element.addClass(f.tooltip),t.popup.element.on(u+v,".k-tooltip-title > .k-day",e._tooltipTitleClick.bind(e)),t.popup.element.on(c+v,e,e._tooltipKeydown.bind(e)))},_buildTooltipTemplate:function(){var e=this,n=t.parseDate(e.calendar.current()),a=e.eventsByDate||[];return(a=a.filter((function(e){return t.toString(new Date(e.value),"d")==t.toString(n,"d")})))&&a[0]&&a[0].items.map((function(t){t.resources=e.eventResources(t)||[]})),e.tooltipTemplate({date:n,events:a[0]?a[0].items:[],messages:e.options.messages})},_inverseTooltipEventsColor:function(){var t=this;e.each(t.tooltip.popup.element.find("."+f.event),(function(){t._inverseEventColor(e(this))}))},_tooltipShow:function(e){var t=e.sender;t.refresh(),this._inverseTooltipEventsColor(),t.popup.element.find(":kendoFocusable").first().trigger(p)},_tooltipHide:function(){var e=this.calendar;e&&e.focus()},_tooltipTitleClick:function(){this._navigateToDayView()},_tooltipKeydown:function(n){var a=this.tooltip.popup.element,i=e(n.target),o=t.keys,r=n.keyCode,l=n.shiftKey;if((i.is(".k-day")&&r==o.ENTER||r==o.SPACEBAR)&&(n.preventDefault(),this._navigateToDayView()),r==o.TAB){var s=a.find(":kendoFocusable").first(),d=a.find(":kendoFocusable").last();l&&i.is(s)?(d.trigger(p),n.preventDefault()):i.is(d)&&(s.trigger(p),n.preventDefault())}},_navigateToDayView:function(){e.grep(this.options.views,(function(t){return e.isPlainObject(t)&&"kendo.ui.DayView"==t.type||"day"===t})).length&&this.trigger(d,{view:"day",date:this.calendar.current()})},_displayTooltip:function(e){var t=this;e.length&&(t.options.selectable||e.removeClass("k-selected"),setTimeout((function(){t.tooltip.show(e)}),50))},_renderEventIndicators:function(){var t,n,a=this.calendar;a.element.find("."+f.indicator).remove(),this.eventsByDate.forEach((function(i){t=a._currentView.toDateString(new Date(i.value)),n=a.element[0].querySelector("[data-value='"+t+"']"),i.items.length&&e("<span/>").addClass(f.indicator).appendTo(n)}))},_groupEventsByDate:function(e){var n;return e.length?(n=e.map((function(e){return e.formattedDate=e.start.toDateString(),e})),new t.data.Query(n).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).group({field:"formattedDate"}).toArray()):[]},_resourceBySlot:function(){return{}},lastDateInRange:function(){var e=new Date(this.previousDate());return e.setMonth(e.getMonth()-1+this.options.months),s(e)},nextDate:function(){return t.date.nextYear(this._startDate)},previousDate:function(){return t.date.previousYear(this._startDate)},startDate:function(){return this._startDate},endDate:function(){return this._endDate},moveToEvent:function(){return!1},constrainSelection:function(){return!1},inRange:function(){return!0},select:function(e){this.clearSelection(),e.start>=this.startDate()&&e.start<this.endDate()?this.calendar.value(e.start):(this.calendar.value(this.calendar._firstViewValue),e.start=e.end=this.calendar.value()),this.current(this.calendar.selectable.value()[0])},selectionByElement:function(n){if(n.length)return n=e(n),{index:this.calendar._index,start:t.calendar.toDateObject(n),end:t.calendar.toDateObject(n),isAllDay:!1,uid:0}},current:function(e){if(void 0===e)return this._current;this._current=e},render:function(e){var t=this;t._cachedEvents=e,t.eventsByDate=t._groupEventsByDate(e)||[],t._renderEventIndicators(),t.trigger("activate")},destroy:function(){var e=this;e.tooltip&&(e.tooltip.destroy(),e.tooltip=null),e.calendar&&(e.calendar.destroy(),e.calendar=null),e.element&&(e.content.remove(),e.element.off(v)),a.fn.destroy.call(this)}}),i(!0,n,{YearView:y})}));
//# sourceMappingURL=kendo.scheduler.yearview.min.js.map
