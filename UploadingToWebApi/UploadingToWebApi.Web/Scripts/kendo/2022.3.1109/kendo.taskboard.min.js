/**
 * Kendo UI v2022.3.1109 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e){"function"==typeof define&&define.amd?define(["kendo.toolbar.min","kendo.sortable.min","kendo.core.min","kendo.menu.min","kendo.dialog.min","kendo.form.min","kendo.data.min"],e):e()}((function(){var e,t,a,n,o,r,s,i,d,l;e=window.kendo.jQuery,t=window.kendo,a=e.extend,n=t.ui.ToolBar,o=t.toolbar.Item,r="action",s="change",i=".taskBoardToolbar",d=n.extend({init:function(e,t){var a=this;a._extendOptions(t),n.fn.init.call(a,e,t),a._attachEvents()},events:n.fn.events.concat([r]),defaultTools:{addColumn:{type:"button",text:"Add Column",name:"addColumn",command:"AddColumnCommand",icon:"plus",rules:"isEditable"},spacer:{type:"spacer"},search:{type:"TaskBoardSearch",text:"Search",name:"search",command:"SearchCommand",icon:"search",overflow:"never",rules:"isSearchable"}},_attachEvents:function(){var e=this;e.bind("toggle",e._click.bind(e)),e.bind("close",e._click.bind(e)),e.bind("click",e._click.bind(e)),e.bind(s,e._change.bind(e))},_extendOptions:function(e){var t=this,a=e.items?e.items:Object.keys(t.defaultTools);e.navigateOnTab=!0,t.options=e,t.options.items=t._extendToolsOptions(a)},_extendToolsOptions:function(n){var o=this,r=o.options.messages;if(n.length)return n.map((function(n){var s,i={};return n=e.isPlainObject(n)&&1===Object.keys(n).length&&n.name?n.name:n,s=e.isPlainObject(n)?n:a({},o.defaultTools[n]||{name:n,command:n+"Command",type:"button"}),o._validateRules(s)?(i[t.attr("command")]=s.command,i[t.attr("options")]=s.options,t.deepExtend(s,{id:s.id||s.name+"-"+t.guid(),name:s.name,text:r[s.name]||s.name,attributes:a({"aria-label":r[s.name]||s.name,title:r[s.name]},i),overflow:s.overflow}),"buttonGroup"===s.type&&(s.buttons=s.buttons.map(o._mapButtonGroups.bind(o))),"splitButton"===s.type&&(s.menuButtons=s.menuButtons.map(o._mapMenuButtons.bind(o))),s):{hidden:!0}}),o)},_mapButtonGroups:function(e){var n=this.options.messages,o={};return o[t.attr("command")]=e.command,o[t.attr("options")]=e.options,t.deepExtend(e,{attributes:a({},e.attributes,{"aria-label":n[e.name],title:n[e.name]},o)})},_mapMenuButtons:function(e){var n=this.options.messages,o={};return o[t.attr("command")]=e.command,o[t.attr("options")]=e.options,t.deepExtend(e,{text:n[e.name],attributes:a({},e.attributes,{"aria-label":n[e.name],title:n[e.name]},o)})},_validateRules:function(e){var t=this.options.states,a=e.rules?e.rules.split(";"):[];if(!a.length)return!0;for(var n=0;n<a.length;n++)if(!t[a[n]])return!1;return!0},_click:function(a){var n=e(a.target).attr(t.attr("command")),o=e(a.target).attr(t.attr("options"));n&&this.action({command:n,options:o})},_change:function(n){var o=e(n.target).attr(t.attr("command")),r=e(n.target).attr(t.attr("options"));r=a({},r,{value:e(n.target).val()}),o&&this.action({command:o,options:r})},isToolEnabled:function(e){for(var t=this.options,a=!1,n=0;n<t.items.length;n++)if(t.items[n].name==e){a=!0;break}return t.items[e]||a},action:function(e){this.trigger(r,e)},destroy:function(){this.search&&this.search.destroy(),n.fn.destroy.call(this)}}),l=o.extend({init:function(t,a){var n=this,o=d.styles,r=e("<span class='"+o.searchbox+"'></span>"),s=e("<span class='"+o.searchInputIcon+"'></span>"),i=e("<input class='"+o.searchInput+"' autocomplete='off' />");n.element=r,n.input=i,n.icon=s,n.options=t,n.options.type="taskBoardSearch",n.toolbar=a,n.attributes(),n.renderIcon(),n.addUidAttr(),n.addIdAttr(),n.addOverflowAttr(),n.input.attr({placeholder:n.options.text,title:n.options.text}),n.element.append(s).append(n.input),n._bindEvents(),n.toolbar.search=n},attributes:function(){this.options.attributes&&this.input.attr(this.options.attributes)},renderIcon:function(){this.options.icon&&this.icon.addClass(d.styles.searchIcon)},_bindEvents:function(){this._inputHandler=this._input.bind(this),this.input.on("input"+i,this._inputHandler)},_input:function(e){this.toolbar.trigger(s,{target:e.target})},destroy:function(){this.element.off(i)}}),t.toolbar.registerComponent("TaskBoardSearch",l),a(t.ui,{taskboard:{ToolBar:d}}),a(!0,t.ui.taskboard.ToolBar,{styles:{searchbox:"k-searchbox k-textbox k-input k-input-md k-rounded-md k-input-solid",searchIcon:"k-input-icon k-icon k-i-search",searchInput:"k-input-inner"}}),function(e,t){var a=window.kendo,n=a.ui,o=a.Observable,r=e.extend,s=".",i=".kendoTaskBoardColumn",d="click",l="action";function c(e){e.preventDefault()}var u=o.extend({init:function(e,t){var a=this;a._dataItem=t,a.options=r(!0,{},e),a.sortableUniqueClass=a.options.sortableIdentifier+u.styles.sortableSuffix,a._render(),a._attachEvents(),e.states.isReorderable&&a._initSortable(),o.fn.init.call(a)},empty:function(){this.container.empty()},addCard:function(e){this.container.append(e)},edit:function(){var e=u.styles;this.element.addClass(e.editColumn),this._renderEditHeader()},getDataItem:function(){return this._dataItem},cards:function(){return this.container.children()},template:'<div class="#: styles.headerText # #: styles.ellipsis #">{0}</div><span class="#: styles.spacer #"></span>#=buttons#',editTemplate:'<div class="#: styles.headerText # #: styles.ellipsis #"><span class="#: styles.textbox #"><input class="#: styles.input #" placeholder="#: {0} ? messages.editColumn : messages.newColumn #" #:kendo.attr("command")#="SaveColumnCommand" value="#:{0}#" /></span></div><span class="#: styles.spacer #"></span>#=buttons#',actionButton:'<button class="#: styles.actionButton # #: styles.button #" title="#:text#" #:kendo.attr("command")#="#:command#" #if(options){##:kendo.attr("options")#="#:options#"#}#><i class="k-button-icon #:icon# #:spriteCssClass#"></i></button>',builtinButtons:{editColumn:{name:"editColumn",icon:"edit",text:"Edit Column",command:"EditColumnCommand",rules:"isEditable"},addCard:{name:"addCard",icon:"add",text:"Add Card",command:"AddCardCommand",rules:"isEditable"},deleteColumn:{name:"deleteColumn",icon:"close",text:"Delete Column",command:"DeleteColumnCommand",rules:"isEditable"}},defaultButtons:["editColumn","addCard","deleteColumn"],_render:function(){var t=this,n=u.styles,o=a.guid(),r=e("<div class='"+n.element+"'></div>").attr(a.attr("uid"),t._dataItem.uid).css({width:t.options.width}).attr("role","list").attr("aria-labelledby",o),s=e("<div class='"+n.header+"'></div>"),i=e("<div class='"+n.cardsContainer+"'></div>"),d=e("<div class='"+n.columnCards+"'></div>");t.header=s.appendTo(r).attr("id",o),t._renderHeader(),i.appendTo(r),t.container=d.appendTo(i).addClass(t.sortableUniqueClass),t.element=r},_renderHeader:function(){var e=this,t=u.styles,n=e.options,o=n.template?n.template:a.format(e.template,"#:"+n.dataTextField+"#");e.header.append(a.template(o)(r(!0,{},{styles:t,buttons:e._buildActionsHtml()},e._dataItem)))},_renderEditHeader:function(){var e=this,t=u.styles,n=e.options,o=n.editTemplate?n.editTemplate:a.format(e.editTemplate,n.dataTextField);e.header.html(""),e.header.append(a.template(o)(r(!0,{},{styles:t,messages:n.messages,buttons:e._buildActionsHtml()},e._dataItem))),setTimeout((function(){e.header.find("input").trigger("focus")}),0),e.header.find(s+t.actions).addClass(t.disabled)},_buildActionsHtml:function(){for(var t=this,n=t.options,o=n.messages,s=n.buttons||t.defaultButtons,i=u.styles,d="<div class='"+i.actions+"'>",l=0;l<s.length;l++){var c=s[l];if("string"==typeof(c=e.isPlainObject(c)&&1===Object.keys(c).length&&c.name?c.name:c)?c=r(!0,{},t.builtinButtons[c]||{spriteCssClass:c,command:c+"Command"},{text:o[c]||c}):e.isPlainObject(c)&&c.name&&(c=r(!0,c,{text:o[c.name]})),t._validateRules(c)){var m=c.icon?"k-icon k-i-"+c.icon:"";c.icon=m,c.spriteCssClass=c.spriteCssClass||"",d+=a.template(t.actionButton)(r(!0,{},{styles:i,options:!1},c))}}return d+="</div>"},_validateRules:function(e){var t=this.options.states,a=e.rules?e.rules.split(";"):[];if(!a.length)return!0;for(var n=0;n<a.length;n++)if(!t[a[n]])return!1;return!0},_actionClick:function(t){var n=e(t.target).closest("["+a.attr("command")+"]"),o=n.attr(a.attr("command")),s=n.attr(a.attr("options"));s="string"==typeof s?{value:s}:s,o&&this.trigger(l,{command:o,options:r({target:n},s)})},_textboxBlur:function(t){var n=e(t.target).closest("["+a.attr("command")+"]"),o=n.attr(a.attr("command")),s=n.attr(a.attr("options"));s="string"==typeof s?{value:s}:s,o&&this.trigger(l,{command:o,options:r({target:n},s)})},_attachEvents:function(){var e=this;e.header.on(d+i,s+u.styles.actionButton,e._actionClick.bind(e)),e.header.on("blur"+i,s+u.styles.input,e._textboxBlur.bind(e)),e.header.on("keyup"+i,s+u.styles.input,(function(t){t.keyCode===a.keys.ENTER&&e._textboxBlur(t)})),e.container&&(e.container.on(d+i,s+u.styles.card+" ["+a.attr("command")+"]",e._actionClick.bind(e)),e.container.on(d+i,s+u.styles.card+" a."+u.styles.cardTitle,c))},_initSortable:function(){var t=this,a=t.options.states.isRtl?" k-rtl":"",o=t.container;t.container&&(t.sortable=new n.Sortable(o,{ignore:s+u.styles.ignoreDrag+" *",connectWith:s+t.sortableUniqueClass,filter:s+u.styles.card,hint:function(e){return e.clone().addClass(u.styles.dragHint+" "+u.styles.grabbingCursor+a).css({width:e[0].offsetWidth,height:e[0].offsetHeight})},placeholder:function(t){return e("<div></div>").addClass(u.styles.dragPlaceholder).css({height:t[0].offsetHeight})},move:t._move.bind(t),start:t._start.bind(t),end:t._end.bind(t),change:t._change.bind(t)}),t.sortable.draggable.userEvents.unbind("select"),t.sortable.draggable.userEvents.bind("select",t._select.bind(t)))},_select:function(t){for(var a=u.ignoreDragSelectors,n=e(t.event.target),o=0;o<a.length;o++)if(n.is(a[o])){t.preventDefault();break}},_move:function(e){r(e,{columnElement:e.sender.element.parents(s+u.styles.element)}),this.trigger("move",e)},_start:function(e){r(e,{columnElement:e.sender.element.parents(s+u.styles.element)}),this.trigger("moveStart",e)},_end:function(e){r(e,{columnElement:e.sender.element.parents(s+u.styles.element)}),this.trigger("moveEnd",e)},_change:function(e){r(e,{columnElement:e.sender.element.parents(s+u.styles.element)}),this.trigger("change",e),("receive"===e.action&&e.newIndex>=0||"sort"===e.action&&e.newIndex!==e.oldIndex)&&this.trigger(l,{command:"MoveCardCommand",options:e})},destroy:function(){var e=this;e.header.off(i),e.container.off(i),e.sortable&&e.sortable.destroy()}}),m=u.extend({_render:function(){var t=this,n=u.styles,o=e("<div class='"+n.element+"'></div>").addClass(n.newColumn).attr(a.attr("uid"),t._dataItem.uid),r=e("<div class='"+n.header+"'></div>");t.header=r.appendTo(o),t._renderEditHeader(),t.element=o}});r(a.ui.taskboard,{Column:u,NewColumn:m}),r(!0,a.ui.taskboard.Column,{styles:{element:"k-taskboard-column",header:"k-taskboard-column-header",headerText:"k-taskboard-column-header-text",ellipsis:"k-text-ellipsis",spacer:"k-spacer",actions:"k-taskboard-column-header-actions",cardsContainer:"k-taskboard-column-cards-container",columnCards:"k-taskboard-column-cards",actionButton:"k-taskboard-column-action-button",button:"k-button k-icon-button k-button-md k-rounded-md k-button-flat k-button-flat-base",card:"k-taskboard-card",cardTitle:"k-card-title",sortableSuffix:"-kendosortable",textbox:"k-textbox k-input k-input-md k-rounded-md k-input-solid",input:"k-input-inner",newColumn:"k-taskboard-column-new",editColumn:"k-taskboard-column-edit",disabled:"k-disabled",dragPlaceholder:"k-taskboard-drag-placeholder",dragHint:"k-taskboard-drag-hint",ignoreDrag:"k-taskboard-drag-ignore",grabbingCursor:"k-cursor-grabbing"},ignoreDragSelectors:["img"]})}(window.kendo.jQuery),function(e,t){var a=window.kendo,n=a.Observable,o=e.extend,r=n.extend({init:function(e,t,a){var r=this;r._dataItem=t,r.resources=a,r.options=o(!0,{},e),r._render(),n.fn.init.call(r)},headerTemplate:'<div class="#:styles.header# #:styles.hbox#"><a class="#:styles.title# #:styles.link#" href="\\#" #if(selectable){##:kendo.attr("command")#="SelectCardCommand"#}#>#:{0}#</a><span class="#:styles.spacer#"></span>#=cardMenuButton#</div>',bodyTemplate:'<div class="#:styles.body#"><p>#:{0}#</p></div>',cardMenuButtonTemplate:'<div class="#:styles.headerActions#"><button aria-label="menu" class="#:styles.button# #:styles.flatButton# #:styles.cardMenuButton#"><span class="k-button-icon #:styles.actionsIcon#"></span></button></div>',_render:function(){var t,n=this,s=n.options,i=r.styles,d=s.template||n._buildTemplate(),l=e("<div class='"+i.element+" "+i.card+" "+i.moveCursor+"'></div>"),c=s.cardMenu?n.cardMenuButtonTemplate:"",u=n._resources(n._dataItem),m=s.states.isRtl?"borderRightColor":"borderLeftColor";l.attr(a.attr("uid"),n._dataItem.uid).attr("aria-disabled",!s.states.isDisabled).attr("role","listitem").toggleClass(i.disabled,s.states.isDisabled),(t=u[s.dataCategoryField]&&u[s.dataCategoryField].color||n._dataItem.get(s.dataCategoryField))&&l.addClass(i.categoryBorder).css(m,t),l.append(a.template(d)(o(!0,{},{styles:i,cardMenuButton:a.template(c)({styles:i}),selectable:s.states.isSelectable,resources:u},n._dataItem))),n.element=l},_resources:function(e){var t=this,n={};if(!t.resources)return n;for(var o in t.resources){var r=t.resources[o],s=r.field,i=a.getter(s)(e);if(i){r.multiple||(i=[i]);for(var d=r.dataSource.view(),l=0;l<i.length;l++){var c=null,u=i[l];r.valuePrimitive||(u=a.getter(r.dataValueField)(u));for(var m=0;m<d.length;m++)if(d[m].get(r.dataValueField)==u){c=d[m];break}if(null!==c){var p=a.getter(r.dataColorField)(c),h={field:r.field,title:r.title,name:r.name,text:a.getter(r.dataTextField)(c),value:u,color:p};r.multiple?n[r.field]?n[r.field].push(h):n[r.field]=[h]:n[r.field]=h}}}}return n},_buildTemplate:function(){var e=this,t=e.options;return a.format(e.headerTemplate,t.dataTitleField)+a.format(e.bodyTemplate,t.dataDescriptionField)}});o(a.ui.taskboard,{Card:r}),o(!0,a.ui.taskboard.Card,{styles:{element:"k-taskboard-card",card:"k-card",header:"k-card-header",hbox:"k-hbox",title:"k-card-title",link:"k-link",spacer:"k-spacer",button:"k-button",cardMenuButton:"k-taskboard-card-menu-button k-icon-button",flatButton:"k-button-md k-rounded-md k-button-flat k-button-flat-base",body:"k-card-body",actionsIcon:"k-icon k-i-more-vertical",moveCursor:"k-cursor-move",categoryBorder:"k-taskboard-card-category",headerActions:"k-card-header-actions",disabled:"k-disabled"}})}(window.kendo.jQuery),function(e,t){var a=window.kendo,n=e.extend,o=a.template,r=a.ui.ContextMenu,s="action",i=r.extend({init:function(e,t){var a=this;r.fn.init.call(a,e,t),a._overrideTemplates(),a._extendItems(),a.bind("select",a._onSelect.bind(a)),a.bind("open",a._onOpen.bind(a)),a.bind("activate",a._focus.bind(a))},_overrideTemplates:function(){this.templates.sprite=o("#if(spriteCssClass) {#<span class='#: spriteCssClass #'></span>#}#")},defaultItems:{editCard:{name:"editCard",text:"Edit card",icon:"edit",command:"EditCardCommand",rules:"isEditable"},deleteCard:{name:"deleteCard",text:"Delete card",icon:"delete",command:"DeleteCardCommand",rules:"isEditable"}},events:r.fn.events.concat([s]),_extendItems:function(){var t,a=this,n=a.options.items;if(n&&n.length)for(var o=0;o<n.length;o++)t=n[o],e.isPlainObject(t)&&1===Object.keys(t).length&&t.name&&(t=t.name),e.isPlainObject(t)?a._append(t):a.defaultItems[t]?(t=a.defaultItems[t],a._append(t)):"string"==typeof t&&(t={name:t,text:t,spriteCssClass:t,command:t+"Command"},a._append(t));else for(var r in a.defaultItems)t=a.defaultItems[r],a._append(t)},_append:function(e){var t=this;t._extendItem(e),t._validateRules(e)&&t.append(e)},_extendItem:function(e){var t=this.options.messages,o=e.icon?"k-icon k-i-"+e.icon:"",r={};r[a.attr("command")]=e.command,e.options&&(r[a.attr("options")]=e.options),n(e,{text:t[e.name],spriteCssClass:o+" "+e.spriteCssClass||"",attr:r,uid:a.guid()})},_validateRules:function(e){var t=this.options.states,a=e.rules?e.rules.split(";"):[];if(!a.length)return!0;for(var n=0;n<a.length;n++)if(!t[a[n]])return!1;return!0},_onSelect:function(t){var o=e(t.item).attr(a.attr("command")),r=e(t.item).attr(a.attr("options")),s=e(t.target);r="string"==typeof r?{value:r}:r,o&&this.action({command:o,options:n({target:s},r)})},_onOpen:function(t){!t.sender.options.items&&e.isEmptyObject(this.defaultItems)&&t.preventDefault()},_focus:function(e){e.sender&&e.sender.element.trigger("focus")},action:function(e){this.trigger(s,e)}});n(a.ui.taskboard,{CardMenu:i})}(window.kendo.jQuery),function(e,t){var a=window.kendo,n=e.extend,o=e.isPlainObject,r=a.Class.extend({init:function(e){this.options=e,this.taskboard=e.taskboard},_confirm:function(t,a,r,s){var i,d=this.taskboard.options;if(o(d.editable)&&!1===d.editable.confirmation){var l=e.Deferred();return l.resolve(),l}return(i=e("<div></div>").kendoConfirm(n({},{title:t,content:a,messages:{okText:r,cancel:s},buttonLayout:"normal"})).data("kendoConfirm")).open(),setTimeout((function(){i.element.trigger("focus")})),i.result}}),s=r.extend({exec:function(){var e=this.taskboard;e.trigger("editColumn",{column:null})||(e.columns().each((function(t,a){e.enableByColumn(a,!1)})),e.addColumn())}}),i=r.extend({exec:function(){var e=this.options,t=this.taskboard;t.trigger("editColumn",{column:e.column})||(t.columns().each((function(e,a){t.enableByColumn(a,!1)})),t.editColumn(e.columnElement))}}),d=r.extend({exec:function(){var e=this,t=e.options,a=e.taskboard,n=a.options.messages,o=a.columnsDataSource;e._confirm(n.deleteColumn,n.deleteColumnConfirm,n.delete,n.cancel).done((function(){a.trigger("deleteColumn",{column:t.column})?a.dataSource.cancelChanges():(o.remove(t.column),o.sync())}))}}),l=r.extend({exec:function(){var e=this.options,t=this.taskboard,a=t.options.columnSettings,n=t.columnsDataSource,o=e.column,r=e.target.val();t.trigger("saveColumn",{column:e.column})?t.dataSource.cancelChanges():(o.set(a.dataTextField,r),n.sync())}}),c=r.extend({exec:function(){this.taskboard.columnsDataSource.cancelChanges()}}),u=r.extend({exec:function(){var e,t,a=this,n=a.taskboard,o=a.options,r=o.cardElement,s=o.columnElement,i=n.columns(),d=s.index(),l=o.value;switch(l){case"left":e=Math.max(0,d-1);break;case"right":e=Math.min(i.length-1,d+1);break;default:e=d}a.columns=i,a.columnIndex=e,a.column=t=n._getColumnByElement(i.eq(e)),a.cards=t.cards(),r?a._moveFromCardFocus(l,r):s&&"down"===l?a.cards.eq(0).trigger("focus"):i.eq(e).trigger("focus")},_moveFromCardFocus:function(e,t){var a,n,o=this,r=t.index(),s=!1;switch(e){case"up":n=r-1;break;case"down":n=r+1;break;default:s=!0,n=r}!(a=o.cards.eq(n)).length&&s&&(a=o._getFocusableCard(n,e)),n>=0?a.trigger("focus"):o.options.columnElement.focus()},_getFocusableCard:function(e,t){var a=this,n=a.cards.length-1,o=a.cards.eq(Math.min(e,n));if(o.length)return o;if(!(a.columnIndex<=0||a.columnIndex>=a.columns.length-1)){switch(t){case"left":a.columnIndex=Math.max(0,a.columnIndex-1);break;case"right":a.columnIndex=Math.min(a.columns.length-1,a.columnIndex+1)}return a.column=a.taskboard._getColumnByElement(a.columns.eq(a.columnIndex)),a.cards=a.column.cards(),a._getFocusableCard(e,t)}}}),m=r.extend({_updateOrder:function(e,t){var a,n=this.taskboard,o=n.options.dataOrderField,r=this.options,s=r.card,i=r.cardElement?r.cardElement.index():e.cards().length,d=t,l=e.cards().map((function(e,t){return n.dataItem(t)})),c=l[i-1];s.set(o,d),c&&c.get(o)>=s.get(o)&&s.set(o,c.get(o)+1);for(var u=d+1;u<l.length&&(a=l[u]).get(o)<=s.get(o);u++)a.set(o,s.get(o)+1),s=a}}),p=r.extend({exec:function(){var e=this.taskboard,t=this.options.cardElement;e._select(t,!0),t.focus()}}),h=m.extend({exec:function(){var t=this,a=t.taskboard,n=a.options,o=t.options,r=o.card.get(n.dataStatusField),s=a._getColumn(r),i=e(document.activeElement);i.length&&i.trigger("change"),a.pane&&a.pane.form&&!a.pane.form.validate()||(a.trigger("saveCard",{card:o.card})?a.dataSource.cancelChanges():(s&&n.dataOrderField&&t._updateOrder(s,o.card.get(n.dataOrderField)),a.dataSource.sync().then((function(){a.columns().eq(0).trigger("focus")}))))}}),f=r.extend({exec:function(){var e=this,t=e.taskboard,a=t.options.messages,n=e.options;e._confirm(a.deleteCard,a.deleteCardConfirm,a.delete,a.cancel).done((function(){t.trigger("deleteCard",{card:n.card})?t.dataSource.cancelChanges():(t.dataSource.remove(n.card),t.dataSource.sync().then((function(){t.columns().eq(0).trigger("focus")})))})).fail((function(){n.cardElement.trigger("focus")}))}}),b=m.extend({exec:function(){var e=this,t=e.taskboard,a=t.options,n=a.columnSettings,o=e.options,r=o.column.get(n.dataStatusField);o.card.set(a.dataStatusField,r),a.dataOrderField&&e._updateOrder(t._getColumn(r),o.newIndex),t.dataSource.sync()}}),g=r.extend({exec:function(){var e=this.taskboard,t=this.options;e.trigger("editCard",{card:t.card})||e._openPane(n({pane:"Edit"},t))}}),v=r.extend({exec:function(){var e=this.taskboard,t=this.options;e.trigger("editCard",{card:null})||(e.dataSource.cancelChanges(),e._openPane(n({pane:"Create"},t)))}}),C=r.extend({exec:function(){var e=this.options;this.taskboard._openPane({pane:e.value,card:e.card,cardElement:e.cardElement,column:e.column,columnElement:e.columnElement})}}),k=r.extend({exec:function(){var e=this.taskboard;e._closePane(),e.dataSource.cancelChanges()}}),y=r.extend({exec:function(){var e,t=this,a=t.options.value,n=t.taskboard,o=n.options,r=o.search,s=r.operator,i=r&&r.fields||[o.dataTitleField,o.dataDescriptionField];e=t._buildFilters(i,s,a),n.dataSource.filter(e)},_buildFilters:function(e,t,a){return{logic:"or",filters:e.map((function(e){return{field:e,operator:t,value:a}}))}}});n(a.ui.taskboard,{Command:r,commands:{AddColumnCommand:s,EditColumnCommand:i,DeleteColumnCommand:d,SaveColumnCommand:l,CancelEditColumnCommand:c,OpenPaneCommand:C,ClosePaneCommand:k,SelectCardCommand:p,MoveFocusCommand:u,SaveChangesCommand:h,DeleteCardCommand:f,MoveCardCommand:b,EditCardCommand:g,AddCardCommand:v,SearchCommand:y}})}(window.kendo.jQuery),function(e,t){var a=window.kendo,n=e.extend,o=a.Observable,r=a.ui.Form,s=".kendoTaskBoardPane",i=o.extend({init:function(e,t,r,i){var d=this;d.taskboard=e,d._dataItem=r,d.resources=i,d.options=n(!0,{},t),d._render(),d.element.on("click"+s,"["+a.attr("command")+"]",d._commandClick.bind(d)),o.fn.init.call(d)},headerTemplate:'<div class="#:styles.headerText#">{0}</div><span class="#:styles.spacer#"></span><div class="#:styles.headerActions#"><button class="#:styles.flatButton#" title="#:messages.close#" #:kendo.attr("command")#="ClosePaneCommand"><span class="k-button-icon k-icon k-i-close"></span></button></div>',buttonTemplate:'<button class="#:styles.footerButton##if(primary){# #:styles.primaryButton# # } else { # #:styles.baseButton# # } #" title="#:text#" #:kendo.attr("command")#="#:command#" #:kendo.attr("options")#="#:options#"><span class="k-button-icon #:icon# #:spriteCssClass#"></span><span class="k-button-text">#:text#</span></button>',contentTemplate:"",builtinButtons:{edit:{name:"edit",icon:"edit",text:"Edit",primary:!0,command:"EditCardCommand",rules:"isEditable"},delete:{name:"delete",icon:"delete",text:"Delete",command:"DeleteCardCommand",rules:"isEditable"},cancel:{name:"cancel",text:"Cancel",command:"ClosePaneCommand"},saveChanges:{name:"saveChanges",text:"Save",command:"SaveChangesCommand",primary:!0,rules:"isEditable"},create:{name:"create",text:"Create",command:"SaveChangesCommand",primary:!0,rules:"isEditable"}},defaultButtons:[],_render:function(){var t=this,a=i.styles,n=e("<div class='"+a.element+"'></div>"),o=e("<div class='"+a.header+"'></div>"),r=e("<div class='"+a.content+"'></div>"),s=e("<div class='"+a.footerActions+" "+a.footerActionButtons+"'></div>");t.header=o.appendTo(n),t._renderHeader(),t.content=r.appendTo(n),t._renderContent(),t.buttonsContainer=s.appendTo(n),t.buttonsContainer.append(t._buildButtonsHtml()),t.element=n},_renderHeader:function(){var e=this,t=i.styles,o=e.options,r=o.messages,s=o.headerTemplate?o.headerTemplate:e._buildHeaderTemplate(),d=e._resources(e._dataItem);e.header.append(a.template(s)(n(!0,{},{styles:t,messages:r,resources:d},e._dataItem)))},_buildHeaderTemplate:function(){return a.format(this.headerTemplate,"#:"+this.options.dataTitleField+"#")},_renderContent:function(){var e=this,t=i.styles,o=e.options,r=o.messages,s=o.template||e.contentTemplate,d=e._resources(e._dataItem);e.content.append(a.template(s)(n(!0,{},{styles:t,messages:r,resources:d},e._dataItem)))},_resources:function(e){var t=this,n={};if(!t.resources)return n;for(var o in t.resources){var r=t.resources[o],s=r.field,i=a.getter(s)(e);if(i){r.multiple||(i=[i]);for(var d=r.dataSource.view(),l=0;l<i.length;l++){var c=null,u=i[l];r.valuePrimitive||(u=a.getter(r.dataValueField)(u));for(var m=0;m<d.length;m++)if(d[m].get(r.dataValueField)==u){c=d[m];break}if(null!==c){var p=a.getter(r.dataColorField)(c),h={field:r.field,title:r.title,name:r.name,text:a.getter(r.dataTextField)(c),value:u,color:p};r.multiple?n[r.field]?n[r.field].push(h):n[r.field]=[h]:n[r.field]=h}}}}return n},_buildButtonsHtml:function(){for(var t=this,o=t.options,r=o.messages,s=o.buttons||t.defaultButtons,d=i.styles,l="",c=0;c<s.length;c++){var u=s[c];if("string"==typeof(u=e.isPlainObject(u)&&1===Object.keys(u).length&&u.name?u.name:u)?u=n(!0,{},t.builtinButtons[u]||{spriteCssClass:u,command:u+"Command"},{text:r[u]||u}):e.isPlainObject(u)&&u.name&&(u=n(!0,u,{text:r[u.name]})),t._validateRules(u)){var m=u.icon?"k-icon k-i-"+u.icon:"";u.icon=m,u.spriteCssClass=u.spriteCssClass||"",l+=a.template(t.buttonTemplate)(n(!0,{},{styles:d,messages:r,primary:!1,options:null},u))}}return l},_commandClick:function(t){var o=e(t.target).closest("["+a.attr("command")+"]"),r=o.attr(a.attr("command")),s=o.attr(a.attr("options")),i=this._dataItem;s="string"==typeof s?{value:s}:s,r&&this.trigger("action",{command:r,options:n({card:i},s)})},_validateRules:function(e){var t=this.options.states,a=e.rules?e.rules.split(";"):[];if(!a.length)return!0;for(var n=0;n<a.length;n++)if(!t[a[n]])return!1;return!0},destroy:function(){this.element.off(s),this.element.remove()}}),d=i.extend({init:function(e,t,o,r){var s=this;t=n({},t.previewPane,{dataTitleField:t.dataTitleField,dataDescriptionField:t.dataDescriptionField,messages:t.messages,states:t.states}),s.contentTemplate=a.format(s._contentTemplate,t.dataDescriptionField),i.fn.init.call(s,e,t,o,r),s.element.addClass(i.styles.preview)},_contentTemplate:"<p>#:{0}#</p>",defaultButtons:["delete","edit"]}),l=i.extend({init:function(e,t,a){var o=this;t=n({},t.editable,{dataTitleField:t.dataTitleField,dataDescriptionField:t.dataDescriptionField,messages:t.messages,states:t.states}),o.formSettings=n(o.formSettings,{items:[{field:t.dataTitleField,label:t.messages[t.dataTitleField]},{field:t.dataDescriptionField,label:t.messages[t.dataDescriptionField]}]},t.form),i.fn.init.call(o,e,t,a),o.element.addClass(i.styles.edit)},defaultButtons:["cancel","saveChanges"],formSettings:{buttonsTemplate:""},_buildHeaderTemplate:function(){var e=this;return a.format(e.headerTemplate,e.options.messages.edit+" #:"+e.options.dataTitleField+"#")},_renderContent:function(){var t=this,o=t.options,s=i.styles,d=o.form||t.formSettings,l=a.guid(),c=e("<div></div>").attr("role","form").attr("aria-labelledby",l);t.header.find("."+s.headerText).attr("id",l),t.content.append(c),t.form=new r(c,n({},d,{formData:t._dataItem})),t.form.element.find("input").trigger("focus")}}),c=l.extend({init:function(e,t,a,o,r){var s=t.columnSettings.dataStatusField,i=e.columnsDataSource.view().at(0),d=r?r[s]:i[s],c=n({},a);for(var u in(a=e.dataSource.add()).set(t.dataStatusField,d),c)a.set(u,c[u]);l.fn.init.call(this,e,t,a,o)},_buildHeaderTemplate:function(){return a.format(this.headerTemplate,this.options.messages.createNewCard)},defaultButtons:["cancel","create"]});n(a.ui.taskboard,{Pane:i,panes:{Preview:d,Edit:l,Create:c}}),n(!0,a.ui.taskboard.Pane,{styles:{element:"k-taskboard-pane",edit:"k-taskboard-edit-pane",preview:"k-taskboard-preview-pane",header:"k-taskboard-pane-header",headerText:"k-taskboard-pane-header-text",spacer:"k-spacer",headerActions:"k-taskboard-pane-header-actions",flatButton:"k-button k-icon-button k-button-md k-rounded-md k-button-flat k-button-flat-base",content:"k-taskboard-pane-content",footerActions:"k-taskboard-pane-actions",footerActionButtons:"k-actions k-hstack k-justify-content-end",footerButton:"k-button k-button-md k-rounded-md k-button-solid",baseButton:"k-button-solid-base",primaryButton:"k-button-solid-primary"}})}(window.kendo.jQuery),function(e,t){var a=window.kendo,n=a.Observable,o=e.extend,r=".kendoKeboardManager",s=n.extend({init:function(e){var t=this;t.register={},t.element=e,t._attachEvents(),n.fn.init.call(t)},registerShortcut:function(e,t,a){var n=this;n.register[e]||(n.register[e]=[]),t.keyCode&&isNaN(t.keyCode)&&t.keyCode.toUpperCase&&(t.keyCode=t.keyCode.toUpperCase().charCodeAt(0)),n.register[e].push({shortcut:o({keyCode:null,ctrlKey:!1,shiftKey:!1,altKey:!1},t),options:a})},_attachEvents:function(){var e=this,t=e._handler.bind(e);e.element.on("keydown"+r,t)},_handler:function(t){var a,n,o=this,r=e(t.target);for(var s in o.register)if(r.is(s)&&(a=o.register[s],n=o._getAction(a,t))){o._trigger(n,t);break}},_trigger:function(t,a){var n=e(a.target);t.command&&this.trigger("action",o({},a,{command:t.command,options:o({},{target:n},t.options)})),t.handler&&t.handler(a)},_getAction:function(e,t){for(var a=0;a<e.length;a++)if(this._compareShortcut(e[a].shortcut,t))return e[a].options},_compareShortcut:function(e,t){for(var a in e){var n=!1;if("ctrlKey"===a)n=e[a]!==this._getShortcutModifier(t);else n=e[a]!==t[a];if(n)return!1}return!0},_getShortcutModifier:function(e){return navigator.platform.toUpperCase().indexOf("MAC")>=0?e.metaKey:e.ctrlKey},destroy:function(){this.element.off(r)}});o(a.ui.taskboard,{KeyboardManager:s})}(window.kendo.jQuery);var c={wrapper:"k-taskboard",header:"k-taskboard-header",content:"k-taskboard-content",toolbar:"k-taskboard-toolbar k-toolbar-flat",columnsContainer:"k-taskboard-columns-container",card:"k-taskboard-card",column:"k-taskboard-column",selected:"k-selected",disabled:"k-disabled",ignoreDrag:"k-taskboard-drag-ignore"},u=function(e){e.preventDefault()};!function(e,t){var a=window.kendo,n=a.ui.Widget,o=a.data.DataSource,r=e.extend,s=a.ui,i=Array.isArray,d=e.isPlainObject,l="_generic",m=".",p="move",h="moveStart",f="moveEnd",b="select",g="execute",v="action",C="change",k="change",y="dataBinding",_="dataBound",x="columnsDataBinding",S="columnsDataBound",E=n.extend({init:function(e,t){var o=this;n.fn.init.call(o,e,t),e=o.wrapper=o.element,o._sortableIdentifier=o.element.attr("id")||a.guid(),o._wrapper(),o._columnsDataSource(),o._initResources(),o._dataSource(),o._initToolbar(),o._initCardMenu(),o._initKeyboard(),o.options.autoBind&&o.load(),a.notify(o)},events:[p,h,f,C,g,b,y,_,x,S,"editCard","saveCard","deleteCard","editColumn","saveColumn","deleteColumn"],options:{name:"TaskBoard",autoBind:!0,height:600,width:"100%",toolbar:!0,dataStatusField:"status",dataTitleField:"title",dataDescriptionField:"description",dataCategoryField:"category",dataOrderField:null,cardMenu:!0,editable:!0,selectable:!0,reorderable:!0,previewPane:!0,search:{operator:"contains"},dataSource:[],columns:[],columnSettings:{dataStatusField:"status",dataTextField:"text",dataOrderField:null},resources:[],messages:{edit:"Edit",createNewCard:"Create new card",create:"Create",search:"Search",previewCard:"Preview card",addCard:"Add card",editCard:"Edit card",deleteCard:"Delete Card",addColumn:"Add column",editColumn:"Edit column",deleteColumn:"Delete column",close:"Close",cancel:"Cancel",delete:"Delete",saveChanges:"Save changes",title:"Title:",description:"Description:",newColumn:"New column",deleteColumnConfirm:"Are you sure you want to delete this column?",deleteCardConfirm:"Are you sure you want to delete this card?"}},items:function(){var t=e([]);for(var a in this._columns)e.merge(t,this._columns[a].cards());return t},itemsByStatus:function(e){return this._getColumn(e).cards()},itemsByColumn:function(e){var t=this._getColumnByElement(e);if(t)return t.cards()},load:function(){var t=this,a=[];for(var n in t._progress(!0),a.push(t.columnsDataSource.fetch()),t.resources)a.push(t.resources[n].dataSource.fetch());e.when.apply(null,a).then(t.dataSource.read.bind(t.dataSource))},dataItem:function(t){var n,o=this.dataSource;return n=(t=e(t)).attr(a.attr("uid")),o.getByUid(n)},columnDataItem:function(t){var n,o=this.columnsDataSource;return n=(t=e(t)).attr(a.attr("uid")),o.getByUid(n)},columns:function(){var t=e([]);for(var a in this._columns)e.merge(t,this._columns[a].element);return t},columnByStatus:function(e){return this._getColumn(e).element},select:function(t,a){if(!t)return this.element.find(m+E.styles.card+m+E.styles.selected).eq(0);t=e(t),(a=!1!==a)&&this.element.find(m+E.styles.card+m+E.styles.selected).removeClass(E.styles.selected),t.toggleClass(E.styles.selected,a)},previewCard:function(e){var t=this,a=t.options,n=t._extendExecArgs({target:e});a.previewPane&&t._openPane(r({pane:"Preview"},n))},editCard:function(t){var a,n=this,o=n.options;t=e(t),a=n._extendExecArgs({target:t}),o.editable&&n._openPane(r({pane:"Edit"},a))},saveCard:function(){this.dataSource.sync()},deleteCard:function(e){var t=this,a=t.dataItem(e);t.dataSource.remove(a),t.dataSource.sync()},addCard:function(e){var t={card:e};this.options.editable&&this._openPane(r({pane:"Create"},t))},addColumn:function(e,t){var a,n,o,i=this,d=r(!0,{},i.options.columnSettings,{messages:i.options.messages,states:i._buildStates(),sortableIdentifier:i._sortableIdentifier});isNaN(e)&&!t&&(t=e,e=null),n=i.columnsDataSource._createNewModel(t),e=isNaN(e)||null===e?i.columnsDataSource.data().length:e,o=i.columns().eq(e),i.columnsDataSource.insert(e,n),a=new s.taskboard.NewColumn(d,n),isNaN(e)||!o.length?i.columnsContainer.append(a.element):o.before(a.element),a.bind(v,i.executeCommand.bind(i))},editColumn:function(t){t=e(t),this._getColumnByElement(t).edit()},saveColumn:function(){this.columnsDataSource.sync()},deleteColumn:function(e){var t=this,a=t.columnDataItem(e);t.columnsDataSource.remove(a),t.columnsDataSource.sync()},registerShortcut:function(e,t,a){this.keyboardManager.registerShortcut(e,t,a)},enable:function(t,a){(t=e(t)).toggleClass(E.styles.disabled,!1===a),t.attr("aria-disabled",!1===a)},enableByColumn:function(t,a){var n=this;t=e(t),n.itemsByColumn(t).each((function(e,t){n.enable(t,a)}))},readOnly:function(t,n){n=!1!==n,(t=e(t)).find("["+a.attr("command")+"]").toggleClass(E.styles.disabled,n),t.find("a,button").toggleClass(E.styles.disabled,n),t.toggleClass(E.styles.ignoreDrag,n),t.attr("aria-readonly",n)},readOnlyByColumn:function(t,a){var n=this;t=e(t),n.itemsByColumn(t).each((function(e,t){n.readOnly(t,a)}))},setDataSource:function(e){var t=this;t.options.dataSource=e,t._dataSource(),t.options.autoBind&&t.dataSource.read()},setColumnsDataSource:function(e){var t=this;t.options.columns=e,t._columnsDataSource(),t.options.autoBind&&t.columnsDataSource.fetch((function(){t._renderCards(t.dataSource.view())}))},_getColumn:function(e){return this._columns[e]},_getColumnByElement:function(t){var a=this;for(var n in t=e(t),a._columns)if(a._columns[n].element[0]===t[0])return a._columns[n]},_openPane:function(e){var t,n,o=this,i=new s.taskboard.panes[e.pane](o,r({},o.options,{states:o._buildStates()}),e.card,o.resources,e.column);o.pane&&o._closePane(),o.pane=i,o.content.after(o.pane.element),o.content.css("margin-right",o.pane.element.outerWidth()-parseInt(o.content.css("paddingRight"),10)),o.pane.bind(v,o.executeCommand.bind(o)),o.pane.keyboardManager=n=new s.taskboard.KeyboardManager(o.pane.element),n.bind(v,o.executeCommand.bind(o)),n.registerShortcut("*",{keyCode:a.keys.ESC},{command:"ClosePaneCommand"}),n.registerShortcut("*",{keyCode:a.keys.ENTER},{command:"SaveChangesCommand",options:{card:o.pane._dataItem}}),(t=o.pane.element.find("input")).length||(t=o.pane.element.find("button")),setTimeout((function(){t.eq(0).trigger("focus")}),0)},_closePane:function(){var e=this;e.pane&&(e.pane.keyboardManager.destroy(),e.pane.unbind(v),e.pane.destroy(),delete e.pane,e.content.css("margin-right",""))},_wrapper:function(){var t=this,a=t.options,n=E.styles,o="<div class='"+n.header+"'></div>",r="<div class='"+n.content+"'></div>",s="<div class='"+n.columnsContainer+"'></div>";t.element.addClass(n.wrapper).width(a.width).height(a.height).attr("role","application"),t.header=e(o).appendTo(t.element),t.content=e(r).appendTo(t.element),t.columnsContainer=e(s).appendTo(t.content)},_initToolbar:function(){var t=this,a=E.styles,n=t.options,o=e("<div class='"+a.toolbar+"'></div>"),d=i(n.toolbar)?{items:n.toolbar}:n.toolbar;!1!==n.toolbar&&(d=r({},d,{taskboard:this,messages:n.messages,action:t.executeCommand.bind(t),states:t._buildStates()}),t.header.append(o),t.toolbar=new s.taskboard.ToolBar(o,d))},_buildStates:function(){var e=this;return{isEditable:e._isEditable(),isReorderable:e._isReorderable(),isSelectable:e._isSelectable(),isReadOnly:!e._isReorderable()&&!e._isEditable(),isDisabled:!e._isReorderable()&&!e._isEditable()&&!e._isSelectable(),isSearchable:e._isSearchable(),notLocalColumns:!(e.columnsDataSource.transport instanceof a.data.LocalTransport),isRtl:a.support.isRtl(e.wrapper)}},_isSearchable:function(){return!!this.options.search},_isEditable:function(){return!!this.options.editable},_isReorderable:function(){return!!this.options.reorderable},_isSelectable:function(){return!!this.options.selectable},executeCommand:function(e){var t=e.command,n=r({taskboard:this},d(e.options)?this._extendExecArgs(e.options):{value:e.options}),o=s.taskboard.commands[t]&&new s.taskboard.commands[t](n);this.trigger(g,e)||(o?o.exec():window.console.warn(a.format("Trying to use {0} command, but such is not available in the kendo.ui.taskboard.commands namespace!",t)))},_extendExecArgs:function(n){var o,s,i,d,l=this,c=n.draggableEvent?n.item:n.target;return n.card&&(c=l.items().filter((function(t,o){return e(o).attr(a.attr("uid"))===n.card.get("uid")}))),c&&c&&c.length?(o=n.columnElement||(c.is(m+E.styles.column)?c:c.parents(m+E.styles.column)),i=l.columnsDataSource.getByUid(o.data(a.ns+"uid")),s=c.is(m+E.styles.card)?c:c.closest(m+E.styles.card),d=l.dataSource.getByUid(s.data(a.ns+"uid")),r(n,{card:d,cardElement:s.length?s:t,column:i,columnElement:o.length?o:t})):n},_select:function(e,t){var a=this;null===t&&(t=!0),a.trigger(b,{card:e})||(a.select(e,t),a.previewCard(e))},_columnsDataSource:function(){var e=this,t=e.options,n=t.columnSettings,r=t.columns;if(r=i(r)?{data:r}:r,n.dataOrderField&&!r.sort&&(r.sort={field:n.dataOrderField,dir:"asc"}),!r.schema){var s={};s[n.dataStatusField]={type:"string",defaultValue:function(){return a.guid().split("-")[0]}},s[n.dataTextField]={type:"string"},n.dataOrderField&&(s[n.dataOrderField]={type:"number"}),r.schema={model:{fields:s}}}e.columnsDataSource&&e._columnsChangeHandler?(e.columnsDataSource.unbind(C,e._columnsChangeHandler),e.columnsDataSource.unbind(C,e._columnsErrorHandler)):(e._columnsChangeHandler=e._columnsDataSourceChange.bind(e),e._columnsErrorHandler=e._error.bind(e)),e.columnsDataSource=o.create(r).bind(C,e._columnsChangeHandler).bind(k,e._columnsErrorHandler)},_columnsDataSourceChange:function(e){var a=this,n=a.columnsDataSource.view(),o=r(!0,{},a.options.columnSettings,{messages:a.options.messages,states:a._buildStates(),sortableIdentifier:a._sortableIdentifier}),i=o.dataStatusField;if(!(e.action&&"sync"!==e.action||a.trigger(x,e))){a._progress(!0),a._columns={},a.columnsContainer.html("");for(var d=0;d<n.length;d++){var c,u=n[d],m=u[i]||l;c=a._columns[m]=new s.taskboard.Column(o,u),a.columnsContainer.append(c.element),c.bind(v,a.executeCommand.bind(a)),c.bind(p,a._move.bind(a)),c.bind(f,a._moveEnd.bind(a)),c.bind(h,a._moveStart.bind(a)),c.bind(C,a._changeOrder.bind(a)),a._tabindex(c.element)}"sync"!==e.action&&e.action!==t||a._renderCards(a.dataSource.view()),a._progress(!1),a.trigger(S,e)}},_move:function(e){this.trigger(p,this._extendExecArgs(e))},_moveEnd:function(e){this.trigger(f,this._extendExecArgs(e))},_moveStart:function(e){this.trigger(h,this._extendExecArgs(e))},_changeOrder:function(e){this.trigger(C,this._extendExecArgs(e))},_dataSource:function(){var e=this,t=e.options,a=t.dataSource;if(a=i(a)?{data:a}:a,t.dataOrderField&&!a.sort&&(a.sort={field:t.dataOrderField,dir:"asc"}),!a.schema){var n={};n[t.dataStatusField]={type:"string"},n[t.dataTitleField]={type:"string"},n[t.dataDescriptionField]={type:"string"},n[t.dataCategoryField]={type:"string"},t.dataOrderField&&(n[t.dataOrderField]={type:"number"}),a.schema={model:{fields:n}}}e.dataSource&&e._changeHandler?(e.dataSource.unbind(C,e._changeHandler),e.dataSource.unbind(k,e._errorHandler)):(e._changeHandler=e._change.bind(e),e._errorHandler=e._error.bind(e)),e.dataSource=o.create(a).bind(C,e._changeHandler)},_change:function(e){var t=this;e.action&&"sync"!==e.action||t.trigger(y,e)||(t._progress(!0),t._clearColumns(),t._renderCards(t.dataSource.view()),t._closePane(),t.trigger(_,e),t._progress(!1))},_error:function(){this._progress(!1)},_renderCards:function(e){for(var t=0;t<e.length;t++)this._renderCard(e[t])},_renderCard:function(e){var t=this,a=r({},t.options,{states:t._buildStates()}),n=e[a.dataStatusField]||l;n&&t._columns[n]&&(e=new s.taskboard.Card(a,e,t.resources),t._columns[n].addCard(e.element),t._tabindex(e.element))},_clearColumns:function(){for(var e in this._columns)this._columns[e].empty()},_initCardMenu:function(){var e=this,t=e.options,a=i(t.cardMenu)?{items:t.cardMenu}:t.cardMenu;a=r({},{messages:t.messages,target:e.columnsContainer,filter:".k-taskboard-card-menu-button",action:e.executeCommand.bind(e),showOn:"click",alignToAnchor:!0,states:e._buildStates()},a),!1!==t.cardMenu&&(e.cardMenu=new s.taskboard.CardMenu("<ul></ul>",a))},_initResources:function(){for(var e=this.options.resources,t=0;t<e.length;t++)this._addResource(e[t])},_addResource:function(e){var t=this;t.resources||(t.resources={}),t.resources[e.field]={field:e.field,name:e.name,title:e.title||e.field,dataTextField:e.dataTextField||"text",dataValueField:e.dataValueField||"value",dataColorField:e.dataColorField||"color",valuePrimitive:!1!==e.valuePrimitive,multiple:e.multiple||!1,dataSource:t._resourceDataSource(e.dataSource)}},_resourceDataSource:function(e){var t=i(e)?{data:e}:e;return a.data.DataSource.create(t)},_progress:function(e){a.ui.progress(this.element,e)},_initKeyboard:function(){var e=this;e.keyboardManager=new s.taskboard.KeyboardManager(e.element),e.keyboardManager.bind(v,e.executeCommand.bind(e)),e._registerShortcuts()},_registerShortcuts:function(){var e=this,t=e._buildStates();t.isEditable&&(e.keyboardManager.registerShortcut(m+E.styles.column,{keyCode:a.keys.DELETE},{command:"DeleteColumnCommand"}),e.keyboardManager.registerShortcut(m+E.styles.column,{keyCode:"e",ctrlKey:!0},{command:"EditColumnCommand",handler:u}),e.keyboardManager.registerShortcut(m+E.styles.column,{keyCode:"a",ctrlKey:!0},{command:"AddCardCommand",handler:u}),e.keyboardManager.registerShortcut(m+E.styles.column+" *",{keyCode:a.keys.ESC},{command:"CancelEditColumnCommand"}),e.keyboardManager.registerShortcut(m+E.styles.card,{keyCode:a.keys.DELETE},{command:"DeleteCardCommand"}),e.keyboardManager.registerShortcut(m+E.styles.card,{keyCode:"e",ctrlKey:!0},{command:"EditCardCommand",handler:u})),t.isSelectable&&e.keyboardManager.registerShortcut(m+E.styles.card,{keyCode:a.keys.ENTER},{command:"SelectCardCommand",handler:u}),e.keyboardManager.registerShortcut(m+E.styles.card,{keyCode:a.keys.UP},{command:"MoveFocusCommand",options:{value:"up"},handler:u}),e.keyboardManager.registerShortcut(m+E.styles.card,{keyCode:a.keys.DOWN},{command:"MoveFocusCommand",options:{value:"down"},handler:u}),e.keyboardManager.registerShortcut(m+E.styles.card,{keyCode:a.keys.LEFT},{command:"MoveFocusCommand",options:{value:"left"},handler:u}),e.keyboardManager.registerShortcut(m+E.styles.card,{keyCode:a.keys.RIGHT},{command:"MoveFocusCommand",options:{value:"right"},handler:u}),e.keyboardManager.registerShortcut(m+E.styles.column,{keyCode:a.keys.LEFT},{command:"MoveFocusCommand",options:{value:"left"},handler:u}),e.keyboardManager.registerShortcut(m+E.styles.column,{keyCode:a.keys.RIGHT},{command:"MoveFocusCommand",options:{value:"right"},handler:u}),e.keyboardManager.registerShortcut(m+E.styles.column,{keyCode:a.keys.DOWN},{command:"MoveFocusCommand",options:{value:"down"},handler:u})},destroy:function(){var e=this;for(var t in e._columnsChangeHandler&&(e.columnsDataSource.unbind(C,e._columnsChangeHandler),e.columnsDataSource.unbind(C,e._columnsErrorHandler)),e._changeHandler&&(e.dataSource.unbind(C,e._changeHandler),e.dataSource.unbind(k,e._errorHandler)),e._columns)e._columns[t].destroy();e.toolbar&&e.toolbar.destroy(),e.cardMenu&&e.cardMenu.destroy(),e.keyboardManager&&e.keyboardManager.destroy(),e.pane&&e.closePane(),n.fn.destroy.call(e)}});a.ui.plugin(E),r(!0,E,{styles:c})}(window.kendo.jQuery)}));
//# sourceMappingURL=kendo.taskboard.min.js.map
