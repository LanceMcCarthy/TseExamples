/**
 * Kendo UI v2022.3.1109 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e){"function"==typeof define&&define.amd?define(["kendo.toolbar.min","kendo.dropdownlist.min","kendo.core.min","kendo.form.min","kendo.buttongroup.min","kendo.draganddrop.min","kendo.upload.min"],e):e()}((function(){var e,t,o,i,n,a,r,d,s,m;e=window.kendo.jQuery,t=window.kendo,o=t.ui,i=e.extend,n=t.ui.ToolBar,a=t.toolbar.TemplateItem,r="dropDownChange",d="action",s=n.extend({init:function(e,t){var o=this;o._extendOptions(t),n.fn.init.call(o,e,t),o._attachEvents(),o.toggleTools()},events:n.fn.events.concat([r,d]),defaultTools:{open:{type:"button",icon:"upload",name:"open",command:"OpenImageEditorCommand",showText:"overflow"},save:{type:"button",icon:"download",name:"save",command:"SaveImageEditorCommand",showText:"overflow",toggleCondition:"canExport"},separator:{type:"separator"},undo:{type:"button",icon:"undo",name:"undo",command:"UndoImageEditorCommand",showText:"overflow",toggleCondition:"undo"},redo:{type:"button",icon:"redo",name:"redo",command:"RedoImageEditorCommand",showText:"overflow",toggleCondition:"redo"},separator1:{type:"separator"},crop:{type:"button",icon:"crop",name:"crop",command:"OpenPaneImageEditorCommand",options:"crop",showText:"overflow",toggleCondition:"canExport"},resize:{type:"button",icon:"image-resize",name:"resize",command:"OpenPaneImageEditorCommand",options:"resize",showText:"overflow",toggleCondition:"canExport"},zoomIn:{type:"button",icon:"zoom-in",name:"zoomIn",command:"ZoomImageEditorCommand",showText:"overflow",options:"zoomIn",toggleCondition:"enable"},zoomOut:{type:"button",icon:"zoom-out",name:"zoomOut",command:"ZoomImageEditorCommand",showText:"overflow",options:"zoomOut",toggleCondition:"enable"},zoomDropdown:{type:"imageEditorZoomDropDown",name:"zoomDropdown",command:"ZoomImageEditorCommand",text:"Zoom options",toggleCondition:"enable",items:[{name:"zoomActualSize",icon:"zoom-actual-size",text:"Show actual size",options:"actualSize"},{name:"zoomFitToScreen",icon:"zoom-best-fit",text:"Fit to screen",options:"fitToScreen"}]}},_attachEvents:function(){var e=this;e.bind(r,e._dropDownChange.bind(e)),e.bind("click",e._click.bind(e))},_extendOptions:function(e){var t=this,o=e.items?e.items:Object.keys(t.defaultTools);t.options=e,t.options.items=t._extendToolsOptions(o)},_extendToolsOptions:function(o){var n=this,a=n.options.messages;if(o.length)return o.map((function(o){var r,d;return o=e.isPlainObject(o)&&1===Object.keys(o).length&&o.name?o.name:o,r=e.isPlainObject(o)?o:i({},n.defaultTools[o]),d=a[r.name]||r.text,t.deepExtend(r,{id:r.name+"-"+t.guid(),name:r.name,text:d,attributes:{"aria-label":d,title:d,"data-command":r.command,"data-options":r.options,"data-toggle":r.toggleCondition},overflow:r.overflow}),"imageEditorZoomDropDown"===r.type&&(r.items=n._extendToolsOptions(r.items)),r}),n)},_click:function(t){var o=e(t.target).data("command"),i=e(t.target).data("options");o&&this.action({command:o,options:i})},_dropDownChange:function(e){e.command&&this.action({command:e.command,options:e.options})},action:function(e){this.trigger(d,e)},toggleTools:function(o){var i=this,n=i.element.find("[data-toggle]"),a=i.element.find(":kendoFocusable").not("[tabindex=-1]");n.each((function(n,a){var r=e(a),d=null,s=r.data("toggle"),m=o&&o[s];r.is("[data-role]")&&(d=t.widgetInstance(r)),d&&d.enable?d.enable(m||!1):i.enable(r,m)})),i.element.find(":kendoFocusable").not("[tabindex=-1]").attr("tabindex",-1),a.attr("tabindex",0)},destroy:function(){this.zoomDropdown&&this.zoomDropdown.destroy(),n.fn.destroy.call(this)}}),m=a.extend({init:function(t,i){var n=this,r=e("<input />").attr(t.attributes);n.input=r,delete t.attributes["aria-label"],n.dropDown=new o.DropDownList(n.input,{optionLabel:{text:t.text,icon:""},dataTextField:"text",dataSource:t.items,template:'<span class="k-icon k-i-#:icon#"></span> #:text#',change:n._change.bind(n)}),a.fn.init.call(this,n.dropDown.wrapper,t,i),n.dropDown.list.find(".k-list-optionlabel").hide(),n.toolbar.zoomDropdown=n},_change:function(e){this.toolbar.trigger(r,{command:e.sender.element.data("command"),options:e.sender.dataItem().options})},destroy:function(){this.dropDown.destroy()}}),t.toolbar.registerComponent("imageEditorZoomDropDown",m),i(t.ui,{imageeditor:{ToolBar:s,ZoomDropDown:m}}),function(e,t){var o=window.kendo,i=e.extend,n=o.Class,a=".k-imageeditor-pane",r="k-imageeditor-pane-form",d="k-imageeditor-pane-button",s="k-imageeditor-pane-confirm-button",m="k-imageeditor-crop-overlay",l="k-imageeditor-crop",c="k-resize-handle",h="k-resize-",g=function(e){return Math.round(1e3*e)/1e3},p=n.extend({init:function(t){var o=this;o.imageeditor=t,o.imageeditor.currentPaneTool&&o.imageeditor.currentPaneTool.destroy(),o.element=e("<div></div>").addClass(r)},open:function(){var e=this,t=e.imageeditor,n=t.options.messages.common;t.paneWrapper.append(e.element),e.formWidget=new o.ui.Form(e.element,i(e.formSettings(),{buttonsTemplate:o.format("<button class='{0} k-button k-button-md k-rounded-md k-button-solid k-button-solid-base' data-action='cancel'><span class='k-button-text'>{2}</span></button><button class='{0} {1} k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary' data-action='confirm'><span class='k-button-text'>{3}</span></button>",d,s,n.cancel,n.confirm)})),e.bindButtonEvents(),t.paneWrapper.show(),t.currentPaneTool=e},bindButtonEvents:function(){var e=this,t=e.formWidget.element.find("."+d);e._clickHandler=e._click.bind(e),t.on("click"+a,e._clickHandler)},_click:function(t){var o=e(t.target).closest("."+d).data("action");this[o]&&this[o]()},cancel:function(){this.destroy()},confirm:function(){window.console.error("Pane's confirm method is not implemented!"),this.destroy()},refresh:function(){},destroy:function(){var e=this,t=e.imageeditor;e.formWidget.element.find("."+d).off(a),e.formWidget.destroy(),t.paneWrapper.html(""),t.paneWrapper.hide(),delete t.currentPaneTool}}),u=p.extend({init:function(e){var t=this;p.fn.init.call(t,e),t.buildCropModel(),t.canvasUI()},confirm:function(){var e=this,t=e.formWidget._model.toJSON();e.destroy(),e.imageeditor.executeCommand({command:"CropImageEditorCommand",options:t})},formSettings:function(){var e=this,t=e.imageeditor.options.messages.panes.crop,o=e.imageeditor.options.messages.common,i=t.aspectRatioItems,n=[];if(i)for(var a in i)n.push({value:a,text:i[a]});else n=[{value:"originalRatio",text:"Original ratio"},{value:"1:1",text:"1:1 (Square)"},{value:"4:5",text:"4:5 (8:10)"},{value:"5:7",text:"5:7"},{value:"2:3",text:"2:3 (4:6)"},{value:"16:9",text:"16:9"}];return{formData:e._model,change:e.onChange.bind(e),items:[{type:"group",label:t.title||"Crop Image",layout:"grid",grid:{cols:2,gutter:"0 8px"},items:[{label:t.aspectRatio||"Aspect ratio:",field:"aspectRatio",editor:"DropDownList",editorOptions:{dataValueField:"value",dataTextField:"text",dataSource:n},colSpan:2},{label:t.orientation,field:"orientation",editor:e._orientationEditor.bind(e),colSpan:2},{label:o.width||"Width:",field:"width",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",max:e._model.width,min:0},colSpan:1},{label:o.height||"Height:",field:"height",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",max:e._model.height,min:0},colSpan:1},{label:o.lockAspectRatio||"Lock aspect ratio",field:"lockAspectRatio",colSpan:2}]}]}},_orientationEditor:function(t,o){var i=this.imageeditor.options.messages.panes.crop,n=o.model[o.field];this._orientationWidget=e("<div name='"+o.field+"'></div>").appendTo(t).kendoButtonGroup({items:[{text:i.portrait||"Portrait",attributes:{"data-value":"portrait"},selected:"portrait"===n},{text:i.landscape||"Landscape",attributes:{"data-value":"landscape"},selected:"landscape"===n}],select:function(e){var t=e.sender.wrapper.find(".k-selected").data("value");o.model.set(o.field,t)}}).data("kendoButtonGroup")},buildCropModel:function(){var e=this.imageeditor.getCanvasElement(),t=e.width,o=e.height;this._model={top:0,left:0,aspectRatio:"originalRatio",width:t,height:o,orientation:t-o<0?"portrait":"landscape",lockAspectRatio:!0}},canvasUI:function(){for(var t=this,i=t.imageeditor,n=t.imageeditor.canvasContainer,a=e("<div></div>").addClass(m),r=e("<div></div>").addClass(l),d="<span class='"+c+"'></span>",s=["nw","n","ne","w","e","sw","s","se"],g=i.getZoomLevel(),p=0;p<s.length;p++){var u=e(d).addClass(h+s[p]).attr("data-orientation",s[p]);t._initResizeHandle(u),r.append(u)}t.cropElement=r,t._canvasUI=a.append(r).appendTo(n);var f=Math.round(t._model.width*g),v=Math.round(t._model.height*g),w=parseInt(t.cropElement.css("border-top-width"),10);t.cropElement.css({width:f,height:v,backgroundImage:"url('"+i._image.src+"')",backgroundSize:o.format("{0}px {1}px",f,v),backgroundClip:"content-box",backgroundPosition:o.format("-{0}px -{0}px",w)}),t.cropElement.kendoDraggable({ignore:"."+c,drag:function(e){t._adjustTopLeft(e.target.offsetTop+e.y.delta,e.target.offsetLeft+e.x.delta)}})},refresh:function(){var e=this,t=e.formWidget._model,i=e.imageeditor.getZoomLevel(),n=Math.round(t.width*i),a=Math.round(t.height*i),r=Math.round(t.top*i),d=Math.round(t.left*i),s=parseInt(e.cropElement.css("border-top-width"),10);e.cropElement.css({top:r,left:d,width:n,height:a,backgroundSize:o.format("{0}px {1}px",e._model.width*i,e._model.height*i),backgroundPosition:o.format("-{0}px -{1}px",d+s,r+s)})},_initResizeHandle:function(t){var o=this;t.kendoDraggable({drag:function(t){var i=e(t.sender.element),n=o.formWidget._model,a=o._model,r=i.data("orientation"),d={},s=o.imageeditor.getZoomLevel(),m=n.left*s,l=n.top*s;r.indexOf("w")>=0?(d.left=o.cropElement[0].offsetLeft+t.x.delta,d.width=o.cropElement[0].offsetWidth-t.x.delta):r.indexOf("e")>=0&&(d.width=o.cropElement[0].offsetWidth+t.x.delta),r.indexOf("n")>=0?(d.top=o.cropElement[0].offsetTop+t.y.delta,d.height=o.cropElement[0].offsetHeight-t.y.delta):r.indexOf("s")>=0&&(d.height=o.cropElement[0].offsetHeight+t.y.delta),d.width&&(d.left||m)+d.width<=a.width*s&&n.set("width",Math.round(d.width/s)),d.height&&(d.top||l)+d.height<=a.height*s&&n.set("height",Math.round(d.height/s)),(d.top||d.left)&&o._adjustTopLeft(d.top,d.left)}})},_adjustTopLeft:function(e,t,o){var i=this,n=o||i.formWidget._model,a=i.formWidget._model,r=i._model,d=i.imageeditor.getZoomLevel();e>=0&&e/d+n.height<=r.height&&a.set("top",Math.round(e/d)),t>=0&&t/d+n.width<=r.width&&a.set("left",Math.round(t/d))},onChange:function(e){var t=this,n=t.imageeditor.getZoomLevel(),a=e.sender._model,r=t._model,d=r.width,s=r.height,m=(r.width,r.height),l=t._gcd(r.width,r.height);if(m=r.width/l+":"+r.height/l,"aspectRatio"===e.field&&"originalRatio"===e.value)a.set("top",0),a.set("left",0),a.set("orientation",r.orientation),a.set("width",r.width),a.set("height",r.height);else if("orientation"===e.field){var c=i({},a,{width:a.height,height:a.width}),h=t._calcSize(c,m,d,s);a.set("width",h.width),a.set("height",h.height),t._orientationWidget.select("portrait"===e.value?0:1)}else if(a.lockAspectRatio){var g=e.field,p=t._calcSize(a,m,d,s,g);a.set("width",p.width),a.set("height",p.height)}var u=Math.round(a.width*n),f=Math.round(a.height*n),v=Math.round(a.top*n),w=Math.round(a.left*n),x=parseInt(t.cropElement.css("border-top-width"),10);t.cropElement.css({top:v,left:w,width:u,height:f,backgroundPosition:o.format("-{0}px -{1}px",w+x,v+x)})},_calcSize:function(e,t,o,i,n){var a=Math.min(e.width,o),r=Math.min(e.height,i),d="portrait"===e.orientation,s=e.aspectRatio;s.indexOf(":")<0&&(s=t),s=s.split(":").map((function(e){return parseInt(e,10)}));var m=d?Math.min(s[0],s[1]):Math.max(s[0],s[1]),l=d?Math.max(s[0],s[1]):Math.min(s[0],s[1]),c=g(m/l),h=g(a/r),p={width:Math.round(r*c),height:Math.round(a/c)};return"width"===n?{width:a,height:p.height}:"height"===n?{width:p.width,height:r}:(h>c?a=p.width:h<c&&(r=p.height),{width:a,height:r})},_gcd:function(e,t){return 0===t?e:this._gcd(t,e%t)},destroy:function(){o.destroy(this._canvasUI),this._canvasUI.remove(),p.fn.destroy.call(this)}}),f=p.extend({init:function(e){p.fn.init.call(this,e),this.buildResizeModel()},confirm:function(){var e=this,t=e._model.width,o=e._model.height,i=e.formWidget._model.toJSON();"percents"===i.measure&&(i.width=t*(i.width/100),i.height=o*(i.height/100)),e.imageeditor.executeCommand({command:"ResizeImageEditorCommand",options:i}),e.destroy()},formSettings:function(){var e=this,t=e.imageeditor.options.messages.panes.resize,o=e.imageeditor.options.messages.common;return{formData:e._model,change:e.onChange.bind(e),items:[{type:"group",label:t.title||"Resize image",layout:"grid",grid:{cols:2,gutter:"0 8px"},items:[{label:o.width||"Width:",field:"width",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",min:0},colSpan:1},{field:"measureW",editor:"DropDownList",attributes:{style:"max-width: 100px;"},label:{text:"&nbsp;",encoded:!1},editorOptions:{dataTextField:"text",dataValueField:"value",dataSource:[{text:t.pixels||"Pixels",value:"pixels"},{text:t.percents||"Percents",value:"percents"}]},colSpan:1},{label:o.height||"Height:",field:"height",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",min:0},colSpan:1},{field:"measureH",label:{text:"&nbsp;",encoded:!1},attributes:{style:"max-width: 100px;"},editor:"DropDownList",editorOptions:{dataTextField:"text",dataValueField:"value",dataSource:[{text:t.pixels||"Pixels",value:"pixels"},{text:t.percents||"Percents",value:"percents"}]},colSpan:1},{label:o.lockAspectRatio||"Lock aspect ratio",field:"lockAspectRatio",colSpan:2}]}]}},buildResizeModel:function(){var e=this.imageeditor.getCanvasElement(),t=e.width,o=e.height;this._model={width:t,height:o,measure:"pixels",measureW:"pixels",measureH:"pixels",lockAspectRatio:!0,ratio:g(t/o)}},onChange:function(e){var t=this,o=e.sender._model,i=o.lockAspectRatio;"measureW"===e.field||"measureH"===e.field?(o.set("measureW",e.value),o.set("measureH",e.value),o.set("measure",e.value)):"measure"===e.field?t.resetNumericsTo(e.value):"width"===e.field&&i&&!t._preventChange?o.set("height",o.width/o.ratio):"height"===e.field&&i&&!t._preventChange&&o.set("width",o.height*o.ratio),o.set("ratio",g(o.width/o.height))},resetNumericsTo:function(e){var t=this,o=t._model.width,i=t._model.height,n=t.formWidget,a=n._model,r=n.element.find("[name=width]").data("kendoNumericTextBox"),d=n.element.find("[name=height]").data("kendoNumericTextBox"),s="percents"===e,m={percents:{format:"#\\%"},pixels:{format:"n0"}};r.setOptions(m[e]),d.setOptions(m[e]),t._preventChange=!0,a.set("width",s?o/r.value()*100:o*(r.value()/100)),a.set("height",s?i/d.value()*100:i*(d.value()/100)),t._preventChange=!1}});i(o.ui.imageeditor,{ImageEditorPane:p,panes:{crop:u,resize:f}})}(window.kendo.jQuery),function(e,t){var o=window.kendo,i=o.ui.imageeditor,n=e.extend,a=o.Class.extend({init:function(e){this.options=n({},e,this.options),this.imageeditor=e.imageeditor}}),r=a.extend({init:function(e){a.fn.init.call(this,e)},exec:function(){var e=this.imageeditor;new i.panes[this.options.value](e).open()}}),d=a.extend({options:{zoomStep:.05,spacing:20},init:function(e){a.fn.init.call(this,e)},exec:function(){var t,o=this,i=o.options.value,n=o.imageeditor,a=n._image.height,r=n.getZoomLevel();isNaN(i)?"string"==typeof i&&(i=o._processStringValue(i,r)):i=parseFloat(i),(t=Math.round(a*i))>0&&(e(n._canvas).css("height",t),n._zoomLevel=i),n.currentPaneTool&&n.currentPaneTool.refresh()},_processStringValue:function(e,t){var o=this.options,i=this.imageeditor,n=i._image.height,a=i.canvasWrapper.height()-o.spacing,r=o.zoomStep;switch(e){case"zoomIn":return t+r;case"zoomOut":return t-r;case"fitToScreen":return Math.round(a/n*100)/100;default:return 1}}}),s=a.extend({init:function(e){a.fn.init.call(this,e)},exec:function(){var e=this.options,t=this.imageeditor,o=t.getCanvasElement(),i=t.getCurrent2dContext(),n=i.getImageData(e.left,e.top,e.width,e.height);i.clearRect(0,0,o.width,o.height),o.width=e.width,o.height=e.height,i.putImageData(n,0,0),t.drawImage(o.toDataURL()).done((function(e){t.drawCanvas(e)})).fail((function(e){t.trigger("error",e)}))}}),m=a.extend({init:function(e){a.fn.init.call(this,e)},exec:function(){var e=this.options,t=this.imageeditor,o=t.getCanvasElement(),i=t.getCurrent2dContext(),n=t.getCurrentImage();i.clearRect(0,0,o.width,o.height),o.width=e.width,o.height=e.height,i.drawImage(n,0,0,e.width,e.height),t.drawImage(o.toDataURL()).done((function(e){t.drawCanvas(e)})).fail((function(e){t.trigger("error",e)}))}}),l=a.extend({exec:function(){var e=this.imageeditor,t=e.getCanvasElement(),o=e.getCurrent2dContext(),i=e.undoStack.pop();i&&(e.redoStack.push(e.getCurrentImage()),delete e._image,o.clearRect(0,0,t.width,t.height),t.width=i.width,t.height=i.height,o.drawImage(i,0,0,i.width,i.height),e.drawImage(t.toDataURL()).done((function(t){e.drawCanvas(t)})).fail((function(t){e.trigger("error",t)})))}}),c=a.extend({exec:function(){var e=this.imageeditor,t=e.getCanvasElement(),o=e.getCurrent2dContext(),i=e.redoStack.pop();i&&(e.undoStack.push(e.getCurrentImage()),delete e._image,o.clearRect(0,0,t.width,t.height),t.width=i.width,t.height=i.height,o.drawImage(i,0,0,i.width,i.height),e.drawImage(t.toDataURL()).done((function(t){e.drawCanvas(t)})).fail((function(t){e.trigger("error",t)})))}}),h=a.extend({exec:function(){var e=this.imageeditor,t=e.getCanvasElement();o.saveAs(n({},e.options.saveAs,{dataURI:t.toDataURL()}))}}),g=a.extend({exec:function(){var t=this,o=t.imageeditor,i=o._upload;if(!i){var n=e("<input type='file' />");n.kendoUpload({select:t.onSelect.bind(t),error:t.onError.bind(t),multiple:!1,validation:{allowedExtensions:[".jpg",".jpeg",".gif",".png",".bmp",".tiff",".webp"]}}),o._upload=i=n.getKendoUpload()}i.element.click()},onSelect:function(e){var t=this.imageeditor,o=e.files[0].rawFile,i=new FileReader;i.addEventListener("load",(function(){t.drawImage(i.result).done((function(e){t.trigger("imageLoaded",{image:e})||(t.drawCanvas(e),t._initUndoRedoStack(),t._toggleTools())})).fail((function(e){t.trigger("error",e)}))}),!1),o&&i.readAsDataURL(o)},onError:function(e){this.imageeditor.trigger("error",e)}});n(o.ui.imageeditor,{ImageEditorCommand:a,commands:{OpenPaneImageEditorCommand:r,ZoomImageEditorCommand:d,CropImageEditorCommand:s,ResizeImageEditorCommand:m,UndoImageEditorCommand:l,RedoImageEditorCommand:c,SaveImageEditorCommand:h,OpenImageEditorCommand:g}})}(window.kendo.jQuery);!function(e,t){var o=window.kendo,i=e.extend,n=e.isPlainObject,a=o.ui.Widget,r=o.ui,d=".kendoImageEditor",s=o._outerHeight,m="error",l="imageLoaded",c="imageRendered",h="execute",g="k-widget k-imageeditor",p="k-imageeditor-header",u="k-imageeditor-toolbar",f="k-imageeditor-action-pane",v="k-imageeditor-content",w="k-imageeditor-canvas-container",x="k-imageeditor-canvas",b=a.extend({init:function(t,i){var n=this;a.fn.init.call(n,t,i),i=e.extend(!0,{},i),n._wrapper(),n._renderHeader(),n._contentWrapper(),n._keyHandler(),i.imageUrl&&n._drawCanvas(),n._initUndoRedoStack(),n._toggleTools(),o.notify(n)},options:{name:"ImageEditor",width:"100%",height:570,imageUrl:"",toolbar:{},saveAs:{fileName:"image.png"},messages:{toolbar:{open:"Open Image",save:"Save Image",undo:"Undo",redo:"Redo",crop:"Crop",resize:"Resize",zoomIn:"Zoom In",zoomOut:"Zoom Out",zoomDropdown:"Zoom options",zoomActualSize:"Show actual size",zoomFitToScreen:"Fit to screen"},panes:{crop:{title:"Crop Image",aspectRatio:"Aspect Ratio:",aspectRatioItems:{originalRatio:"Original ratio","1:1":"1:1 (Square)","4:5":"4:5 (8:10)","5:7":"5:7","2:3":"2:3 (4:6)","16:9":"16:9"},orientation:"Orientation:",portrait:"Portrait",landscape:"Landscape"},resize:{title:"Resize image",pixels:"Pixels",percents:"Percents"}},common:{width:"Width:",height:"Height:",cancel:"Cancel",confirm:"Confirm",lockAspectRatio:"Lock aspect ratio"}}},events:[m,l,c,h],_wrapper:function(){var e=this,t=e.options,i=t.width,n=t.height;e.wrapper=e.element.addClass(g),i&&e.wrapper.width(i),n&&e.wrapper.height(n),e._resizeHandler=o.onResize((function(){e.resize(!0)}))},_renderHeader:function(){var t=this,o=t.options;t.header=e("<div />").addClass(p),t.wrapper.append(t.header),o.toolbar&&(t._initToolbar(),t.toolbar._tabIndex())},_initToolbar:function(){var t=this,o=t.options,n=e("<div></div>").addClass(u),a=i({},o.toolbar,{messages:o.messages.toolbar,action:t.executeCommand.bind(t)});return t.header.append(n),t.toolbar=new r.imageeditor.ToolBar(n,a),t.toolbar},_contentWrapper:function(){var t=this,o=e("<div></div>").addClass(v),i=e("<div></div>").addClass(w),n=e("<div></div>").addClass(x),a=e("<div></div>").addClass(f).hide(),r=s(t.header);t.canvasWrapper=i,t.canvasContainer=n,t.paneWrapper=a,i.append(n),o.height(s(t.wrapper)-r),o.append(i).append(a),t.wrapper.append(o)},_keyHandler:function(){var e=this,t=!1;e.wrapper.on("keydown"+d,(function(o){if(o.ctrlKey){switch(o.keyCode){case 48:e.executeCommand({command:"ZoomImageEditorCommand",options:"fitToScreen"}),t=!0;break;case 189:e.executeCommand({command:"ZoomImageEditorCommand",options:"zoomOut"}),t=!0;break;case 187:e.executeCommand({command:"ZoomImageEditorCommand",options:"zoomIn"}),t=!0;break;case 90:e.executeCommand({command:"UndoImageEditorCommand"}),t=!0;break;case 89:e.executeCommand({command:"RedoImageEditorCommand"}),t=!0}t&&o.preventDefault()}}))},_drawCanvas:function(){var e=this,t=e.options.imageUrl;e.drawImage(t).done((function(t){e.trigger(l,{image:t})||e.drawCanvas(t)})).fail((function(t){e.trigger(m,t)}))},_initUndoRedoStack:function(){this.undoStack=[],this.redoStack=[]},_toggleTools:function(){var e=this,t=e.redoStack.length>0,o=e.undoStack.length>0,i=!!e._image,n=!0;try{e._canvas.toDataURL()}catch(e){n=!1}e.toolbar.toggleTools({redo:t,undo:o,enable:i,canExport:n})},drawImage:function(t){var i=this,n=new e.Deferred,a=new Image;return a.onload=function(){o.ui.progress(i.canvasContainer,!1),n.resolve(a)},a.onerror=function(){o.ui.progress(i.canvasContainer,!1),n.reject(arguments)},o.ui.progress(i.canvasContainer,!0),a.src=t,n.promise()},drawCanvas:function(t){var o=this,i=e("<canvas>Canvas element</canvas>")[0],n=i.getContext("2d");o._canvas&&e(o._canvas).remove(),o._image&&o.undoStack.push(o._image),o._canvas=i,o._ctx=n,o._image=t,i.width=t.width,i.height=t.height,n.drawImage(t,0,0),o.canvasContainer.append(i),t.height>o.canvasWrapper.height()?o.executeCommand({command:"ZoomImageEditorCommand",options:"fitToScreen"}):o.executeCommand({command:"ZoomImageEditorCommand",options:o.getZoomLevel()}),o.trigger(c,{canvas:i,ctx:n,image:t}),o._toggleTools()},getCanvasElement:function(){return this._canvas},getCurrent2dContext:function(){return this._ctx},getCurrentImage:function(){return this._image},executeCommand:function(e){var t=e.command,o=i({imageeditor:this},n(e.options)?e.options:{value:e.options}),a=new r.imageeditor.commands[t](o);if(!this.trigger(h,e))return this._toggleTools(),a.exec()},getZoomLevel:function(){return this._zoomLevel||1},destroy:function(){var e=this;e.element.off(d),e.currentPaneTool&&e.currentPaneTool.destroy(),e.toolbar&&e.toolbar.destroy(),e._upload&&e._upload.destroy(),a.fn.destroy.call(e)}});r.plugin(b)}(window.kendo.jQuery)}));
//# sourceMappingURL=kendo.imageeditor.min.js.map
